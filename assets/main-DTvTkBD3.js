(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function Lf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var no={exports:{}};var Ff=no.exports,Uu;function Uf(){return Uu||(Uu=1,(function(n){(function(e,t){n.exports=e.document?t(e,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return t(r)}})(typeof window<"u"?window:Ff,function(e,t){var r=[],i=Object.getPrototypeOf,a=r.slice,c=r.flat?function(s){return r.flat.call(s)}:function(s){return r.concat.apply([],s)},g=r.push,_=r.indexOf,T={},S=T.toString,k=T.hasOwnProperty,U=k.toString,K=U.call(Object),W={},X=function(u){return typeof u=="function"&&typeof u.nodeType!="number"&&typeof u.item!="function"},Z=function(u){return u!=null&&u===u.window},Y=e.document,Ae={type:!0,src:!0,nonce:!0,noModule:!0};function Se(s,u,h){h=h||Y;var d,m,y=h.createElement("script");if(y.text=s,u)for(d in Ae)m=u[d]||u.getAttribute&&u.getAttribute(d),m&&y.setAttribute(d,m);h.head.appendChild(y).parentNode.removeChild(y)}function Ue(s){return s==null?s+"":typeof s=="object"||typeof s=="function"?T[S.call(s)]||"object":typeof s}var tt="3.7.1",ze=/HTML$/i,l=function(s,u){return new l.fn.init(s,u)};l.fn=l.prototype={jquery:tt,constructor:l,length:0,toArray:function(){return a.call(this)},get:function(s){return s==null?a.call(this):s<0?this[s+this.length]:this[s]},pushStack:function(s){var u=l.merge(this.constructor(),s);return u.prevObject=this,u},each:function(s){return l.each(this,s)},map:function(s){return this.pushStack(l.map(this,function(u,h){return s.call(u,h,u)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(l.grep(this,function(s,u){return(u+1)%2}))},odd:function(){return this.pushStack(l.grep(this,function(s,u){return u%2}))},eq:function(s){var u=this.length,h=+s+(s<0?u:0);return this.pushStack(h>=0&&h<u?[this[h]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:r.sort,splice:r.splice},l.extend=l.fn.extend=function(){var s,u,h,d,m,y,v=arguments[0]||{},R=1,I=arguments.length,N=!1;for(typeof v=="boolean"&&(N=v,v=arguments[R]||{},R++),typeof v!="object"&&!X(v)&&(v={}),R===I&&(v=this,R--);R<I;R++)if((s=arguments[R])!=null)for(u in s)d=s[u],!(u==="__proto__"||v===d)&&(N&&d&&(l.isPlainObject(d)||(m=Array.isArray(d)))?(h=v[u],m&&!Array.isArray(h)?y=[]:!m&&!l.isPlainObject(h)?y={}:y=h,m=!1,v[u]=l.extend(N,y,d)):d!==void 0&&(v[u]=d));return v},l.extend({expando:"jQuery"+(tt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(s){throw new Error(s)},noop:function(){},isPlainObject:function(s){var u,h;return!s||S.call(s)!=="[object Object]"?!1:(u=i(s),u?(h=k.call(u,"constructor")&&u.constructor,typeof h=="function"&&U.call(h)===K):!0)},isEmptyObject:function(s){var u;for(u in s)return!1;return!0},globalEval:function(s,u,h){Se(s,{nonce:u&&u.nonce},h)},each:function(s,u){var h,d=0;if(C(s))for(h=s.length;d<h&&u.call(s[d],d,s[d])!==!1;d++);else for(d in s)if(u.call(s[d],d,s[d])===!1)break;return s},text:function(s){var u,h="",d=0,m=s.nodeType;if(!m)for(;u=s[d++];)h+=l.text(u);return m===1||m===11?s.textContent:m===9?s.documentElement.textContent:m===3||m===4?s.nodeValue:h},makeArray:function(s,u){var h=u||[];return s!=null&&(C(Object(s))?l.merge(h,typeof s=="string"?[s]:s):g.call(h,s)),h},inArray:function(s,u,h){return u==null?-1:_.call(u,s,h)},isXMLDoc:function(s){var u=s&&s.namespaceURI,h=s&&(s.ownerDocument||s).documentElement;return!ze.test(u||h&&h.nodeName||"HTML")},merge:function(s,u){for(var h=+u.length,d=0,m=s.length;d<h;d++)s[m++]=u[d];return s.length=m,s},grep:function(s,u,h){for(var d,m=[],y=0,v=s.length,R=!h;y<v;y++)d=!u(s[y],y),d!==R&&m.push(s[y]);return m},map:function(s,u,h){var d,m,y=0,v=[];if(C(s))for(d=s.length;y<d;y++)m=u(s[y],y,h),m!=null&&v.push(m);else for(y in s)m=u(s[y],y,h),m!=null&&v.push(m);return c(v)},guid:1,support:W}),typeof Symbol=="function"&&(l.fn[Symbol.iterator]=r[Symbol.iterator]),l.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(s,u){T["[object "+u+"]"]=u.toLowerCase()});function C(s){var u=!!s&&"length"in s&&s.length,h=Ue(s);return X(s)||Z(s)?!1:h==="array"||u===0||typeof u=="number"&&u>0&&u-1 in s}function b(s,u){return s.nodeName&&s.nodeName.toLowerCase()===u.toLowerCase()}var x=r.pop,D=r.sort,M=r.splice,A="[\\x20\\t\\r\\n\\f]",We=new RegExp("^"+A+"+|((?:^|[^\\\\])(?:\\\\.)*)"+A+"+$","g");l.contains=function(s,u){var h=u&&u.parentNode;return s===h||!!(h&&h.nodeType===1&&(s.contains?s.contains(h):s.compareDocumentPosition&&s.compareDocumentPosition(h)&16))};var sn=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Qo(s,u){return u?s==="\0"?"ï¿½":s.slice(0,-1)+"\\"+s.charCodeAt(s.length-1).toString(16)+" ":"\\"+s}l.escapeSelector=function(s){return(s+"").replace(sn,Qo)};var Pt=Y,wn=g;(function(){var s,u,h,d,m,y=wn,v,R,I,N,B,q=l.expando,F=0,Q=0,ie=Ws(),_e=Ws(),me=Ws(),Ve=Ws(),o=function(w,P){return w===P&&(m=!0),0},f="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",p="(?:\\\\[\\da-fA-F]{1,6}"+A+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",E="\\["+A+"*("+p+")(?:"+A+"*([*^$|!~]?=)"+A+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+p+"))|)"+A+"*\\]",O=":("+p+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+E+")*)|.*)\\)|)",V=new RegExp(A+"+","g"),z=new RegExp("^"+A+"*,"+A+"*"),fe=new RegExp("^"+A+"*([>+~]|"+A+")"+A+"*"),Me=new RegExp(A+"|>"),ye=new RegExp(O),Oe=new RegExp("^"+p+"$"),qe={ID:new RegExp("^#("+p+")"),CLASS:new RegExp("^\\.("+p+")"),TAG:new RegExp("^("+p+"|[*])"),ATTR:new RegExp("^"+E),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+A+"*(even|odd|(([+-]|)(\\d*)n|)"+A+"*(?:([+-]|)"+A+"*(\\d+)|))"+A+"*\\)|)","i"),bool:new RegExp("^(?:"+f+")$","i"),needsContext:new RegExp("^"+A+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+A+"*((?:-\\d)?\\d*)"+A+"*\\)|)(?=[^-]|$)","i")},ct=/^(?:input|select|textarea|button)$/i,it=/^h\d$/i,He=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ln=/[+~]/,Et=new RegExp("\\\\[\\da-fA-F]{1,6}"+A+"?|\\\\([^\\r\\n\\f])","g"),fn=function(w,P){var L="0x"+w.slice(1)-65536;return P||(L<0?String.fromCharCode(L+65536):String.fromCharCode(L>>10|55296,L&1023|56320))},kf=function(){Fn()},Df=Ks(function(w){return w.disabled===!0&&b(w,"fieldset")},{dir:"parentNode",next:"legend"});function Nf(){try{return v.activeElement}catch{}}try{y.apply(r=a.call(Pt.childNodes),Pt.childNodes),r[Pt.childNodes.length].nodeType}catch{y={apply:function(P,L){wn.apply(P,a.call(L))},call:function(P){wn.apply(P,a.call(arguments,1))}}}function Re(w,P,L,j){var H,J,ee,se,te,ve,le,de=P&&P.ownerDocument,Te=P?P.nodeType:9;if(L=L||[],typeof w!="string"||!w||Te!==1&&Te!==9&&Te!==11)return L;if(!j&&(Fn(P),P=P||v,I)){if(Te!==11&&(te=He.exec(w)))if(H=te[1]){if(Te===9)if(ee=P.getElementById(H)){if(ee.id===H)return y.call(L,ee),L}else return L;else if(de&&(ee=de.getElementById(H))&&Re.contains(P,ee)&&ee.id===H)return y.call(L,ee),L}else{if(te[2])return y.apply(L,P.getElementsByTagName(w)),L;if((H=te[3])&&P.getElementsByClassName)return y.apply(L,P.getElementsByClassName(H)),L}if(!Ve[w+" "]&&(!N||!N.test(w))){if(le=w,de=P,Te===1&&(Me.test(w)||fe.test(w))){for(de=Ln.test(w)&&ia(P.parentNode)||P,(de!=P||!W.scope)&&((se=P.getAttribute("id"))?se=l.escapeSelector(se):P.setAttribute("id",se=q)),ve=Gi(w),J=ve.length;J--;)ve[J]=(se?"#"+se:":scope")+" "+Gs(ve[J]);le=ve.join(",")}try{return y.apply(L,de.querySelectorAll(le)),L}catch{Ve(w,!0)}finally{se===q&&P.removeAttribute("id")}}}return Fu(w.replace(We,"$1"),P,L,j)}function Ws(){var w=[];function P(L,j){return w.push(L+" ")>u.cacheLength&&delete P[w.shift()],P[L+" "]=j}return P}function Ot(w){return w[q]=!0,w}function qr(w){var P=v.createElement("fieldset");try{return!!w(P)}catch{return!1}finally{P.parentNode&&P.parentNode.removeChild(P),P=null}}function xf(w){return function(P){return b(P,"input")&&P.type===w}}function Vf(w){return function(P){return(b(P,"input")||b(P,"button"))&&P.type===w}}function Mu(w){return function(P){return"form"in P?P.parentNode&&P.disabled===!1?"label"in P?"label"in P.parentNode?P.parentNode.disabled===w:P.disabled===w:P.isDisabled===w||P.isDisabled!==!w&&Df(P)===w:P.disabled===w:"label"in P?P.disabled===w:!1}}function _r(w){return Ot(function(P){return P=+P,Ot(function(L,j){for(var H,J=w([],L.length,P),ee=J.length;ee--;)L[H=J[ee]]&&(L[H]=!(j[H]=L[H]))})})}function ia(w){return w&&typeof w.getElementsByTagName<"u"&&w}function Fn(w){var P,L=w?w.ownerDocument||w:Pt;return L==v||L.nodeType!==9||!L.documentElement||(v=L,R=v.documentElement,I=!l.isXMLDoc(v),B=R.matches||R.webkitMatchesSelector||R.msMatchesSelector,R.msMatchesSelector&&Pt!=v&&(P=v.defaultView)&&P.top!==P&&P.addEventListener("unload",kf),W.getById=qr(function(j){return R.appendChild(j).id=l.expando,!v.getElementsByName||!v.getElementsByName(l.expando).length}),W.disconnectedMatch=qr(function(j){return B.call(j,"*")}),W.scope=qr(function(){return v.querySelectorAll(":scope")}),W.cssHas=qr(function(){try{return v.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),W.getById?(u.filter.ID=function(j){var H=j.replace(Et,fn);return function(J){return J.getAttribute("id")===H}},u.find.ID=function(j,H){if(typeof H.getElementById<"u"&&I){var J=H.getElementById(j);return J?[J]:[]}}):(u.filter.ID=function(j){var H=j.replace(Et,fn);return function(J){var ee=typeof J.getAttributeNode<"u"&&J.getAttributeNode("id");return ee&&ee.value===H}},u.find.ID=function(j,H){if(typeof H.getElementById<"u"&&I){var J,ee,se,te=H.getElementById(j);if(te){if(J=te.getAttributeNode("id"),J&&J.value===j)return[te];for(se=H.getElementsByName(j),ee=0;te=se[ee++];)if(J=te.getAttributeNode("id"),J&&J.value===j)return[te]}return[]}}),u.find.TAG=function(j,H){return typeof H.getElementsByTagName<"u"?H.getElementsByTagName(j):H.querySelectorAll(j)},u.find.CLASS=function(j,H){if(typeof H.getElementsByClassName<"u"&&I)return H.getElementsByClassName(j)},N=[],qr(function(j){var H;R.appendChild(j).innerHTML="<a id='"+q+"' href='' disabled='disabled'></a><select id='"+q+"-\r\\' disabled='disabled'><option selected=''></option></select>",j.querySelectorAll("[selected]").length||N.push("\\["+A+"*(?:value|"+f+")"),j.querySelectorAll("[id~="+q+"-]").length||N.push("~="),j.querySelectorAll("a#"+q+"+*").length||N.push(".#.+[+~]"),j.querySelectorAll(":checked").length||N.push(":checked"),H=v.createElement("input"),H.setAttribute("type","hidden"),j.appendChild(H).setAttribute("name","D"),R.appendChild(j).disabled=!0,j.querySelectorAll(":disabled").length!==2&&N.push(":enabled",":disabled"),H=v.createElement("input"),H.setAttribute("name",""),j.appendChild(H),j.querySelectorAll("[name='']").length||N.push("\\["+A+"*name"+A+"*="+A+`*(?:''|"")`)}),W.cssHas||N.push(":has"),N=N.length&&new RegExp(N.join("|")),o=function(j,H){if(j===H)return m=!0,0;var J=!j.compareDocumentPosition-!H.compareDocumentPosition;return J||(J=(j.ownerDocument||j)==(H.ownerDocument||H)?j.compareDocumentPosition(H):1,J&1||!W.sortDetached&&H.compareDocumentPosition(j)===J?j===v||j.ownerDocument==Pt&&Re.contains(Pt,j)?-1:H===v||H.ownerDocument==Pt&&Re.contains(Pt,H)?1:d?_.call(d,j)-_.call(d,H):0:J&4?-1:1)}),v}Re.matches=function(w,P){return Re(w,null,null,P)},Re.matchesSelector=function(w,P){if(Fn(w),I&&!Ve[P+" "]&&(!N||!N.test(P)))try{var L=B.call(w,P);if(L||W.disconnectedMatch||w.document&&w.document.nodeType!==11)return L}catch{Ve(P,!0)}return Re(P,v,null,[w]).length>0},Re.contains=function(w,P){return(w.ownerDocument||w)!=v&&Fn(w),l.contains(w,P)},Re.attr=function(w,P){(w.ownerDocument||w)!=v&&Fn(w);var L=u.attrHandle[P.toLowerCase()],j=L&&k.call(u.attrHandle,P.toLowerCase())?L(w,P,!I):void 0;return j!==void 0?j:w.getAttribute(P)},Re.error=function(w){throw new Error("Syntax error, unrecognized expression: "+w)},l.uniqueSort=function(w){var P,L=[],j=0,H=0;if(m=!W.sortStable,d=!W.sortStable&&a.call(w,0),D.call(w,o),m){for(;P=w[H++];)P===w[H]&&(j=L.push(H));for(;j--;)M.call(w,L[j],1)}return d=null,w},l.fn.uniqueSort=function(){return this.pushStack(l.uniqueSort(a.apply(this)))},u=l.expr={cacheLength:50,createPseudo:Ot,match:qe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(w){return w[1]=w[1].replace(Et,fn),w[3]=(w[3]||w[4]||w[5]||"").replace(Et,fn),w[2]==="~="&&(w[3]=" "+w[3]+" "),w.slice(0,4)},CHILD:function(w){return w[1]=w[1].toLowerCase(),w[1].slice(0,3)==="nth"?(w[3]||Re.error(w[0]),w[4]=+(w[4]?w[5]+(w[6]||1):2*(w[3]==="even"||w[3]==="odd")),w[5]=+(w[7]+w[8]||w[3]==="odd")):w[3]&&Re.error(w[0]),w},PSEUDO:function(w){var P,L=!w[6]&&w[2];return qe.CHILD.test(w[0])?null:(w[3]?w[2]=w[4]||w[5]||"":L&&ye.test(L)&&(P=Gi(L,!0))&&(P=L.indexOf(")",L.length-P)-L.length)&&(w[0]=w[0].slice(0,P),w[2]=L.slice(0,P)),w.slice(0,3))}},filter:{TAG:function(w){var P=w.replace(Et,fn).toLowerCase();return w==="*"?function(){return!0}:function(L){return b(L,P)}},CLASS:function(w){var P=ie[w+" "];return P||(P=new RegExp("(^|"+A+")"+w+"("+A+"|$)"))&&ie(w,function(L){return P.test(typeof L.className=="string"&&L.className||typeof L.getAttribute<"u"&&L.getAttribute("class")||"")})},ATTR:function(w,P,L){return function(j){var H=Re.attr(j,w);return H==null?P==="!=":P?(H+="",P==="="?H===L:P==="!="?H!==L:P==="^="?L&&H.indexOf(L)===0:P==="*="?L&&H.indexOf(L)>-1:P==="$="?L&&H.slice(-L.length)===L:P==="~="?(" "+H.replace(V," ")+" ").indexOf(L)>-1:P==="|="?H===L||H.slice(0,L.length+1)===L+"-":!1):!0}},CHILD:function(w,P,L,j,H){var J=w.slice(0,3)!=="nth",ee=w.slice(-4)!=="last",se=P==="of-type";return j===1&&H===0?function(te){return!!te.parentNode}:function(te,ve,le){var de,Te,ae,ke,yt,lt=J!==ee?"nextSibling":"previousSibling",St=te.parentNode,Wt=se&&te.nodeName.toLowerCase(),Hr=!le&&!se,mt=!1;if(St){if(J){for(;lt;){for(ae=te;ae=ae[lt];)if(se?b(ae,Wt):ae.nodeType===1)return!1;yt=lt=w==="only"&&!yt&&"nextSibling"}return!0}if(yt=[ee?St.firstChild:St.lastChild],ee&&Hr){for(Te=St[q]||(St[q]={}),de=Te[w]||[],ke=de[0]===F&&de[1],mt=ke&&de[2],ae=ke&&St.childNodes[ke];ae=++ke&&ae&&ae[lt]||(mt=ke=0)||yt.pop();)if(ae.nodeType===1&&++mt&&ae===te){Te[w]=[F,ke,mt];break}}else if(Hr&&(Te=te[q]||(te[q]={}),de=Te[w]||[],ke=de[0]===F&&de[1],mt=ke),mt===!1)for(;(ae=++ke&&ae&&ae[lt]||(mt=ke=0)||yt.pop())&&!((se?b(ae,Wt):ae.nodeType===1)&&++mt&&(Hr&&(Te=ae[q]||(ae[q]={}),Te[w]=[F,mt]),ae===te)););return mt-=H,mt===j||mt%j===0&&mt/j>=0}}},PSEUDO:function(w,P){var L,j=u.pseudos[w]||u.setFilters[w.toLowerCase()]||Re.error("unsupported pseudo: "+w);return j[q]?j(P):j.length>1?(L=[w,w,"",P],u.setFilters.hasOwnProperty(w.toLowerCase())?Ot(function(H,J){for(var ee,se=j(H,P),te=se.length;te--;)ee=_.call(H,se[te]),H[ee]=!(J[ee]=se[te])}):function(H){return j(H,0,L)}):j}},pseudos:{not:Ot(function(w){var P=[],L=[],j=ua(w.replace(We,"$1"));return j[q]?Ot(function(H,J,ee,se){for(var te,ve=j(H,null,se,[]),le=H.length;le--;)(te=ve[le])&&(H[le]=!(J[le]=te))}):function(H,J,ee){return P[0]=H,j(P,null,ee,L),P[0]=null,!L.pop()}}),has:Ot(function(w){return function(P){return Re(w,P).length>0}}),contains:Ot(function(w){return w=w.replace(Et,fn),function(P){return(P.textContent||l.text(P)).indexOf(w)>-1}}),lang:Ot(function(w){return Oe.test(w||"")||Re.error("unsupported lang: "+w),w=w.replace(Et,fn).toLowerCase(),function(P){var L;do if(L=I?P.lang:P.getAttribute("xml:lang")||P.getAttribute("lang"))return L=L.toLowerCase(),L===w||L.indexOf(w+"-")===0;while((P=P.parentNode)&&P.nodeType===1);return!1}}),target:function(w){var P=e.location&&e.location.hash;return P&&P.slice(1)===w.id},root:function(w){return w===R},focus:function(w){return w===Nf()&&v.hasFocus()&&!!(w.type||w.href||~w.tabIndex)},enabled:Mu(!1),disabled:Mu(!0),checked:function(w){return b(w,"input")&&!!w.checked||b(w,"option")&&!!w.selected},selected:function(w){return w.parentNode&&w.parentNode.selectedIndex,w.selected===!0},empty:function(w){for(w=w.firstChild;w;w=w.nextSibling)if(w.nodeType<6)return!1;return!0},parent:function(w){return!u.pseudos.empty(w)},header:function(w){return it.test(w.nodeName)},input:function(w){return ct.test(w.nodeName)},button:function(w){return b(w,"input")&&w.type==="button"||b(w,"button")},text:function(w){var P;return b(w,"input")&&w.type==="text"&&((P=w.getAttribute("type"))==null||P.toLowerCase()==="text")},first:_r(function(){return[0]}),last:_r(function(w,P){return[P-1]}),eq:_r(function(w,P,L){return[L<0?L+P:L]}),even:_r(function(w,P){for(var L=0;L<P;L+=2)w.push(L);return w}),odd:_r(function(w,P){for(var L=1;L<P;L+=2)w.push(L);return w}),lt:_r(function(w,P,L){var j;for(L<0?j=L+P:L>P?j=P:j=L;--j>=0;)w.push(j);return w}),gt:_r(function(w,P,L){for(var j=L<0?L+P:L;++j<P;)w.push(j);return w})}},u.pseudos.nth=u.pseudos.eq;for(s in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})u.pseudos[s]=xf(s);for(s in{submit:!0,reset:!0})u.pseudos[s]=Vf(s);function Lu(){}Lu.prototype=u.filters=u.pseudos,u.setFilters=new Lu;function Gi(w,P){var L,j,H,J,ee,se,te,ve=_e[w+" "];if(ve)return P?0:ve.slice(0);for(ee=w,se=[],te=u.preFilter;ee;){(!L||(j=z.exec(ee)))&&(j&&(ee=ee.slice(j[0].length)||ee),se.push(H=[])),L=!1,(j=fe.exec(ee))&&(L=j.shift(),H.push({value:L,type:j[0].replace(We," ")}),ee=ee.slice(L.length));for(J in u.filter)(j=qe[J].exec(ee))&&(!te[J]||(j=te[J](j)))&&(L=j.shift(),H.push({value:L,type:J,matches:j}),ee=ee.slice(L.length));if(!L)break}return P?ee.length:ee?Re.error(w):_e(w,se).slice(0)}function Gs(w){for(var P=0,L=w.length,j="";P<L;P++)j+=w[P].value;return j}function Ks(w,P,L){var j=P.dir,H=P.next,J=H||j,ee=L&&J==="parentNode",se=Q++;return P.first?function(te,ve,le){for(;te=te[j];)if(te.nodeType===1||ee)return w(te,ve,le);return!1}:function(te,ve,le){var de,Te,ae=[F,se];if(le){for(;te=te[j];)if((te.nodeType===1||ee)&&w(te,ve,le))return!0}else for(;te=te[j];)if(te.nodeType===1||ee)if(Te=te[q]||(te[q]={}),H&&b(te,H))te=te[j]||te;else{if((de=Te[J])&&de[0]===F&&de[1]===se)return ae[2]=de[2];if(Te[J]=ae,ae[2]=w(te,ve,le))return!0}return!1}}function sa(w){return w.length>1?function(P,L,j){for(var H=w.length;H--;)if(!w[H](P,L,j))return!1;return!0}:w[0]}function Of(w,P,L){for(var j=0,H=P.length;j<H;j++)Re(w,P[j],L);return L}function Qs(w,P,L,j,H){for(var J,ee=[],se=0,te=w.length,ve=P!=null;se<te;se++)(J=w[se])&&(!L||L(J,j,H))&&(ee.push(J),ve&&P.push(se));return ee}function oa(w,P,L,j,H,J){return j&&!j[q]&&(j=oa(j)),H&&!H[q]&&(H=oa(H,J)),Ot(function(ee,se,te,ve){var le,de,Te,ae,ke=[],yt=[],lt=se.length,St=ee||Of(P||"*",te.nodeType?[te]:te,[]),Wt=w&&(ee||!P)?Qs(St,ke,w,te,ve):St;if(L?(ae=H||(ee?w:lt||j)?[]:se,L(Wt,ae,te,ve)):ae=Wt,j)for(le=Qs(ae,yt),j(le,[],te,ve),de=le.length;de--;)(Te=le[de])&&(ae[yt[de]]=!(Wt[yt[de]]=Te));if(ee){if(H||w){if(H){for(le=[],de=ae.length;de--;)(Te=ae[de])&&le.push(Wt[de]=Te);H(null,ae=[],le,ve)}for(de=ae.length;de--;)(Te=ae[de])&&(le=H?_.call(ee,Te):ke[de])>-1&&(ee[le]=!(se[le]=Te))}}else ae=Qs(ae===se?ae.splice(lt,ae.length):ae),H?H(null,se,ae,ve):y.apply(se,ae)})}function aa(w){for(var P,L,j,H=w.length,J=u.relative[w[0].type],ee=J||u.relative[" "],se=J?1:0,te=Ks(function(de){return de===P},ee,!0),ve=Ks(function(de){return _.call(P,de)>-1},ee,!0),le=[function(de,Te,ae){var ke=!J&&(ae||Te!=h)||((P=Te).nodeType?te(de,Te,ae):ve(de,Te,ae));return P=null,ke}];se<H;se++)if(L=u.relative[w[se].type])le=[Ks(sa(le),L)];else{if(L=u.filter[w[se].type].apply(null,w[se].matches),L[q]){for(j=++se;j<H&&!u.relative[w[j].type];j++);return oa(se>1&&sa(le),se>1&&Gs(w.slice(0,se-1).concat({value:w[se-2].type===" "?"*":""})).replace(We,"$1"),L,se<j&&aa(w.slice(se,j)),j<H&&aa(w=w.slice(j)),j<H&&Gs(w))}le.push(L)}return sa(le)}function Mf(w,P){var L=P.length>0,j=w.length>0,H=function(J,ee,se,te,ve){var le,de,Te,ae=0,ke="0",yt=J&&[],lt=[],St=h,Wt=J||j&&u.find.TAG("*",ve),Hr=F+=St==null?1:Math.random()||.1,mt=Wt.length;for(ve&&(h=ee==v||ee||ve);ke!==mt&&(le=Wt[ke])!=null;ke++){if(j&&le){for(de=0,!ee&&le.ownerDocument!=v&&(Fn(le),se=!I);Te=w[de++];)if(Te(le,ee||v,se)){y.call(te,le);break}ve&&(F=Hr)}L&&((le=!Te&&le)&&ae--,J&&yt.push(le))}if(ae+=ke,L&&ke!==ae){for(de=0;Te=P[de++];)Te(yt,lt,ee,se);if(J){if(ae>0)for(;ke--;)yt[ke]||lt[ke]||(lt[ke]=x.call(te));lt=Qs(lt)}y.apply(te,lt),ve&&!J&&lt.length>0&&ae+P.length>1&&l.uniqueSort(te)}return ve&&(F=Hr,h=St),yt};return L?Ot(H):H}function ua(w,P){var L,j=[],H=[],J=me[w+" "];if(!J){for(P||(P=Gi(w)),L=P.length;L--;)J=aa(P[L]),J[q]?j.push(J):H.push(J);J=me(w,Mf(H,j)),J.selector=w}return J}function Fu(w,P,L,j){var H,J,ee,se,te,ve=typeof w=="function"&&w,le=!j&&Gi(w=ve.selector||w);if(L=L||[],le.length===1){if(J=le[0]=le[0].slice(0),J.length>2&&(ee=J[0]).type==="ID"&&P.nodeType===9&&I&&u.relative[J[1].type]){if(P=(u.find.ID(ee.matches[0].replace(Et,fn),P)||[])[0],P)ve&&(P=P.parentNode);else return L;w=w.slice(J.shift().value.length)}for(H=qe.needsContext.test(w)?0:J.length;H--&&(ee=J[H],!u.relative[se=ee.type]);)if((te=u.find[se])&&(j=te(ee.matches[0].replace(Et,fn),Ln.test(J[0].type)&&ia(P.parentNode)||P))){if(J.splice(H,1),w=j.length&&Gs(J),!w)return y.apply(L,j),L;break}}return(ve||ua(w,le))(j,P,!I,L,!P||Ln.test(w)&&ia(P.parentNode)||P),L}W.sortStable=q.split("").sort(o).join("")===q,Fn(),W.sortDetached=qr(function(w){return w.compareDocumentPosition(v.createElement("fieldset"))&1}),l.find=Re,l.expr[":"]=l.expr.pseudos,l.unique=l.uniqueSort,Re.compile=ua,Re.select=Fu,Re.setDocument=Fn,Re.tokenize=Gi,Re.escape=l.escapeSelector,Re.getText=l.text,Re.isXML=l.isXMLDoc,Re.selectors=l.expr,Re.support=l.support,Re.uniqueSort=l.uniqueSort})();var kt=function(s,u,h){for(var d=[],m=h!==void 0;(s=s[u])&&s.nodeType!==9;)if(s.nodeType===1){if(m&&l(s).is(h))break;d.push(s)}return d},Ss=function(s,u){for(var h=[];s;s=s.nextSibling)s.nodeType===1&&s!==u&&h.push(s);return h},pi=l.expr.match.needsContext,gi=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Nr(s,u,h){return X(u)?l.grep(s,function(d,m){return!!u.call(d,m,d)!==h}):u.nodeType?l.grep(s,function(d){return d===u!==h}):typeof u!="string"?l.grep(s,function(d){return _.call(u,d)>-1!==h}):l.filter(u,s,h)}l.filter=function(s,u,h){var d=u[0];return h&&(s=":not("+s+")"),u.length===1&&d.nodeType===1?l.find.matchesSelector(d,s)?[d]:[]:l.find.matches(s,l.grep(u,function(m){return m.nodeType===1}))},l.fn.extend({find:function(s){var u,h,d=this.length,m=this;if(typeof s!="string")return this.pushStack(l(s).filter(function(){for(u=0;u<d;u++)if(l.contains(m[u],this))return!0}));for(h=this.pushStack([]),u=0;u<d;u++)l.find(s,m[u],h);return d>1?l.uniqueSort(h):h},filter:function(s){return this.pushStack(Nr(this,s||[],!1))},not:function(s){return this.pushStack(Nr(this,s||[],!0))},is:function(s){return!!Nr(this,typeof s=="string"&&pi.test(s)?l(s):s||[],!1).length}});var nr,mi=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,yi=l.fn.init=function(s,u,h){var d,m;if(!s)return this;if(h=h||nr,typeof s=="string")if(s[0]==="<"&&s[s.length-1]===">"&&s.length>=3?d=[null,s,null]:d=mi.exec(s),d&&(d[1]||!u))if(d[1]){if(u=u instanceof l?u[0]:u,l.merge(this,l.parseHTML(d[1],u&&u.nodeType?u.ownerDocument||u:Y,!0)),gi.test(d[1])&&l.isPlainObject(u))for(d in u)X(this[d])?this[d](u[d]):this.attr(d,u[d]);return this}else return m=Y.getElementById(d[2]),m&&(this[0]=m,this.length=1),this;else return!u||u.jquery?(u||h).find(s):this.constructor(u).find(s);else{if(s.nodeType)return this[0]=s,this.length=1,this;if(X(s))return h.ready!==void 0?h.ready(s):s(l)}return l.makeArray(s,this)};yi.prototype=l.fn,nr=l(Y);var _i=/^(?:parents|prev(?:Until|All))/,vi={children:!0,contents:!0,next:!0,prev:!0};l.fn.extend({has:function(s){var u=l(s,this),h=u.length;return this.filter(function(){for(var d=0;d<h;d++)if(l.contains(this,u[d]))return!0})},closest:function(s,u){var h,d=0,m=this.length,y=[],v=typeof s!="string"&&l(s);if(!pi.test(s)){for(;d<m;d++)for(h=this[d];h&&h!==u;h=h.parentNode)if(h.nodeType<11&&(v?v.index(h)>-1:h.nodeType===1&&l.find.matchesSelector(h,s))){y.push(h);break}}return this.pushStack(y.length>1?l.uniqueSort(y):y)},index:function(s){return s?typeof s=="string"?_.call(l(s),this[0]):_.call(this,s.jquery?s[0]:s):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(s,u){return this.pushStack(l.uniqueSort(l.merge(this.get(),l(s,u))))},addBack:function(s){return this.add(s==null?this.prevObject:this.prevObject.filter(s))}});function Ti(s,u){for(;(s=s[u])&&s.nodeType!==1;);return s}l.each({parent:function(s){var u=s.parentNode;return u&&u.nodeType!==11?u:null},parents:function(s){return kt(s,"parentNode")},parentsUntil:function(s,u,h){return kt(s,"parentNode",h)},next:function(s){return Ti(s,"nextSibling")},prev:function(s){return Ti(s,"previousSibling")},nextAll:function(s){return kt(s,"nextSibling")},prevAll:function(s){return kt(s,"previousSibling")},nextUntil:function(s,u,h){return kt(s,"nextSibling",h)},prevUntil:function(s,u,h){return kt(s,"previousSibling",h)},siblings:function(s){return Ss((s.parentNode||{}).firstChild,s)},children:function(s){return Ss(s.firstChild)},contents:function(s){return s.contentDocument!=null&&i(s.contentDocument)?s.contentDocument:(b(s,"template")&&(s=s.content||s),l.merge([],s.childNodes))}},function(s,u){l.fn[s]=function(h,d){var m=l.map(this,u,h);return s.slice(-5)!=="Until"&&(d=h),d&&typeof d=="string"&&(m=l.filter(d,m)),this.length>1&&(vi[s]||l.uniqueSort(m),_i.test(s)&&m.reverse()),this.pushStack(m)}});var wt=/[^\x20\t\r\n\f]+/g;function Xo(s){var u={};return l.each(s.match(wt)||[],function(h,d){u[d]=!0}),u}l.Callbacks=function(s){s=typeof s=="string"?Xo(s):l.extend({},s);var u,h,d,m,y=[],v=[],R=-1,I=function(){for(m=m||s.once,d=u=!0;v.length;R=-1)for(h=v.shift();++R<y.length;)y[R].apply(h[0],h[1])===!1&&s.stopOnFalse&&(R=y.length,h=!1);s.memory||(h=!1),u=!1,m&&(h?y=[]:y="")},N={add:function(){return y&&(h&&!u&&(R=y.length-1,v.push(h)),(function B(q){l.each(q,function(F,Q){X(Q)?(!s.unique||!N.has(Q))&&y.push(Q):Q&&Q.length&&Ue(Q)!=="string"&&B(Q)})})(arguments),h&&!u&&I()),this},remove:function(){return l.each(arguments,function(B,q){for(var F;(F=l.inArray(q,y,F))>-1;)y.splice(F,1),F<=R&&R--}),this},has:function(B){return B?l.inArray(B,y)>-1:y.length>0},empty:function(){return y&&(y=[]),this},disable:function(){return m=v=[],y=h="",this},disabled:function(){return!y},lock:function(){return m=v=[],!h&&!u&&(y=h=""),this},locked:function(){return!!m},fireWith:function(B,q){return m||(q=q||[],q=[B,q.slice?q.slice():q],v.push(q),u||I()),this},fire:function(){return N.fireWith(this,arguments),this},fired:function(){return!!d}};return N};function on(s){return s}function In(s){throw s}function Ei(s,u,h,d){var m;try{s&&X(m=s.promise)?m.call(s).done(u).fail(h):s&&X(m=s.then)?m.call(s,u,h):u.apply(void 0,[s].slice(d))}catch(y){h.apply(void 0,[y])}}l.extend({Deferred:function(s){var u=[["notify","progress",l.Callbacks("memory"),l.Callbacks("memory"),2],["resolve","done",l.Callbacks("once memory"),l.Callbacks("once memory"),0,"resolved"],["reject","fail",l.Callbacks("once memory"),l.Callbacks("once memory"),1,"rejected"]],h="pending",d={state:function(){return h},always:function(){return m.done(arguments).fail(arguments),this},catch:function(y){return d.then(null,y)},pipe:function(){var y=arguments;return l.Deferred(function(v){l.each(u,function(R,I){var N=X(y[I[4]])&&y[I[4]];m[I[1]](function(){var B=N&&N.apply(this,arguments);B&&X(B.promise)?B.promise().progress(v.notify).done(v.resolve).fail(v.reject):v[I[0]+"With"](this,N?[B]:arguments)})}),y=null}).promise()},then:function(y,v,R){var I=0;function N(B,q,F,Q){return function(){var ie=this,_e=arguments,me=function(){var o,f;if(!(B<I)){if(o=F.apply(ie,_e),o===q.promise())throw new TypeError("Thenable self-resolution");f=o&&(typeof o=="object"||typeof o=="function")&&o.then,X(f)?Q?f.call(o,N(I,q,on,Q),N(I,q,In,Q)):(I++,f.call(o,N(I,q,on,Q),N(I,q,In,Q),N(I,q,on,q.notifyWith))):(F!==on&&(ie=void 0,_e=[o]),(Q||q.resolveWith)(ie,_e))}},Ve=Q?me:function(){try{me()}catch(o){l.Deferred.exceptionHook&&l.Deferred.exceptionHook(o,Ve.error),B+1>=I&&(F!==In&&(ie=void 0,_e=[o]),q.rejectWith(ie,_e))}};B?Ve():(l.Deferred.getErrorHook?Ve.error=l.Deferred.getErrorHook():l.Deferred.getStackHook&&(Ve.error=l.Deferred.getStackHook()),e.setTimeout(Ve))}}return l.Deferred(function(B){u[0][3].add(N(0,B,X(R)?R:on,B.notifyWith)),u[1][3].add(N(0,B,X(y)?y:on)),u[2][3].add(N(0,B,X(v)?v:In))}).promise()},promise:function(y){return y!=null?l.extend(y,d):d}},m={};return l.each(u,function(y,v){var R=v[2],I=v[5];d[v[1]]=R.add,I&&R.add(function(){h=I},u[3-y][2].disable,u[3-y][3].disable,u[0][2].lock,u[0][3].lock),R.add(v[3].fire),m[v[0]]=function(){return m[v[0]+"With"](this===m?void 0:this,arguments),this},m[v[0]+"With"]=R.fireWith}),d.promise(m),s&&s.call(m,m),m},when:function(s){var u=arguments.length,h=u,d=Array(h),m=a.call(arguments),y=l.Deferred(),v=function(R){return function(I){d[R]=this,m[R]=arguments.length>1?a.call(arguments):I,--u||y.resolveWith(d,m)}};if(u<=1&&(Ei(s,y.done(v(h)).resolve,y.reject,!u),y.state()==="pending"||X(m[h]&&m[h].then)))return y.then();for(;h--;)Ei(m[h],v(h),y.reject);return y.promise()}});var Jo=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;l.Deferred.exceptionHook=function(s,u){e.console&&e.console.warn&&s&&Jo.test(s.name)&&e.console.warn("jQuery.Deferred exception: "+s.message,s.stack,u)},l.readyException=function(s){e.setTimeout(function(){throw s})};var rr=l.Deferred();l.fn.ready=function(s){return rr.then(s).catch(function(u){l.readyException(u)}),this},l.extend({isReady:!1,readyWait:1,ready:function(s){(s===!0?--l.readyWait:l.isReady)||(l.isReady=!0,!(s!==!0&&--l.readyWait>0)&&rr.resolveWith(Y,[l]))}}),l.ready.then=rr.then;function An(){Y.removeEventListener("DOMContentLoaded",An),e.removeEventListener("load",An),l.ready()}Y.readyState==="complete"||Y.readyState!=="loading"&&!Y.documentElement.doScroll?e.setTimeout(l.ready):(Y.addEventListener("DOMContentLoaded",An),e.addEventListener("load",An));var It=function(s,u,h,d,m,y,v){var R=0,I=s.length,N=h==null;if(Ue(h)==="object"){m=!0;for(R in h)It(s,u,R,h[R],!0,y,v)}else if(d!==void 0&&(m=!0,X(d)||(v=!0),N&&(v?(u.call(s,d),u=null):(N=u,u=function(B,q,F){return N.call(l(B),F)})),u))for(;R<I;R++)u(s[R],h,v?d:d.call(s[R],R,u(s[R],h)));return m?s:N?u.call(s):I?u(s[0],h):y},Je=/^-ms-/,nt=/-([a-z])/g;function xr(s,u){return u.toUpperCase()}function At(s){return s.replace(Je,"ms-").replace(nt,xr)}var bn=function(s){return s.nodeType===1||s.nodeType===9||!+s.nodeType};function ir(){this.expando=l.expando+ir.uid++}ir.uid=1,ir.prototype={cache:function(s){var u=s[this.expando];return u||(u={},bn(s)&&(s.nodeType?s[this.expando]=u:Object.defineProperty(s,this.expando,{value:u,configurable:!0}))),u},set:function(s,u,h){var d,m=this.cache(s);if(typeof u=="string")m[At(u)]=h;else for(d in u)m[At(d)]=u[d];return m},get:function(s,u){return u===void 0?this.cache(s):s[this.expando]&&s[this.expando][At(u)]},access:function(s,u,h){return u===void 0||u&&typeof u=="string"&&h===void 0?this.get(s,u):(this.set(s,u,h),h!==void 0?h:u)},remove:function(s,u){var h,d=s[this.expando];if(d!==void 0){if(u!==void 0)for(Array.isArray(u)?u=u.map(At):(u=At(u),u=u in d?[u]:u.match(wt)||[]),h=u.length;h--;)delete d[u[h]];(u===void 0||l.isEmptyObject(d))&&(s.nodeType?s[this.expando]=void 0:delete s[this.expando])}},hasData:function(s){var u=s[this.expando];return u!==void 0&&!l.isEmptyObject(u)}};var re=new ir,rt=new ir,Cs=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,wi=/[A-Z]/g;function Yo(s){return s==="true"?!0:s==="false"?!1:s==="null"?null:s===+s+""?+s:Cs.test(s)?JSON.parse(s):s}function Rs(s,u,h){var d;if(h===void 0&&s.nodeType===1)if(d="data-"+u.replace(wi,"-$&").toLowerCase(),h=s.getAttribute(d),typeof h=="string"){try{h=Yo(h)}catch{}rt.set(s,u,h)}else h=void 0;return h}l.extend({hasData:function(s){return rt.hasData(s)||re.hasData(s)},data:function(s,u,h){return rt.access(s,u,h)},removeData:function(s,u){rt.remove(s,u)},_data:function(s,u,h){return re.access(s,u,h)},_removeData:function(s,u){re.remove(s,u)}}),l.fn.extend({data:function(s,u){var h,d,m,y=this[0],v=y&&y.attributes;if(s===void 0){if(this.length&&(m=rt.get(y),y.nodeType===1&&!re.get(y,"hasDataAttrs"))){for(h=v.length;h--;)v[h]&&(d=v[h].name,d.indexOf("data-")===0&&(d=At(d.slice(5)),Rs(y,d,m[d])));re.set(y,"hasDataAttrs",!0)}return m}return typeof s=="object"?this.each(function(){rt.set(this,s)}):It(this,function(R){var I;if(y&&R===void 0)return I=rt.get(y,s),I!==void 0||(I=Rs(y,s),I!==void 0)?I:void 0;this.each(function(){rt.set(this,s,R)})},null,u,arguments.length>1,null,!0)},removeData:function(s){return this.each(function(){rt.remove(this,s)})}}),l.extend({queue:function(s,u,h){var d;if(s)return u=(u||"fx")+"queue",d=re.get(s,u),h&&(!d||Array.isArray(h)?d=re.access(s,u,l.makeArray(h)):d.push(h)),d||[]},dequeue:function(s,u){u=u||"fx";var h=l.queue(s,u),d=h.length,m=h.shift(),y=l._queueHooks(s,u),v=function(){l.dequeue(s,u)};m==="inprogress"&&(m=h.shift(),d--),m&&(u==="fx"&&h.unshift("inprogress"),delete y.stop,m.call(s,v,y)),!d&&y&&y.empty.fire()},_queueHooks:function(s,u){var h=u+"queueHooks";return re.get(s,h)||re.access(s,h,{empty:l.Callbacks("once memory").add(function(){re.remove(s,[u+"queue",h])})})}}),l.fn.extend({queue:function(s,u){var h=2;return typeof s!="string"&&(u=s,s="fx",h--),arguments.length<h?l.queue(this[0],s):u===void 0?this:this.each(function(){var d=l.queue(this,s,u);l._queueHooks(this,s),s==="fx"&&d[0]!=="inprogress"&&l.dequeue(this,s)})},dequeue:function(s){return this.each(function(){l.dequeue(this,s)})},clearQueue:function(s){return this.queue(s||"fx",[])},promise:function(s,u){var h,d=1,m=l.Deferred(),y=this,v=this.length,R=function(){--d||m.resolveWith(y,[y])};for(typeof s!="string"&&(u=s,s=void 0),s=s||"fx";v--;)h=re.get(y[v],s+"queueHooks"),h&&h.empty&&(d++,h.empty.add(R));return R(),m.promise(u)}});var Ii=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Sn=new RegExp("^(?:([+-])=|)("+Ii+")([a-z%]*)$","i"),gt=["Top","Right","Bottom","Left"],Dt=Y.documentElement,Ft=function(s){return l.contains(s.ownerDocument,s)},an={composed:!0};Dt.getRootNode&&(Ft=function(s){return l.contains(s.ownerDocument,s)||s.getRootNode(an)===s.ownerDocument});var sr=function(s,u){return s=u||s,s.style.display==="none"||s.style.display===""&&Ft(s)&&l.css(s,"display")==="none"};function or(s,u,h,d){var m,y,v=20,R=d?function(){return d.cur()}:function(){return l.css(s,u,"")},I=R(),N=h&&h[3]||(l.cssNumber[u]?"":"px"),B=s.nodeType&&(l.cssNumber[u]||N!=="px"&&+I)&&Sn.exec(l.css(s,u));if(B&&B[3]!==N){for(I=I/2,N=N||B[3],B=+I||1;v--;)l.style(s,u,B+N),(1-y)*(1-(y=R()/I||.5))<=0&&(v=0),B=B/y;B=B*2,l.style(s,u,B+N),h=h||[]}return h&&(B=+B||+I||0,m=h[1]?B+(h[1]+1)*h[2]:+h[2],d&&(d.unit=N,d.start=B,d.end=m)),m}var Ai={};function ar(s){var u,h=s.ownerDocument,d=s.nodeName,m=Ai[d];return m||(u=h.body.appendChild(h.createElement(d)),m=l.css(u,"display"),u.parentNode.removeChild(u),m==="none"&&(m="block"),Ai[d]=m,m)}function un(s,u){for(var h,d,m=[],y=0,v=s.length;y<v;y++)d=s[y],d.style&&(h=d.style.display,u?(h==="none"&&(m[y]=re.get(d,"display")||null,m[y]||(d.style.display="")),d.style.display===""&&sr(d)&&(m[y]=ar(d))):h!=="none"&&(m[y]="none",re.set(d,"display",h)));for(y=0;y<v;y++)m[y]!=null&&(s[y].style.display=m[y]);return s}l.fn.extend({show:function(){return un(this,!0)},hide:function(){return un(this)},toggle:function(s){return typeof s=="boolean"?s?this.show():this.hide():this.each(function(){sr(this)?l(this).show():l(this).hide()})}});var Be=/^(?:checkbox|radio)$/i,bi=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Cn=/^$|^module$|\/(?:java|ecma)script/i;(function(){var s=Y.createDocumentFragment(),u=s.appendChild(Y.createElement("div")),h=Y.createElement("input");h.setAttribute("type","radio"),h.setAttribute("checked","checked"),h.setAttribute("name","t"),u.appendChild(h),W.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,u.innerHTML="<textarea>x</textarea>",W.noCloneChecked=!!u.cloneNode(!0).lastChild.defaultValue,u.innerHTML="<option></option>",W.option=!!u.lastChild})();var Ye={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ye.tbody=Ye.tfoot=Ye.colgroup=Ye.caption=Ye.thead,Ye.th=Ye.td,W.option||(Ye.optgroup=Ye.option=[1,"<select multiple='multiple'>","</select>"]);function ut(s,u){var h;return typeof s.getElementsByTagName<"u"?h=s.getElementsByTagName(u||"*"):typeof s.querySelectorAll<"u"?h=s.querySelectorAll(u||"*"):h=[],u===void 0||u&&b(s,u)?l.merge([s],h):h}function Si(s,u){for(var h=0,d=s.length;h<d;h++)re.set(s[h],"globalEval",!u||re.get(u[h],"globalEval"))}var Rn=/<|&#?\w+;/;function Ps(s,u,h,d,m){for(var y,v,R,I,N,B,q=u.createDocumentFragment(),F=[],Q=0,ie=s.length;Q<ie;Q++)if(y=s[Q],y||y===0)if(Ue(y)==="object")l.merge(F,y.nodeType?[y]:y);else if(!Rn.test(y))F.push(u.createTextNode(y));else{for(v=v||q.appendChild(u.createElement("div")),R=(bi.exec(y)||["",""])[1].toLowerCase(),I=Ye[R]||Ye._default,v.innerHTML=I[1]+l.htmlPrefilter(y)+I[2],B=I[0];B--;)v=v.lastChild;l.merge(F,v.childNodes),v=q.firstChild,v.textContent=""}for(q.textContent="",Q=0;y=F[Q++];){if(d&&l.inArray(y,d)>-1){m&&m.push(y);continue}if(N=Ft(y),v=ut(q.appendChild(y),"script"),N&&Si(v),h)for(B=0;y=v[B++];)Cn.test(y.type||"")&&h.push(y)}return q}var ks=/^([^.]*)(?:\.(.+)|)/;function Nt(){return!0}function cn(){return!1}function Vr(s,u,h,d,m,y){var v,R;if(typeof u=="object"){typeof h!="string"&&(d=d||h,h=void 0);for(R in u)Vr(s,R,h,d,u[R],y);return s}if(d==null&&m==null?(m=h,d=h=void 0):m==null&&(typeof h=="string"?(m=d,d=void 0):(m=d,d=h,h=void 0)),m===!1)m=cn;else if(!m)return s;return y===1&&(v=m,m=function(I){return l().off(I),v.apply(this,arguments)},m.guid=v.guid||(v.guid=l.guid++)),s.each(function(){l.event.add(this,u,m,d,h)})}l.event={global:{},add:function(s,u,h,d,m){var y,v,R,I,N,B,q,F,Q,ie,_e,me=re.get(s);if(bn(s))for(h.handler&&(y=h,h=y.handler,m=y.selector),m&&l.find.matchesSelector(Dt,m),h.guid||(h.guid=l.guid++),(I=me.events)||(I=me.events=Object.create(null)),(v=me.handle)||(v=me.handle=function(Ve){return typeof l<"u"&&l.event.triggered!==Ve.type?l.event.dispatch.apply(s,arguments):void 0}),u=(u||"").match(wt)||[""],N=u.length;N--;)R=ks.exec(u[N])||[],Q=_e=R[1],ie=(R[2]||"").split(".").sort(),Q&&(q=l.event.special[Q]||{},Q=(m?q.delegateType:q.bindType)||Q,q=l.event.special[Q]||{},B=l.extend({type:Q,origType:_e,data:d,handler:h,guid:h.guid,selector:m,needsContext:m&&l.expr.match.needsContext.test(m),namespace:ie.join(".")},y),(F=I[Q])||(F=I[Q]=[],F.delegateCount=0,(!q.setup||q.setup.call(s,d,ie,v)===!1)&&s.addEventListener&&s.addEventListener(Q,v)),q.add&&(q.add.call(s,B),B.handler.guid||(B.handler.guid=h.guid)),m?F.splice(F.delegateCount++,0,B):F.push(B),l.event.global[Q]=!0)},remove:function(s,u,h,d,m){var y,v,R,I,N,B,q,F,Q,ie,_e,me=re.hasData(s)&&re.get(s);if(!(!me||!(I=me.events))){for(u=(u||"").match(wt)||[""],N=u.length;N--;){if(R=ks.exec(u[N])||[],Q=_e=R[1],ie=(R[2]||"").split(".").sort(),!Q){for(Q in I)l.event.remove(s,Q+u[N],h,d,!0);continue}for(q=l.event.special[Q]||{},Q=(d?q.delegateType:q.bindType)||Q,F=I[Q]||[],R=R[2]&&new RegExp("(^|\\.)"+ie.join("\\.(?:.*\\.|)")+"(\\.|$)"),v=y=F.length;y--;)B=F[y],(m||_e===B.origType)&&(!h||h.guid===B.guid)&&(!R||R.test(B.namespace))&&(!d||d===B.selector||d==="**"&&B.selector)&&(F.splice(y,1),B.selector&&F.delegateCount--,q.remove&&q.remove.call(s,B));v&&!F.length&&((!q.teardown||q.teardown.call(s,ie,me.handle)===!1)&&l.removeEvent(s,Q,me.handle),delete I[Q])}l.isEmptyObject(I)&&re.remove(s,"handle events")}},dispatch:function(s){var u,h,d,m,y,v,R=new Array(arguments.length),I=l.event.fix(s),N=(re.get(this,"events")||Object.create(null))[I.type]||[],B=l.event.special[I.type]||{};for(R[0]=I,u=1;u<arguments.length;u++)R[u]=arguments[u];if(I.delegateTarget=this,!(B.preDispatch&&B.preDispatch.call(this,I)===!1)){for(v=l.event.handlers.call(this,I,N),u=0;(m=v[u++])&&!I.isPropagationStopped();)for(I.currentTarget=m.elem,h=0;(y=m.handlers[h++])&&!I.isImmediatePropagationStopped();)(!I.rnamespace||y.namespace===!1||I.rnamespace.test(y.namespace))&&(I.handleObj=y,I.data=y.data,d=((l.event.special[y.origType]||{}).handle||y.handler).apply(m.elem,R),d!==void 0&&(I.result=d)===!1&&(I.preventDefault(),I.stopPropagation()));return B.postDispatch&&B.postDispatch.call(this,I),I.result}},handlers:function(s,u){var h,d,m,y,v,R=[],I=u.delegateCount,N=s.target;if(I&&N.nodeType&&!(s.type==="click"&&s.button>=1)){for(;N!==this;N=N.parentNode||this)if(N.nodeType===1&&!(s.type==="click"&&N.disabled===!0)){for(y=[],v={},h=0;h<I;h++)d=u[h],m=d.selector+" ",v[m]===void 0&&(v[m]=d.needsContext?l(m,this).index(N)>-1:l.find(m,this,null,[N]).length),v[m]&&y.push(d);y.length&&R.push({elem:N,handlers:y})}}return N=this,I<u.length&&R.push({elem:N,handlers:u.slice(I)}),R},addProp:function(s,u){Object.defineProperty(l.Event.prototype,s,{enumerable:!0,configurable:!0,get:X(u)?function(){if(this.originalEvent)return u(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[s]},set:function(h){Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:h})}})},fix:function(s){return s[l.expando]?s:new l.Event(s)},special:{load:{noBubble:!0},click:{setup:function(s){var u=this||s;return Be.test(u.type)&&u.click&&b(u,"input")&&Pn(u,"click",!0),!1},trigger:function(s){var u=this||s;return Be.test(u.type)&&u.click&&b(u,"input")&&Pn(u,"click"),!0},_default:function(s){var u=s.target;return Be.test(u.type)&&u.click&&b(u,"input")&&re.get(u,"click")||b(u,"a")}},beforeunload:{postDispatch:function(s){s.result!==void 0&&s.originalEvent&&(s.originalEvent.returnValue=s.result)}}}};function Pn(s,u,h){if(!h){re.get(s,u)===void 0&&l.event.add(s,u,Nt);return}re.set(s,u,!1),l.event.add(s,u,{namespace:!1,handler:function(d){var m,y=re.get(this,u);if(d.isTrigger&1&&this[u]){if(y)(l.event.special[u]||{}).delegateType&&d.stopPropagation();else if(y=a.call(arguments),re.set(this,u,y),this[u](),m=re.get(this,u),re.set(this,u,!1),y!==m)return d.stopImmediatePropagation(),d.preventDefault(),m}else y&&(re.set(this,u,l.event.trigger(y[0],y.slice(1),this)),d.stopPropagation(),d.isImmediatePropagationStopped=Nt)}})}l.removeEvent=function(s,u,h){s.removeEventListener&&s.removeEventListener(u,h)},l.Event=function(s,u){if(!(this instanceof l.Event))return new l.Event(s,u);s&&s.type?(this.originalEvent=s,this.type=s.type,this.isDefaultPrevented=s.defaultPrevented||s.defaultPrevented===void 0&&s.returnValue===!1?Nt:cn,this.target=s.target&&s.target.nodeType===3?s.target.parentNode:s.target,this.currentTarget=s.currentTarget,this.relatedTarget=s.relatedTarget):this.type=s,u&&l.extend(this,u),this.timeStamp=s&&s.timeStamp||Date.now(),this[l.expando]=!0},l.Event.prototype={constructor:l.Event,isDefaultPrevented:cn,isPropagationStopped:cn,isImmediatePropagationStopped:cn,isSimulated:!1,preventDefault:function(){var s=this.originalEvent;this.isDefaultPrevented=Nt,s&&!this.isSimulated&&s.preventDefault()},stopPropagation:function(){var s=this.originalEvent;this.isPropagationStopped=Nt,s&&!this.isSimulated&&s.stopPropagation()},stopImmediatePropagation:function(){var s=this.originalEvent;this.isImmediatePropagationStopped=Nt,s&&!this.isSimulated&&s.stopImmediatePropagation(),this.stopPropagation()}},l.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},l.event.addProp),l.each({focus:"focusin",blur:"focusout"},function(s,u){function h(d){if(Y.documentMode){var m=re.get(this,"handle"),y=l.event.fix(d);y.type=d.type==="focusin"?"focus":"blur",y.isSimulated=!0,m(d),y.target===y.currentTarget&&m(y)}else l.event.simulate(u,d.target,l.event.fix(d))}l.event.special[s]={setup:function(){var d;if(Pn(this,s,!0),Y.documentMode)d=re.get(this,u),d||this.addEventListener(u,h),re.set(this,u,(d||0)+1);else return!1},trigger:function(){return Pn(this,s),!0},teardown:function(){var d;if(Y.documentMode)d=re.get(this,u)-1,d?re.set(this,u,d):(this.removeEventListener(u,h),re.remove(this,u));else return!1},_default:function(d){return re.get(d.target,s)},delegateType:u},l.event.special[u]={setup:function(){var d=this.ownerDocument||this.document||this,m=Y.documentMode?this:d,y=re.get(m,u);y||(Y.documentMode?this.addEventListener(u,h):d.addEventListener(s,h,!0)),re.set(m,u,(y||0)+1)},teardown:function(){var d=this.ownerDocument||this.document||this,m=Y.documentMode?this:d,y=re.get(m,u)-1;y?re.set(m,u,y):(Y.documentMode?this.removeEventListener(u,h):d.removeEventListener(s,h,!0),re.remove(m,u))}}}),l.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(s,u){l.event.special[s]={delegateType:u,bindType:u,handle:function(h){var d,m=this,y=h.relatedTarget,v=h.handleObj;return(!y||y!==m&&!l.contains(m,y))&&(h.type=v.origType,d=v.handler.apply(this,arguments),h.type=u),d}}}),l.fn.extend({on:function(s,u,h,d){return Vr(this,s,u,h,d)},one:function(s,u,h,d){return Vr(this,s,u,h,d,1)},off:function(s,u,h){var d,m;if(s&&s.preventDefault&&s.handleObj)return d=s.handleObj,l(s.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if(typeof s=="object"){for(m in s)this.off(m,u,s[m]);return this}return(u===!1||typeof u=="function")&&(h=u,u=void 0),h===!1&&(h=cn),this.each(function(){l.event.remove(this,s,h,u)})}});var ur=/<script|<style|<link/i,Zo=/checked\s*(?:[^=]|=\s*.checked.)/i,Ut=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ci(s,u){return b(s,"table")&&b(u.nodeType!==11?u:u.firstChild,"tr")&&l(s).children("tbody")[0]||s}function Ds(s){return s.type=(s.getAttribute("type")!==null)+"/"+s.type,s}function Ri(s){return(s.type||"").slice(0,5)==="true/"?s.type=s.type.slice(5):s.removeAttribute("type"),s}function Or(s,u){var h,d,m,y,v,R,I;if(u.nodeType===1){if(re.hasData(s)&&(y=re.get(s),I=y.events,I)){re.remove(u,"handle events");for(m in I)for(h=0,d=I[m].length;h<d;h++)l.event.add(u,m,I[m][h])}rt.hasData(s)&&(v=rt.access(s),R=l.extend({},v),rt.set(u,R))}}function Ns(s,u){var h=u.nodeName.toLowerCase();h==="input"&&Be.test(s.type)?u.checked=s.checked:(h==="input"||h==="textarea")&&(u.defaultValue=s.defaultValue)}function kn(s,u,h,d){u=c(u);var m,y,v,R,I,N,B=0,q=s.length,F=q-1,Q=u[0],ie=X(Q);if(ie||q>1&&typeof Q=="string"&&!W.checkClone&&Zo.test(Q))return s.each(function(_e){var me=s.eq(_e);ie&&(u[0]=Q.call(this,_e,me.html())),kn(me,u,h,d)});if(q&&(m=Ps(u,s[0].ownerDocument,!1,s,d),y=m.firstChild,m.childNodes.length===1&&(m=y),y||d)){for(v=l.map(ut(m,"script"),Ds),R=v.length;B<q;B++)I=m,B!==F&&(I=l.clone(I,!0,!0),R&&l.merge(v,ut(I,"script"))),h.call(s[B],I,B);if(R)for(N=v[v.length-1].ownerDocument,l.map(v,Ri),B=0;B<R;B++)I=v[B],Cn.test(I.type||"")&&!re.access(I,"globalEval")&&l.contains(N,I)&&(I.src&&(I.type||"").toLowerCase()!=="module"?l._evalUrl&&!I.noModule&&l._evalUrl(I.src,{nonce:I.nonce||I.getAttribute("nonce")},N):Se(I.textContent.replace(Ut,""),I,N))}return s}function Pi(s,u,h){for(var d,m=u?l.filter(u,s):s,y=0;(d=m[y])!=null;y++)!h&&d.nodeType===1&&l.cleanData(ut(d)),d.parentNode&&(h&&Ft(d)&&Si(ut(d,"script")),d.parentNode.removeChild(d));return s}l.extend({htmlPrefilter:function(s){return s},clone:function(s,u,h){var d,m,y,v,R=s.cloneNode(!0),I=Ft(s);if(!W.noCloneChecked&&(s.nodeType===1||s.nodeType===11)&&!l.isXMLDoc(s))for(v=ut(R),y=ut(s),d=0,m=y.length;d<m;d++)Ns(y[d],v[d]);if(u)if(h)for(y=y||ut(s),v=v||ut(R),d=0,m=y.length;d<m;d++)Or(y[d],v[d]);else Or(s,R);return v=ut(R,"script"),v.length>0&&Si(v,!I&&ut(s,"script")),R},cleanData:function(s){for(var u,h,d,m=l.event.special,y=0;(h=s[y])!==void 0;y++)if(bn(h)){if(u=h[re.expando]){if(u.events)for(d in u.events)m[d]?l.event.remove(h,d):l.removeEvent(h,d,u.handle);h[re.expando]=void 0}h[rt.expando]&&(h[rt.expando]=void 0)}}}),l.fn.extend({detach:function(s){return Pi(this,s,!0)},remove:function(s){return Pi(this,s)},text:function(s){return It(this,function(u){return u===void 0?l.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=u)})},null,s,arguments.length)},append:function(){return kn(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var u=Ci(this,s);u.appendChild(s)}})},prepend:function(){return kn(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var u=Ci(this,s);u.insertBefore(s,u.firstChild)}})},before:function(){return kn(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this)})},after:function(){return kn(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this.nextSibling)})},empty:function(){for(var s,u=0;(s=this[u])!=null;u++)s.nodeType===1&&(l.cleanData(ut(s,!1)),s.textContent="");return this},clone:function(s,u){return s=s??!1,u=u??s,this.map(function(){return l.clone(this,s,u)})},html:function(s){return It(this,function(u){var h=this[0]||{},d=0,m=this.length;if(u===void 0&&h.nodeType===1)return h.innerHTML;if(typeof u=="string"&&!ur.test(u)&&!Ye[(bi.exec(u)||["",""])[1].toLowerCase()]){u=l.htmlPrefilter(u);try{for(;d<m;d++)h=this[d]||{},h.nodeType===1&&(l.cleanData(ut(h,!1)),h.innerHTML=u);h=0}catch{}}h&&this.empty().append(u)},null,s,arguments.length)},replaceWith:function(){var s=[];return kn(this,arguments,function(u){var h=this.parentNode;l.inArray(this,s)<0&&(l.cleanData(ut(this)),h&&h.replaceChild(u,this))},s)}}),l.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(s,u){l.fn[s]=function(h){for(var d,m=[],y=l(h),v=y.length-1,R=0;R<=v;R++)d=R===v?this:this.clone(!0),l(y[R])[u](d),g.apply(m,d.get());return this.pushStack(m)}});var ki=new RegExp("^("+Ii+")(?!px)[a-z%]+$","i"),Dn=/^--/,cr=function(s){var u=s.ownerDocument.defaultView;return(!u||!u.opener)&&(u=e),u.getComputedStyle(s)},Mr=function(s,u,h){var d,m,y={};for(m in u)y[m]=s.style[m],s.style[m]=u[m];d=h.call(s);for(m in u)s.style[m]=y[m];return d},lr=new RegExp(gt.join("|"),"i");(function(){function s(){if(N){I.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",N.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Dt.appendChild(I).appendChild(N);var B=e.getComputedStyle(N);h=B.top!=="1%",R=u(B.marginLeft)===12,N.style.right="60%",y=u(B.right)===36,d=u(B.width)===36,N.style.position="absolute",m=u(N.offsetWidth/3)===12,Dt.removeChild(I),N=null}}function u(B){return Math.round(parseFloat(B))}var h,d,m,y,v,R,I=Y.createElement("div"),N=Y.createElement("div");N.style&&(N.style.backgroundClip="content-box",N.cloneNode(!0).style.backgroundClip="",W.clearCloneStyle=N.style.backgroundClip==="content-box",l.extend(W,{boxSizingReliable:function(){return s(),d},pixelBoxStyles:function(){return s(),y},pixelPosition:function(){return s(),h},reliableMarginLeft:function(){return s(),R},scrollboxSize:function(){return s(),m},reliableTrDimensions:function(){var B,q,F,Q;return v==null&&(B=Y.createElement("table"),q=Y.createElement("tr"),F=Y.createElement("div"),B.style.cssText="position:absolute;left:-11111px;border-collapse:separate",q.style.cssText="box-sizing:content-box;border:1px solid",q.style.height="1px",F.style.height="9px",F.style.display="block",Dt.appendChild(B).appendChild(q).appendChild(F),Q=e.getComputedStyle(q),v=parseInt(Q.height,10)+parseInt(Q.borderTopWidth,10)+parseInt(Q.borderBottomWidth,10)===q.offsetHeight,Dt.removeChild(B)),v}}))})();function vt(s,u,h){var d,m,y,v,R=Dn.test(u),I=s.style;return h=h||cr(s),h&&(v=h.getPropertyValue(u)||h[u],R&&v&&(v=v.replace(We,"$1")||void 0),v===""&&!Ft(s)&&(v=l.style(s,u)),!W.pixelBoxStyles()&&ki.test(v)&&lr.test(u)&&(d=I.width,m=I.minWidth,y=I.maxWidth,I.minWidth=I.maxWidth=I.width=v,v=h.width,I.width=d,I.minWidth=m,I.maxWidth=y)),v!==void 0?v+"":v}function Lr(s,u){return{get:function(){if(s()){delete this.get;return}return(this.get=u).apply(this,arguments)}}}var xs=["Webkit","Moz","ms"],Di=Y.createElement("div").style,Ni={};function Vs(s){for(var u=s[0].toUpperCase()+s.slice(1),h=xs.length;h--;)if(s=xs[h]+u,s in Di)return s}function hr(s){var u=l.cssProps[s]||Ni[s];return u||(s in Di?s:Ni[s]=Vs(s)||s)}var xi=/^(none|table(?!-c[ea]).+)/,Os={position:"absolute",visibility:"hidden",display:"block"},Vi={letterSpacing:"0",fontWeight:"400"};function Oi(s,u,h){var d=Sn.exec(u);return d?Math.max(0,d[2]-(h||0))+(d[3]||"px"):u}function Mi(s,u,h,d,m,y){var v=u==="width"?1:0,R=0,I=0,N=0;if(h===(d?"border":"content"))return 0;for(;v<4;v+=2)h==="margin"&&(N+=l.css(s,h+gt[v],!0,m)),d?(h==="content"&&(I-=l.css(s,"padding"+gt[v],!0,m)),h!=="margin"&&(I-=l.css(s,"border"+gt[v]+"Width",!0,m))):(I+=l.css(s,"padding"+gt[v],!0,m),h!=="padding"?I+=l.css(s,"border"+gt[v]+"Width",!0,m):R+=l.css(s,"border"+gt[v]+"Width",!0,m));return!d&&y>=0&&(I+=Math.max(0,Math.ceil(s["offset"+u[0].toUpperCase()+u.slice(1)]-y-I-R-.5))||0),I+N}function xt(s,u,h){var d=cr(s),m=!W.boxSizingReliable()||h,y=m&&l.css(s,"boxSizing",!1,d)==="border-box",v=y,R=vt(s,u,d),I="offset"+u[0].toUpperCase()+u.slice(1);if(ki.test(R)){if(!h)return R;R="auto"}return(!W.boxSizingReliable()&&y||!W.reliableTrDimensions()&&b(s,"tr")||R==="auto"||!parseFloat(R)&&l.css(s,"display",!1,d)==="inline")&&s.getClientRects().length&&(y=l.css(s,"boxSizing",!1,d)==="border-box",v=I in s,v&&(R=s[I])),R=parseFloat(R)||0,R+Mi(s,u,h||(y?"border":"content"),v,d,R)+"px"}l.extend({cssHooks:{opacity:{get:function(s,u){if(u){var h=vt(s,"opacity");return h===""?"1":h}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(s,u,h,d){if(!(!s||s.nodeType===3||s.nodeType===8||!s.style)){var m,y,v,R=At(u),I=Dn.test(u),N=s.style;if(I||(u=hr(R)),v=l.cssHooks[u]||l.cssHooks[R],h!==void 0){if(y=typeof h,y==="string"&&(m=Sn.exec(h))&&m[1]&&(h=or(s,u,m),y="number"),h==null||h!==h)return;y==="number"&&!I&&(h+=m&&m[3]||(l.cssNumber[R]?"":"px")),!W.clearCloneStyle&&h===""&&u.indexOf("background")===0&&(N[u]="inherit"),(!v||!("set"in v)||(h=v.set(s,h,d))!==void 0)&&(I?N.setProperty(u,h):N[u]=h)}else return v&&"get"in v&&(m=v.get(s,!1,d))!==void 0?m:N[u]}},css:function(s,u,h,d){var m,y,v,R=At(u),I=Dn.test(u);return I||(u=hr(R)),v=l.cssHooks[u]||l.cssHooks[R],v&&"get"in v&&(m=v.get(s,!0,h)),m===void 0&&(m=vt(s,u,d)),m==="normal"&&u in Vi&&(m=Vi[u]),h===""||h?(y=parseFloat(m),h===!0||isFinite(y)?y||0:m):m}}),l.each(["height","width"],function(s,u){l.cssHooks[u]={get:function(h,d,m){if(d)return xi.test(l.css(h,"display"))&&(!h.getClientRects().length||!h.getBoundingClientRect().width)?Mr(h,Os,function(){return xt(h,u,m)}):xt(h,u,m)},set:function(h,d,m){var y,v=cr(h),R=!W.scrollboxSize()&&v.position==="absolute",I=R||m,N=I&&l.css(h,"boxSizing",!1,v)==="border-box",B=m?Mi(h,u,m,N,v):0;return N&&R&&(B-=Math.ceil(h["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(v[u])-Mi(h,u,"border",!1,v)-.5)),B&&(y=Sn.exec(d))&&(y[3]||"px")!=="px"&&(h.style[u]=d,d=l.css(h,u)),Oi(h,d,B)}}}),l.cssHooks.marginLeft=Lr(W.reliableMarginLeft,function(s,u){if(u)return(parseFloat(vt(s,"marginLeft"))||s.getBoundingClientRect().left-Mr(s,{marginLeft:0},function(){return s.getBoundingClientRect().left}))+"px"}),l.each({margin:"",padding:"",border:"Width"},function(s,u){l.cssHooks[s+u]={expand:function(h){for(var d=0,m={},y=typeof h=="string"?h.split(" "):[h];d<4;d++)m[s+gt[d]+u]=y[d]||y[d-2]||y[0];return m}},s!=="margin"&&(l.cssHooks[s+u].set=Oi)}),l.fn.extend({css:function(s,u){return It(this,function(h,d,m){var y,v,R={},I=0;if(Array.isArray(d)){for(y=cr(h),v=d.length;I<v;I++)R[d[I]]=l.css(h,d[I],!1,y);return R}return m!==void 0?l.style(h,d,m):l.css(h,d)},s,u,arguments.length>1)}});function De(s,u,h,d,m){return new De.prototype.init(s,u,h,d,m)}l.Tween=De,De.prototype={constructor:De,init:function(s,u,h,d,m,y){this.elem=s,this.prop=h,this.easing=m||l.easing._default,this.options=u,this.start=this.now=this.cur(),this.end=d,this.unit=y||(l.cssNumber[h]?"":"px")},cur:function(){var s=De.propHooks[this.prop];return s&&s.get?s.get(this):De.propHooks._default.get(this)},run:function(s){var u,h=De.propHooks[this.prop];return this.options.duration?this.pos=u=l.easing[this.easing](s,this.options.duration*s,0,1,this.options.duration):this.pos=u=s,this.now=(this.end-this.start)*u+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),h&&h.set?h.set(this):De.propHooks._default.set(this),this}},De.prototype.init.prototype=De.prototype,De.propHooks={_default:{get:function(s){var u;return s.elem.nodeType!==1||s.elem[s.prop]!=null&&s.elem.style[s.prop]==null?s.elem[s.prop]:(u=l.css(s.elem,s.prop,""),!u||u==="auto"?0:u)},set:function(s){l.fx.step[s.prop]?l.fx.step[s.prop](s):s.elem.nodeType===1&&(l.cssHooks[s.prop]||s.elem.style[hr(s.prop)]!=null)?l.style(s.elem,s.prop,s.now+s.unit):s.elem[s.prop]=s.now}}},De.propHooks.scrollTop=De.propHooks.scrollLeft={set:function(s){s.elem.nodeType&&s.elem.parentNode&&(s.elem[s.prop]=s.now)}},l.easing={linear:function(s){return s},swing:function(s){return .5-Math.cos(s*Math.PI)/2},_default:"swing"},l.fx=De.prototype.init,l.fx.step={};var bt,jt,Li=/^(?:toggle|show|hide)$/,Pe=/queueHooks$/;function Nn(){jt&&(Y.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(Nn):e.setTimeout(Nn,l.fx.interval),l.fx.tick())}function xn(){return e.setTimeout(function(){bt=void 0}),bt=Date.now()}function Bt(s,u){var h,d=0,m={height:s};for(u=u?1:0;d<4;d+=2-u)h=gt[d],m["margin"+h]=m["padding"+h]=s;return u&&(m.opacity=m.width=s),m}function Ms(s,u,h){for(var d,m=(Tt.tweeners[u]||[]).concat(Tt.tweeners["*"]),y=0,v=m.length;y<v;y++)if(d=m[y].call(h,u,s))return d}function Ls(s,u,h){var d,m,y,v,R,I,N,B,q="width"in u||"height"in u,F=this,Q={},ie=s.style,_e=s.nodeType&&sr(s),me=re.get(s,"fxshow");h.queue||(v=l._queueHooks(s,"fx"),v.unqueued==null&&(v.unqueued=0,R=v.empty.fire,v.empty.fire=function(){v.unqueued||R()}),v.unqueued++,F.always(function(){F.always(function(){v.unqueued--,l.queue(s,"fx").length||v.empty.fire()})}));for(d in u)if(m=u[d],Li.test(m)){if(delete u[d],y=y||m==="toggle",m===(_e?"hide":"show"))if(m==="show"&&me&&me[d]!==void 0)_e=!0;else continue;Q[d]=me&&me[d]||l.style(s,d)}if(I=!l.isEmptyObject(u),!(!I&&l.isEmptyObject(Q))){q&&s.nodeType===1&&(h.overflow=[ie.overflow,ie.overflowX,ie.overflowY],N=me&&me.display,N==null&&(N=re.get(s,"display")),B=l.css(s,"display"),B==="none"&&(N?B=N:(un([s],!0),N=s.style.display||N,B=l.css(s,"display"),un([s]))),(B==="inline"||B==="inline-block"&&N!=null)&&l.css(s,"float")==="none"&&(I||(F.done(function(){ie.display=N}),N==null&&(B=ie.display,N=B==="none"?"":B)),ie.display="inline-block")),h.overflow&&(ie.overflow="hidden",F.always(function(){ie.overflow=h.overflow[0],ie.overflowX=h.overflow[1],ie.overflowY=h.overflow[2]})),I=!1;for(d in Q)I||(me?"hidden"in me&&(_e=me.hidden):me=re.access(s,"fxshow",{display:N}),y&&(me.hidden=!_e),_e&&un([s],!0),F.done(function(){_e||un([s]),re.remove(s,"fxshow");for(d in Q)l.style(s,d,Q[d])})),I=Ms(_e?me[d]:0,d,F),d in me||(me[d]=I.start,_e&&(I.end=I.start,I.start=0))}}function ea(s,u){var h,d,m,y,v;for(h in s)if(d=At(h),m=u[d],y=s[h],Array.isArray(y)&&(m=y[1],y=s[h]=y[0]),h!==d&&(s[d]=y,delete s[h]),v=l.cssHooks[d],v&&"expand"in v){y=v.expand(y),delete s[d];for(h in y)h in s||(s[h]=y[h],u[h]=m)}else u[d]=m}function Tt(s,u,h){var d,m,y=0,v=Tt.prefilters.length,R=l.Deferred().always(function(){delete I.elem}),I=function(){if(m)return!1;for(var q=bt||xn(),F=Math.max(0,N.startTime+N.duration-q),Q=F/N.duration||0,ie=1-Q,_e=0,me=N.tweens.length;_e<me;_e++)N.tweens[_e].run(ie);return R.notifyWith(s,[N,ie,F]),ie<1&&me?F:(me||R.notifyWith(s,[N,1,0]),R.resolveWith(s,[N]),!1)},N=R.promise({elem:s,props:l.extend({},u),opts:l.extend(!0,{specialEasing:{},easing:l.easing._default},h),originalProperties:u,originalOptions:h,startTime:bt||xn(),duration:h.duration,tweens:[],createTween:function(q,F){var Q=l.Tween(s,N.opts,q,F,N.opts.specialEasing[q]||N.opts.easing);return N.tweens.push(Q),Q},stop:function(q){var F=0,Q=q?N.tweens.length:0;if(m)return this;for(m=!0;F<Q;F++)N.tweens[F].run(1);return q?(R.notifyWith(s,[N,1,0]),R.resolveWith(s,[N,q])):R.rejectWith(s,[N,q]),this}}),B=N.props;for(ea(B,N.opts.specialEasing);y<v;y++)if(d=Tt.prefilters[y].call(N,s,B,N.opts),d)return X(d.stop)&&(l._queueHooks(N.elem,N.opts.queue).stop=d.stop.bind(d)),d;return l.map(B,Ms,N),X(N.opts.start)&&N.opts.start.call(s,N),N.progress(N.opts.progress).done(N.opts.done,N.opts.complete).fail(N.opts.fail).always(N.opts.always),l.fx.timer(l.extend(I,{elem:s,anim:N,queue:N.opts.queue})),N}l.Animation=l.extend(Tt,{tweeners:{"*":[function(s,u){var h=this.createTween(s,u);return or(h.elem,s,Sn.exec(u),h),h}]},tweener:function(s,u){X(s)?(u=s,s=["*"]):s=s.match(wt);for(var h,d=0,m=s.length;d<m;d++)h=s[d],Tt.tweeners[h]=Tt.tweeners[h]||[],Tt.tweeners[h].unshift(u)},prefilters:[Ls],prefilter:function(s,u){u?Tt.prefilters.unshift(s):Tt.prefilters.push(s)}}),l.speed=function(s,u,h){var d=s&&typeof s=="object"?l.extend({},s):{complete:h||!h&&u||X(s)&&s,duration:s,easing:h&&u||u&&!X(u)&&u};return l.fx.off?d.duration=0:typeof d.duration!="number"&&(d.duration in l.fx.speeds?d.duration=l.fx.speeds[d.duration]:d.duration=l.fx.speeds._default),(d.queue==null||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){X(d.old)&&d.old.call(this),d.queue&&l.dequeue(this,d.queue)},d},l.fn.extend({fadeTo:function(s,u,h,d){return this.filter(sr).css("opacity",0).show().end().animate({opacity:u},s,h,d)},animate:function(s,u,h,d){var m=l.isEmptyObject(s),y=l.speed(u,h,d),v=function(){var R=Tt(this,l.extend({},s),y);(m||re.get(this,"finish"))&&R.stop(!0)};return v.finish=v,m||y.queue===!1?this.each(v):this.queue(y.queue,v)},stop:function(s,u,h){var d=function(m){var y=m.stop;delete m.stop,y(h)};return typeof s!="string"&&(h=u,u=s,s=void 0),u&&this.queue(s||"fx",[]),this.each(function(){var m=!0,y=s!=null&&s+"queueHooks",v=l.timers,R=re.get(this);if(y)R[y]&&R[y].stop&&d(R[y]);else for(y in R)R[y]&&R[y].stop&&Pe.test(y)&&d(R[y]);for(y=v.length;y--;)v[y].elem===this&&(s==null||v[y].queue===s)&&(v[y].anim.stop(h),m=!1,v.splice(y,1));(m||!h)&&l.dequeue(this,s)})},finish:function(s){return s!==!1&&(s=s||"fx"),this.each(function(){var u,h=re.get(this),d=h[s+"queue"],m=h[s+"queueHooks"],y=l.timers,v=d?d.length:0;for(h.finish=!0,l.queue(this,s,[]),m&&m.stop&&m.stop.call(this,!0),u=y.length;u--;)y[u].elem===this&&y[u].queue===s&&(y[u].anim.stop(!0),y.splice(u,1));for(u=0;u<v;u++)d[u]&&d[u].finish&&d[u].finish.call(this);delete h.finish})}}),l.each(["toggle","show","hide"],function(s,u){var h=l.fn[u];l.fn[u]=function(d,m,y){return d==null||typeof d=="boolean"?h.apply(this,arguments):this.animate(Bt(u,!0),d,m,y)}}),l.each({slideDown:Bt("show"),slideUp:Bt("hide"),slideToggle:Bt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(s,u){l.fn[s]=function(h,d,m){return this.animate(u,h,d,m)}}),l.timers=[],l.fx.tick=function(){var s,u=0,h=l.timers;for(bt=Date.now();u<h.length;u++)s=h[u],!s()&&h[u]===s&&h.splice(u--,1);h.length||l.fx.stop(),bt=void 0},l.fx.timer=function(s){l.timers.push(s),l.fx.start()},l.fx.interval=13,l.fx.start=function(){jt||(jt=!0,Nn())},l.fx.stop=function(){jt=null},l.fx.speeds={slow:600,fast:200,_default:400},l.fn.delay=function(s,u){return s=l.fx&&l.fx.speeds[s]||s,u=u||"fx",this.queue(u,function(h,d){var m=e.setTimeout(h,s);d.stop=function(){e.clearTimeout(m)}})},(function(){var s=Y.createElement("input"),u=Y.createElement("select"),h=u.appendChild(Y.createElement("option"));s.type="checkbox",W.checkOn=s.value!=="",W.optSelected=h.selected,s=Y.createElement("input"),s.value="t",s.type="radio",W.radioValue=s.value==="t"})();var Fs,fr=l.expr.attrHandle;l.fn.extend({attr:function(s,u){return It(this,l.attr,s,u,arguments.length>1)},removeAttr:function(s){return this.each(function(){l.removeAttr(this,s)})}}),l.extend({attr:function(s,u,h){var d,m,y=s.nodeType;if(!(y===3||y===8||y===2)){if(typeof s.getAttribute>"u")return l.prop(s,u,h);if((y!==1||!l.isXMLDoc(s))&&(m=l.attrHooks[u.toLowerCase()]||(l.expr.match.bool.test(u)?Fs:void 0)),h!==void 0){if(h===null){l.removeAttr(s,u);return}return m&&"set"in m&&(d=m.set(s,h,u))!==void 0?d:(s.setAttribute(u,h+""),h)}return m&&"get"in m&&(d=m.get(s,u))!==null?d:(d=l.find.attr(s,u),d??void 0)}},attrHooks:{type:{set:function(s,u){if(!W.radioValue&&u==="radio"&&b(s,"input")){var h=s.value;return s.setAttribute("type",u),h&&(s.value=h),u}}}},removeAttr:function(s,u){var h,d=0,m=u&&u.match(wt);if(m&&s.nodeType===1)for(;h=m[d++];)s.removeAttribute(h)}}),Fs={set:function(s,u,h){return u===!1?l.removeAttr(s,h):s.setAttribute(h,h),h}},l.each(l.expr.match.bool.source.match(/\w+/g),function(s,u){var h=fr[u]||l.find.attr;fr[u]=function(d,m,y){var v,R,I=m.toLowerCase();return y||(R=fr[I],fr[I]=v,v=h(d,m,y)!=null?I:null,fr[I]=R),v}});var dr=/^(?:input|select|textarea|button)$/i,ln=/^(?:a|area)$/i;l.fn.extend({prop:function(s,u){return It(this,l.prop,s,u,arguments.length>1)},removeProp:function(s){return this.each(function(){delete this[l.propFix[s]||s]})}}),l.extend({prop:function(s,u,h){var d,m,y=s.nodeType;if(!(y===3||y===8||y===2))return(y!==1||!l.isXMLDoc(s))&&(u=l.propFix[u]||u,m=l.propHooks[u]),h!==void 0?m&&"set"in m&&(d=m.set(s,h,u))!==void 0?d:s[u]=h:m&&"get"in m&&(d=m.get(s,u))!==null?d:s[u]},propHooks:{tabIndex:{get:function(s){var u=l.find.attr(s,"tabindex");return u?parseInt(u,10):dr.test(s.nodeName)||ln.test(s.nodeName)&&s.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),W.optSelected||(l.propHooks.selected={get:function(s){var u=s.parentNode;return u&&u.parentNode&&u.parentNode.selectedIndex,null},set:function(s){var u=s.parentNode;u&&(u.selectedIndex,u.parentNode&&u.parentNode.selectedIndex)}}),l.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){l.propFix[this.toLowerCase()]=this});function qt(s){var u=s.match(wt)||[];return u.join(" ")}function Ht(s){return s.getAttribute&&s.getAttribute("class")||""}function Fr(s){return Array.isArray(s)?s:typeof s=="string"?s.match(wt)||[]:[]}l.fn.extend({addClass:function(s){var u,h,d,m,y,v;return X(s)?this.each(function(R){l(this).addClass(s.call(this,R,Ht(this)))}):(u=Fr(s),u.length?this.each(function(){if(d=Ht(this),h=this.nodeType===1&&" "+qt(d)+" ",h){for(y=0;y<u.length;y++)m=u[y],h.indexOf(" "+m+" ")<0&&(h+=m+" ");v=qt(h),d!==v&&this.setAttribute("class",v)}}):this)},removeClass:function(s){var u,h,d,m,y,v;return X(s)?this.each(function(R){l(this).removeClass(s.call(this,R,Ht(this)))}):arguments.length?(u=Fr(s),u.length?this.each(function(){if(d=Ht(this),h=this.nodeType===1&&" "+qt(d)+" ",h){for(y=0;y<u.length;y++)for(m=u[y];h.indexOf(" "+m+" ")>-1;)h=h.replace(" "+m+" "," ");v=qt(h),d!==v&&this.setAttribute("class",v)}}):this):this.attr("class","")},toggleClass:function(s,u){var h,d,m,y,v=typeof s,R=v==="string"||Array.isArray(s);return X(s)?this.each(function(I){l(this).toggleClass(s.call(this,I,Ht(this),u),u)}):typeof u=="boolean"&&R?u?this.addClass(s):this.removeClass(s):(h=Fr(s),this.each(function(){if(R)for(y=l(this),m=0;m<h.length;m++)d=h[m],y.hasClass(d)?y.removeClass(d):y.addClass(d);else(s===void 0||v==="boolean")&&(d=Ht(this),d&&re.set(this,"__className__",d),this.setAttribute&&this.setAttribute("class",d||s===!1?"":re.get(this,"__className__")||""))}))},hasClass:function(s){var u,h,d=0;for(u=" "+s+" ";h=this[d++];)if(h.nodeType===1&&(" "+qt(Ht(h))+" ").indexOf(u)>-1)return!0;return!1}});var Us=/\r/g;l.fn.extend({val:function(s){var u,h,d,m=this[0];return arguments.length?(d=X(s),this.each(function(y){var v;this.nodeType===1&&(d?v=s.call(this,y,l(this).val()):v=s,v==null?v="":typeof v=="number"?v+="":Array.isArray(v)&&(v=l.map(v,function(R){return R==null?"":R+""})),u=l.valHooks[this.type]||l.valHooks[this.nodeName.toLowerCase()],(!u||!("set"in u)||u.set(this,v,"value")===void 0)&&(this.value=v))})):m?(u=l.valHooks[m.type]||l.valHooks[m.nodeName.toLowerCase()],u&&"get"in u&&(h=u.get(m,"value"))!==void 0?h:(h=m.value,typeof h=="string"?h.replace(Us,""):h??"")):void 0}}),l.extend({valHooks:{option:{get:function(s){var u=l.find.attr(s,"value");return u??qt(l.text(s))}},select:{get:function(s){var u,h,d,m=s.options,y=s.selectedIndex,v=s.type==="select-one",R=v?null:[],I=v?y+1:m.length;for(y<0?d=I:d=v?y:0;d<I;d++)if(h=m[d],(h.selected||d===y)&&!h.disabled&&(!h.parentNode.disabled||!b(h.parentNode,"optgroup"))){if(u=l(h).val(),v)return u;R.push(u)}return R},set:function(s,u){for(var h,d,m=s.options,y=l.makeArray(u),v=m.length;v--;)d=m[v],(d.selected=l.inArray(l.valHooks.option.get(d),y)>-1)&&(h=!0);return h||(s.selectedIndex=-1),y}}}}),l.each(["radio","checkbox"],function(){l.valHooks[this]={set:function(s,u){if(Array.isArray(u))return s.checked=l.inArray(l(s).val(),u)>-1}},W.checkOn||(l.valHooks[this].get=function(s){return s.getAttribute("value")===null?"on":s.value})});var Vn=e.location,hn={guid:Date.now()},Fi=/\?/;l.parseXML=function(s){var u,h;if(!s||typeof s!="string")return null;try{u=new e.DOMParser().parseFromString(s,"text/xml")}catch{}return h=u&&u.getElementsByTagName("parsererror")[0],(!u||h)&&l.error("Invalid XML: "+(h?l.map(h.childNodes,function(d){return d.textContent}).join(`
`):s)),u};var js=/^(?:focusinfocus|focusoutblur)$/,Bs=function(s){s.stopPropagation()};l.extend(l.event,{trigger:function(s,u,h,d){var m,y,v,R,I,N,B,q,F=[h||Y],Q=k.call(s,"type")?s.type:s,ie=k.call(s,"namespace")?s.namespace.split("."):[];if(y=q=v=h=h||Y,!(h.nodeType===3||h.nodeType===8)&&!js.test(Q+l.event.triggered)&&(Q.indexOf(".")>-1&&(ie=Q.split("."),Q=ie.shift(),ie.sort()),I=Q.indexOf(":")<0&&"on"+Q,s=s[l.expando]?s:new l.Event(Q,typeof s=="object"&&s),s.isTrigger=d?2:3,s.namespace=ie.join("."),s.rnamespace=s.namespace?new RegExp("(^|\\.)"+ie.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,s.result=void 0,s.target||(s.target=h),u=u==null?[s]:l.makeArray(u,[s]),B=l.event.special[Q]||{},!(!d&&B.trigger&&B.trigger.apply(h,u)===!1))){if(!d&&!B.noBubble&&!Z(h)){for(R=B.delegateType||Q,js.test(R+Q)||(y=y.parentNode);y;y=y.parentNode)F.push(y),v=y;v===(h.ownerDocument||Y)&&F.push(v.defaultView||v.parentWindow||e)}for(m=0;(y=F[m++])&&!s.isPropagationStopped();)q=y,s.type=m>1?R:B.bindType||Q,N=(re.get(y,"events")||Object.create(null))[s.type]&&re.get(y,"handle"),N&&N.apply(y,u),N=I&&y[I],N&&N.apply&&bn(y)&&(s.result=N.apply(y,u),s.result===!1&&s.preventDefault());return s.type=Q,!d&&!s.isDefaultPrevented()&&(!B._default||B._default.apply(F.pop(),u)===!1)&&bn(h)&&I&&X(h[Q])&&!Z(h)&&(v=h[I],v&&(h[I]=null),l.event.triggered=Q,s.isPropagationStopped()&&q.addEventListener(Q,Bs),h[Q](),s.isPropagationStopped()&&q.removeEventListener(Q,Bs),l.event.triggered=void 0,v&&(h[I]=v)),s.result}},simulate:function(s,u,h){var d=l.extend(new l.Event,h,{type:s,isSimulated:!0});l.event.trigger(d,null,u)}}),l.fn.extend({trigger:function(s,u){return this.each(function(){l.event.trigger(s,u,this)})},triggerHandler:function(s,u){var h=this[0];if(h)return l.event.trigger(s,u,h,!0)}});var $t=/\[\]$/,qs=/\r?\n/g,Ui=/^(?:submit|button|image|reset|file)$/i,Ur=/^(?:input|select|textarea|keygen)/i;function jr(s,u,h,d){var m;if(Array.isArray(u))l.each(u,function(y,v){h||$t.test(s)?d(s,v):jr(s+"["+(typeof v=="object"&&v!=null?y:"")+"]",v,h,d)});else if(!h&&Ue(u)==="object")for(m in u)jr(s+"["+m+"]",u[m],h,d);else d(s,u)}l.param=function(s,u){var h,d=[],m=function(y,v){var R=X(v)?v():v;d[d.length]=encodeURIComponent(y)+"="+encodeURIComponent(R??"")};if(s==null)return"";if(Array.isArray(s)||s.jquery&&!l.isPlainObject(s))l.each(s,function(){m(this.name,this.value)});else for(h in s)jr(h,s[h],u,m);return d.join("&")},l.fn.extend({serialize:function(){return l.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var s=l.prop(this,"elements");return s?l.makeArray(s):this}).filter(function(){var s=this.type;return this.name&&!l(this).is(":disabled")&&Ur.test(this.nodeName)&&!Ui.test(s)&&(this.checked||!Be.test(s))}).map(function(s,u){var h=l(this).val();return h==null?null:Array.isArray(h)?l.map(h,function(d){return{name:u.name,value:d.replace(qs,`\r
`)}}):{name:u.name,value:h.replace(qs,`\r
`)}}).get()}});var pr=/%20/g,gr=/#.*$/,Hs=/([?&])_=[^&]*/,ji=/^(.*?):[ \t]*([^\r\n]*)$/mg,xe=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ta=/^(?:GET|HEAD)$/,na=/^\/\//,Bi={},Br={},qi="*/".concat("*"),On=Y.createElement("a");On.href=Vn.href;function Vt(s){return function(u,h){typeof u!="string"&&(h=u,u="*");var d,m=0,y=u.toLowerCase().match(wt)||[];if(X(h))for(;d=y[m++];)d[0]==="+"?(d=d.slice(1)||"*",(s[d]=s[d]||[]).unshift(h)):(s[d]=s[d]||[]).push(h)}}function Hi(s,u,h,d){var m={},y=s===Br;function v(R){var I;return m[R]=!0,l.each(s[R]||[],function(N,B){var q=B(u,h,d);if(typeof q=="string"&&!y&&!m[q])return u.dataTypes.unshift(q),v(q),!1;if(y)return!(I=q)}),I}return v(u.dataTypes[0])||!m["*"]&&v("*")}function $i(s,u){var h,d,m=l.ajaxSettings.flatOptions||{};for(h in u)u[h]!==void 0&&((m[h]?s:d||(d={}))[h]=u[h]);return d&&l.extend(!0,s,d),s}function mr(s,u,h){for(var d,m,y,v,R=s.contents,I=s.dataTypes;I[0]==="*";)I.shift(),d===void 0&&(d=s.mimeType||u.getResponseHeader("Content-Type"));if(d){for(m in R)if(R[m]&&R[m].test(d)){I.unshift(m);break}}if(I[0]in h)y=I[0];else{for(m in h){if(!I[0]||s.converters[m+" "+I[0]]){y=m;break}v||(v=m)}y=y||v}if(y)return y!==I[0]&&I.unshift(y),h[y]}function $s(s,u,h,d){var m,y,v,R,I,N={},B=s.dataTypes.slice();if(B[1])for(v in s.converters)N[v.toLowerCase()]=s.converters[v];for(y=B.shift();y;)if(s.responseFields[y]&&(h[s.responseFields[y]]=u),!I&&d&&s.dataFilter&&(u=s.dataFilter(u,s.dataType)),I=y,y=B.shift(),y){if(y==="*")y=I;else if(I!=="*"&&I!==y){if(v=N[I+" "+y]||N["* "+y],!v){for(m in N)if(R=m.split(" "),R[1]===y&&(v=N[I+" "+R[0]]||N["* "+R[0]],v)){v===!0?v=N[m]:N[m]!==!0&&(y=R[0],B.unshift(R[1]));break}}if(v!==!0)if(v&&s.throws)u=v(u);else try{u=v(u)}catch(q){return{state:"parsererror",error:v?q:"No conversion from "+I+" to "+y}}}}return{state:"success",data:u}}l.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Vn.href,type:"GET",isLocal:xe.test(Vn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":l.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(s,u){return u?$i($i(s,l.ajaxSettings),u):$i(l.ajaxSettings,s)},ajaxPrefilter:Vt(Bi),ajaxTransport:Vt(Br),ajax:function(s,u){typeof s=="object"&&(u=s,s=void 0),u=u||{};var h,d,m,y,v,R,I,N,B,q,F=l.ajaxSetup({},u),Q=F.context||F,ie=F.context&&(Q.nodeType||Q.jquery)?l(Q):l.event,_e=l.Deferred(),me=l.Callbacks("once memory"),Ve=F.statusCode||{},o={},f={},p="canceled",E={readyState:0,getResponseHeader:function(V){var z;if(I){if(!y)for(y={};z=ji.exec(m);)y[z[1].toLowerCase()+" "]=(y[z[1].toLowerCase()+" "]||[]).concat(z[2]);z=y[V.toLowerCase()+" "]}return z==null?null:z.join(", ")},getAllResponseHeaders:function(){return I?m:null},setRequestHeader:function(V,z){return I==null&&(V=f[V.toLowerCase()]=f[V.toLowerCase()]||V,o[V]=z),this},overrideMimeType:function(V){return I==null&&(F.mimeType=V),this},statusCode:function(V){var z;if(V)if(I)E.always(V[E.status]);else for(z in V)Ve[z]=[Ve[z],V[z]];return this},abort:function(V){var z=V||p;return h&&h.abort(z),O(0,z),this}};if(_e.promise(E),F.url=((s||F.url||Vn.href)+"").replace(na,Vn.protocol+"//"),F.type=u.method||u.type||F.method||F.type,F.dataTypes=(F.dataType||"*").toLowerCase().match(wt)||[""],F.crossDomain==null){R=Y.createElement("a");try{R.href=F.url,R.href=R.href,F.crossDomain=On.protocol+"//"+On.host!=R.protocol+"//"+R.host}catch{F.crossDomain=!0}}if(F.data&&F.processData&&typeof F.data!="string"&&(F.data=l.param(F.data,F.traditional)),Hi(Bi,F,u,E),I)return E;N=l.event&&F.global,N&&l.active++===0&&l.event.trigger("ajaxStart"),F.type=F.type.toUpperCase(),F.hasContent=!ta.test(F.type),d=F.url.replace(gr,""),F.hasContent?F.data&&F.processData&&(F.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(F.data=F.data.replace(pr,"+")):(q=F.url.slice(d.length),F.data&&(F.processData||typeof F.data=="string")&&(d+=(Fi.test(d)?"&":"?")+F.data,delete F.data),F.cache===!1&&(d=d.replace(Hs,"$1"),q=(Fi.test(d)?"&":"?")+"_="+hn.guid+++q),F.url=d+q),F.ifModified&&(l.lastModified[d]&&E.setRequestHeader("If-Modified-Since",l.lastModified[d]),l.etag[d]&&E.setRequestHeader("If-None-Match",l.etag[d])),(F.data&&F.hasContent&&F.contentType!==!1||u.contentType)&&E.setRequestHeader("Content-Type",F.contentType),E.setRequestHeader("Accept",F.dataTypes[0]&&F.accepts[F.dataTypes[0]]?F.accepts[F.dataTypes[0]]+(F.dataTypes[0]!=="*"?", "+qi+"; q=0.01":""):F.accepts["*"]);for(B in F.headers)E.setRequestHeader(B,F.headers[B]);if(F.beforeSend&&(F.beforeSend.call(Q,E,F)===!1||I))return E.abort();if(p="abort",me.add(F.complete),E.done(F.success),E.fail(F.error),h=Hi(Br,F,u,E),!h)O(-1,"No Transport");else{if(E.readyState=1,N&&ie.trigger("ajaxSend",[E,F]),I)return E;F.async&&F.timeout>0&&(v=e.setTimeout(function(){E.abort("timeout")},F.timeout));try{I=!1,h.send(o,O)}catch(V){if(I)throw V;O(-1,V)}}function O(V,z,fe,Me){var ye,Oe,qe,ct,it,He=z;I||(I=!0,v&&e.clearTimeout(v),h=void 0,m=Me||"",E.readyState=V>0?4:0,ye=V>=200&&V<300||V===304,fe&&(ct=mr(F,E,fe)),!ye&&l.inArray("script",F.dataTypes)>-1&&l.inArray("json",F.dataTypes)<0&&(F.converters["text script"]=function(){}),ct=$s(F,ct,E,ye),ye?(F.ifModified&&(it=E.getResponseHeader("Last-Modified"),it&&(l.lastModified[d]=it),it=E.getResponseHeader("etag"),it&&(l.etag[d]=it)),V===204||F.type==="HEAD"?He="nocontent":V===304?He="notmodified":(He=ct.state,Oe=ct.data,qe=ct.error,ye=!qe)):(qe=He,(V||!He)&&(He="error",V<0&&(V=0))),E.status=V,E.statusText=(z||He)+"",ye?_e.resolveWith(Q,[Oe,He,E]):_e.rejectWith(Q,[E,He,qe]),E.statusCode(Ve),Ve=void 0,N&&ie.trigger(ye?"ajaxSuccess":"ajaxError",[E,F,ye?Oe:qe]),me.fireWith(Q,[E,He]),N&&(ie.trigger("ajaxComplete",[E,F]),--l.active||l.event.trigger("ajaxStop")))}return E},getJSON:function(s,u,h){return l.get(s,u,h,"json")},getScript:function(s,u){return l.get(s,void 0,u,"script")}}),l.each(["get","post"],function(s,u){l[u]=function(h,d,m,y){return X(d)&&(y=y||m,m=d,d=void 0),l.ajax(l.extend({url:h,type:u,dataType:y,data:d,success:m},l.isPlainObject(h)&&h))}}),l.ajaxPrefilter(function(s){var u;for(u in s.headers)u.toLowerCase()==="content-type"&&(s.contentType=s.headers[u]||"")}),l._evalUrl=function(s,u,h){return l.ajax({url:s,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(d){l.globalEval(d,u,h)}})},l.fn.extend({wrapAll:function(s){var u;return this[0]&&(X(s)&&(s=s.call(this[0])),u=l(s,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&u.insertBefore(this[0]),u.map(function(){for(var h=this;h.firstElementChild;)h=h.firstElementChild;return h}).append(this)),this},wrapInner:function(s){return X(s)?this.each(function(u){l(this).wrapInner(s.call(this,u))}):this.each(function(){var u=l(this),h=u.contents();h.length?h.wrapAll(s):u.append(s)})},wrap:function(s){var u=X(s);return this.each(function(h){l(this).wrapAll(u?s.call(this,h):s)})},unwrap:function(s){return this.parent(s).not("body").each(function(){l(this).replaceWith(this.childNodes)}),this}}),l.expr.pseudos.hidden=function(s){return!l.expr.pseudos.visible(s)},l.expr.pseudos.visible=function(s){return!!(s.offsetWidth||s.offsetHeight||s.getClientRects().length)},l.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var zi={0:200,1223:204},zt=l.ajaxSettings.xhr();W.cors=!!zt&&"withCredentials"in zt,W.ajax=zt=!!zt,l.ajaxTransport(function(s){var u,h;if(W.cors||zt&&!s.crossDomain)return{send:function(d,m){var y,v=s.xhr();if(v.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(y in s.xhrFields)v[y]=s.xhrFields[y];s.mimeType&&v.overrideMimeType&&v.overrideMimeType(s.mimeType),!s.crossDomain&&!d["X-Requested-With"]&&(d["X-Requested-With"]="XMLHttpRequest");for(y in d)v.setRequestHeader(y,d[y]);u=function(R){return function(){u&&(u=h=v.onload=v.onerror=v.onabort=v.ontimeout=v.onreadystatechange=null,R==="abort"?v.abort():R==="error"?typeof v.status!="number"?m(0,"error"):m(v.status,v.statusText):m(zi[v.status]||v.status,v.statusText,(v.responseType||"text")!=="text"||typeof v.responseText!="string"?{binary:v.response}:{text:v.responseText},v.getAllResponseHeaders()))}},v.onload=u(),h=v.onerror=v.ontimeout=u("error"),v.onabort!==void 0?v.onabort=h:v.onreadystatechange=function(){v.readyState===4&&e.setTimeout(function(){u&&h()})},u=u("abort");try{v.send(s.hasContent&&s.data||null)}catch(R){if(u)throw R}},abort:function(){u&&u()}}}),l.ajaxPrefilter(function(s){s.crossDomain&&(s.contents.script=!1)}),l.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(s){return l.globalEval(s),s}}}),l.ajaxPrefilter("script",function(s){s.cache===void 0&&(s.cache=!1),s.crossDomain&&(s.type="GET")}),l.ajaxTransport("script",function(s){if(s.crossDomain||s.scriptAttrs){var u,h;return{send:function(d,m){u=l("<script>").attr(s.scriptAttrs||{}).prop({charset:s.scriptCharset,src:s.url}).on("load error",h=function(y){u.remove(),h=null,y&&m(y.type==="error"?404:200,y.type)}),Y.head.appendChild(u[0])},abort:function(){h&&h()}}}});var Wi=[],Mn=/(=)\?(?=&|$)|\?\?/;l.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var s=Wi.pop()||l.expando+"_"+hn.guid++;return this[s]=!0,s}}),l.ajaxPrefilter("json jsonp",function(s,u,h){var d,m,y,v=s.jsonp!==!1&&(Mn.test(s.url)?"url":typeof s.data=="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Mn.test(s.data)&&"data");if(v||s.dataTypes[0]==="jsonp")return d=s.jsonpCallback=X(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,v?s[v]=s[v].replace(Mn,"$1"+d):s.jsonp!==!1&&(s.url+=(Fi.test(s.url)?"&":"?")+s.jsonp+"="+d),s.converters["script json"]=function(){return y||l.error(d+" was not called"),y[0]},s.dataTypes[0]="json",m=e[d],e[d]=function(){y=arguments},h.always(function(){m===void 0?l(e).removeProp(d):e[d]=m,s[d]&&(s.jsonpCallback=u.jsonpCallback,Wi.push(d)),y&&X(m)&&m(y[0]),y=m=void 0}),"script"}),W.createHTMLDocument=(function(){var s=Y.implementation.createHTMLDocument("").body;return s.innerHTML="<form></form><form></form>",s.childNodes.length===2})(),l.parseHTML=function(s,u,h){if(typeof s!="string")return[];typeof u=="boolean"&&(h=u,u=!1);var d,m,y;return u||(W.createHTMLDocument?(u=Y.implementation.createHTMLDocument(""),d=u.createElement("base"),d.href=Y.location.href,u.head.appendChild(d)):u=Y),m=gi.exec(s),y=!h&&[],m?[u.createElement(m[1])]:(m=Ps([s],u,y),y&&y.length&&l(y).remove(),l.merge([],m.childNodes))},l.fn.load=function(s,u,h){var d,m,y,v=this,R=s.indexOf(" ");return R>-1&&(d=qt(s.slice(R)),s=s.slice(0,R)),X(u)?(h=u,u=void 0):u&&typeof u=="object"&&(m="POST"),v.length>0&&l.ajax({url:s,type:m||"GET",dataType:"html",data:u}).done(function(I){y=arguments,v.html(d?l("<div>").append(l.parseHTML(I)).find(d):I)}).always(h&&function(I,N){v.each(function(){h.apply(this,y||[I.responseText,N,I])})}),this},l.expr.pseudos.animated=function(s){return l.grep(l.timers,function(u){return s===u.elem}).length},l.offset={setOffset:function(s,u,h){var d,m,y,v,R,I,N,B=l.css(s,"position"),q=l(s),F={};B==="static"&&(s.style.position="relative"),R=q.offset(),y=l.css(s,"top"),I=l.css(s,"left"),N=(B==="absolute"||B==="fixed")&&(y+I).indexOf("auto")>-1,N?(d=q.position(),v=d.top,m=d.left):(v=parseFloat(y)||0,m=parseFloat(I)||0),X(u)&&(u=u.call(s,h,l.extend({},R))),u.top!=null&&(F.top=u.top-R.top+v),u.left!=null&&(F.left=u.left-R.left+m),"using"in u?u.using.call(s,F):q.css(F)}},l.fn.extend({offset:function(s){if(arguments.length)return s===void 0?this:this.each(function(m){l.offset.setOffset(this,s,m)});var u,h,d=this[0];if(d)return d.getClientRects().length?(u=d.getBoundingClientRect(),h=d.ownerDocument.defaultView,{top:u.top+h.pageYOffset,left:u.left+h.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var s,u,h,d=this[0],m={top:0,left:0};if(l.css(d,"position")==="fixed")u=d.getBoundingClientRect();else{for(u=this.offset(),h=d.ownerDocument,s=d.offsetParent||h.documentElement;s&&(s===h.body||s===h.documentElement)&&l.css(s,"position")==="static";)s=s.parentNode;s&&s!==d&&s.nodeType===1&&(m=l(s).offset(),m.top+=l.css(s,"borderTopWidth",!0),m.left+=l.css(s,"borderLeftWidth",!0))}return{top:u.top-m.top-l.css(d,"marginTop",!0),left:u.left-m.left-l.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var s=this.offsetParent;s&&l.css(s,"position")==="static";)s=s.offsetParent;return s||Dt})}}),l.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(s,u){var h=u==="pageYOffset";l.fn[s]=function(d){return It(this,function(m,y,v){var R;if(Z(m)?R=m:m.nodeType===9&&(R=m.defaultView),v===void 0)return R?R[u]:m[y];R?R.scrollTo(h?R.pageXOffset:v,h?v:R.pageYOffset):m[y]=v},s,d,arguments.length)}}),l.each(["top","left"],function(s,u){l.cssHooks[u]=Lr(W.pixelPosition,function(h,d){if(d)return d=vt(h,u),ki.test(d)?l(h).position()[u]+"px":d})}),l.each({Height:"height",Width:"width"},function(s,u){l.each({padding:"inner"+s,content:u,"":"outer"+s},function(h,d){l.fn[d]=function(m,y){var v=arguments.length&&(h||typeof m!="boolean"),R=h||(m===!0||y===!0?"margin":"border");return It(this,function(I,N,B){var q;return Z(I)?d.indexOf("outer")===0?I["inner"+s]:I.document.documentElement["client"+s]:I.nodeType===9?(q=I.documentElement,Math.max(I.body["scroll"+s],q["scroll"+s],I.body["offset"+s],q["offset"+s],q["client"+s])):B===void 0?l.css(I,N,R):l.style(I,N,B,R)},u,v?m:void 0,v)}})}),l.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(s,u){l.fn[u]=function(h){return this.on(u,h)}}),l.fn.extend({bind:function(s,u,h){return this.on(s,null,u,h)},unbind:function(s,u){return this.off(s,null,u)},delegate:function(s,u,h,d){return this.on(u,s,h,d)},undelegate:function(s,u,h){return arguments.length===1?this.off(s,"**"):this.off(u,s||"**",h)},hover:function(s,u){return this.on("mouseenter",s).on("mouseleave",u||s)}}),l.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(s,u){l.fn[u]=function(h,d){return arguments.length>0?this.on(u,null,h,d):this.trigger(u)}});var ra=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;l.proxy=function(s,u){var h,d,m;if(typeof u=="string"&&(h=s[u],u=s,s=h),!!X(s))return d=a.call(arguments,2),m=function(){return s.apply(u||this,d.concat(a.call(arguments)))},m.guid=s.guid=s.guid||l.guid++,m},l.holdReady=function(s){s?l.readyWait++:l.ready(!0)},l.isArray=Array.isArray,l.parseJSON=JSON.parse,l.nodeName=b,l.isFunction=X,l.isWindow=Z,l.camelCase=At,l.type=Ue,l.now=Date.now,l.isNumeric=function(s){var u=l.type(s);return(u==="number"||u==="string")&&!isNaN(s-parseFloat(s))},l.trim=function(s){return s==null?"":(s+"").replace(ra,"$1")};var zs=e.jQuery,yr=e.$;return l.noConflict=function(s){return e.$===l&&(e.$=yr),s&&e.jQuery===l&&(e.jQuery=zs),l},typeof t>"u"&&(e.jQuery=e.$=l),l})})(no)),no.exports}var jf=Uf();const je=Lf(jf),Bf=()=>{};var ju={};const cl=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},qf=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],c=n[t++],g=n[t++],_=((i&7)<<18|(a&63)<<12|(c&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(_>>10)),e[r++]=String.fromCharCode(56320+(_&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|c&63)}}return e.join("")},ll={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],c=i+1<n.length,g=c?n[i+1]:0,_=i+2<n.length,T=_?n[i+2]:0,S=a>>2,k=(a&3)<<4|g>>4;let U=(g&15)<<2|T>>6,K=T&63;_||(K=64,c||(U=64)),r.push(t[S],t[k],t[U],t[K])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(cl(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qf(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],g=i<n.length?t[n.charAt(i)]:0;++i;const T=i<n.length?t[n.charAt(i)]:64;++i;const k=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||g==null||T==null||k==null)throw new Hf;const U=a<<2|g>>4;if(r.push(U),T!==64){const K=g<<4&240|T>>2;if(r.push(K),k!==64){const W=T<<6&192|k;r.push(W)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Hf extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $f=function(n){const e=cl(n);return ll.encodeByteArray(e,!0)},po=function(n){return $f(n).replace(/\./g,"")},hl=function(n){try{return ll.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function zf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Wf=()=>zf().__FIREBASE_DEFAULTS__,Gf=()=>{if(typeof process>"u"||typeof ju>"u")return;const n=ju.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Kf=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&hl(n[1]);return e&&JSON.parse(e)},Vo=()=>{try{return Bf()||Wf()||Gf()||Kf()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fl=n=>Vo()?.emulatorHosts?.[n],Qf=n=>{const e=fl(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},dl=()=>Vo()?.config,pl=n=>Vo()?.[`_${n}`];class Xf{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function ai(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gl(n){return(await fetch(n,{credentials:"include"})).ok}function Jf(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[po(JSON.stringify(t)),po(JSON.stringify(c)),""].join(".")}const Yi={};function Yf(){const n={prod:[],emulator:[]};for(const e of Object.keys(Yi))Yi[e]?n.emulator.push(e):n.prod.push(e);return n}function Zf(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Bu=!1;function ml(n,e){if(typeof window>"u"||typeof document>"u"||!ai(window.location.host)||Yi[n]===e||Yi[n]||Bu)return;Yi[n]=e;function t(U){return`__firebase__banner__${U}`}const r="__firebase__banner",a=Yf().prod.length>0;function c(){const U=document.getElementById(r);U&&U.remove()}function g(U){U.style.display="flex",U.style.background="#7faaf0",U.style.position="fixed",U.style.bottom="5px",U.style.left="5px",U.style.padding=".5em",U.style.borderRadius="5px",U.style.alignItems="center"}function _(U,K){U.setAttribute("width","24"),U.setAttribute("id",K),U.setAttribute("height","24"),U.setAttribute("viewBox","0 0 24 24"),U.setAttribute("fill","none"),U.style.marginLeft="-6px"}function T(){const U=document.createElement("span");return U.style.cursor="pointer",U.style.marginLeft="16px",U.style.fontSize="24px",U.innerHTML=" &times;",U.onclick=()=>{Bu=!0,c()},U}function S(U,K){U.setAttribute("id",K),U.innerText="Learn more",U.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",U.setAttribute("target","__blank"),U.style.paddingLeft="5px",U.style.textDecoration="underline"}function k(){const U=Zf(r),K=t("text"),W=document.getElementById(K)||document.createElement("span"),X=t("learnmore"),Z=document.getElementById(X)||document.createElement("a"),Y=t("preprendIcon"),Ae=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(U.created){const Se=U.element;g(Se),S(Z,X);const Ue=T();_(Ae,Y),Se.append(Ae,W,Z,Ue),document.body.appendChild(Se)}a?(W.innerText="Preview backend disconnected.",Ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",K)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",k):k()}function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ed(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function td(){const n=Vo()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nd(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rd(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function id(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sd(){const n=pt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function od(){return!td()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ad(){try{return typeof indexedDB=="object"}catch{return!1}}function ud(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const cd="FirebaseError";class En extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=cd,Object.setPrototypeOf(this,En.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ms.prototype.create)}}class ms{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],c=a?ld(a,r):"Error",g=`${this.serviceName}: ${c} (${i}).`;return new En(i,g,r)}}function ld(n,e){return n.replace(hd,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const hd=/\{\$([^}]+)}/g;function fd(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ir(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],c=e[i];if(qu(a)&&qu(c)){if(!Ir(a,c))return!1}else if(a!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function qu(n){return n!==null&&typeof n=="object"}function ys(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dd(n,e){const t=new pd(n,e);return t.subscribe.bind(t)}class pd{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");gd(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ca),i.error===void 0&&(i.error=ca),i.complete===void 0&&(i.complete=ca);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gd(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ca(){}function tn(n){return n&&n._delegate?n._delegate:n}class Ar{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const vr="[DEFAULT]";class md{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Xf;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_d(e))try{this.getOrInitializeService({instanceIdentifier:vr})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=vr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vr){return this.instances.has(e)}getOptions(e=vr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(a);r===g&&c.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yd(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vr){return this.component?this.component.multipleInstances?e:vr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yd(n){return n===vr?void 0:n}function _d(n){return n.instantiationMode==="EAGER"}class vd{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new md(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ee;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ee||(Ee={}));const Td={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},Ed=Ee.INFO,wd={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},Id=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=wd[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class za{constructor(e){this.name=e,this._logLevel=Ed,this._logHandler=Id,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Td[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const Ad=(n,e)=>e.some(t=>n instanceof t);let Hu,$u;function bd(){return Hu||(Hu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Sd(){return $u||($u=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yl=new WeakMap,Ea=new WeakMap,_l=new WeakMap,la=new WeakMap,Wa=new WeakMap;function Cd(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(zn(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&yl.set(t,n)}).catch(()=>{}),Wa.set(e,n),e}function Rd(n){if(Ea.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});Ea.set(n,e)}let wa={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ea.get(n);if(e==="objectStoreNames")return n.objectStoreNames||_l.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Pd(n){wa=n(wa)}function kd(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ha(this),e,...t);return _l.set(r,e.sort?e.sort():[e]),zn(r)}:Sd().includes(n)?function(...e){return n.apply(ha(this),e),zn(yl.get(this))}:function(...e){return zn(n.apply(ha(this),e))}}function Dd(n){return typeof n=="function"?kd(n):(n instanceof IDBTransaction&&Rd(n),Ad(n,bd())?new Proxy(n,wa):n)}function zn(n){if(n instanceof IDBRequest)return Cd(n);if(la.has(n))return la.get(n);const e=Dd(n);return e!==n&&(la.set(n,e),Wa.set(e,n)),e}const ha=n=>Wa.get(n);function Nd(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(n,e),g=zn(c);return r&&c.addEventListener("upgradeneeded",_=>{r(zn(c.result),_.oldVersion,_.newVersion,zn(c.transaction),_)}),t&&c.addEventListener("blocked",_=>t(_.oldVersion,_.newVersion,_)),g.then(_=>{a&&_.addEventListener("close",()=>a()),i&&_.addEventListener("versionchange",T=>i(T.oldVersion,T.newVersion,T))}).catch(()=>{}),g}const xd=["get","getKey","getAll","getAllKeys","count"],Vd=["put","add","delete","clear"],fa=new Map;function zu(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(fa.get(e))return fa.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Vd.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||xd.includes(t)))return;const a=async function(c,...g){const _=this.transaction(c,i?"readwrite":"readonly");let T=_.store;return r&&(T=T.index(g.shift())),(await Promise.all([T[t](...g),i&&_.done]))[0]};return fa.set(e,a),a}Pd(n=>({...n,get:(e,t,r)=>zu(e,t)||n.get(e,t,r),has:(e,t)=>!!zu(e,t)||n.has(e,t)}));class Od{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Md(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Md(n){return n.getComponent()?.type==="VERSION"}const Ia="@firebase/app",Wu="0.14.6";const mn=new za("@firebase/app"),Ld="@firebase/app-compat",Fd="@firebase/analytics-compat",Ud="@firebase/analytics",jd="@firebase/app-check-compat",Bd="@firebase/app-check",qd="@firebase/auth",Hd="@firebase/auth-compat",$d="@firebase/database",zd="@firebase/data-connect",Wd="@firebase/database-compat",Gd="@firebase/functions",Kd="@firebase/functions-compat",Qd="@firebase/installations",Xd="@firebase/installations-compat",Jd="@firebase/messaging",Yd="@firebase/messaging-compat",Zd="@firebase/performance",ep="@firebase/performance-compat",tp="@firebase/remote-config",np="@firebase/remote-config-compat",rp="@firebase/storage",ip="@firebase/storage-compat",sp="@firebase/firestore",op="@firebase/ai",ap="@firebase/firestore-compat",up="firebase",cp="12.6.0";const Aa="[DEFAULT]",lp={[Ia]:"fire-core",[Ld]:"fire-core-compat",[Ud]:"fire-analytics",[Fd]:"fire-analytics-compat",[Bd]:"fire-app-check",[jd]:"fire-app-check-compat",[qd]:"fire-auth",[Hd]:"fire-auth-compat",[$d]:"fire-rtdb",[zd]:"fire-data-connect",[Wd]:"fire-rtdb-compat",[Gd]:"fire-fn",[Kd]:"fire-fn-compat",[Qd]:"fire-iid",[Xd]:"fire-iid-compat",[Jd]:"fire-fcm",[Yd]:"fire-fcm-compat",[Zd]:"fire-perf",[ep]:"fire-perf-compat",[tp]:"fire-rc",[np]:"fire-rc-compat",[rp]:"fire-gcs",[ip]:"fire-gcs-compat",[sp]:"fire-fst",[ap]:"fire-fst-compat",[op]:"fire-vertex","fire-js":"fire-js",[up]:"fire-js-all"};const go=new Map,hp=new Map,ba=new Map;function Gu(n,e){try{n.container.addComponent(e)}catch(t){mn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Zr(n){const e=n.name;if(ba.has(e))return mn.debug(`There were multiple attempts to register component ${e}.`),!1;ba.set(e,n);for(const t of go.values())Gu(t,n);for(const t of hp.values())Gu(t,n);return!0}function Ga(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Kt(n){return n==null?!1:n.settings!==void 0}const fp={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wn=new ms("app","Firebase",fp);class dp{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wn.create("app-deleted",{appName:this._name})}}const ui=cp;function vl(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Aa,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Wn.create("bad-app-name",{appName:String(i)});if(t||(t=dl()),!t)throw Wn.create("no-options");const a=go.get(i);if(a){if(Ir(t,a.options)&&Ir(r,a.config))return a;throw Wn.create("duplicate-app",{appName:i})}const c=new vd(i);for(const _ of ba.values())c.addComponent(_);const g=new dp(t,r,c);return go.set(i,g),g}function Tl(n=Aa){const e=go.get(n);if(!e&&n===Aa&&dl())return vl();if(!e)throw Wn.create("no-app",{appName:n});return e}function Gn(n,e,t){let r=lp[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mn.warn(c.join(" "));return}Zr(new Ar(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const pp="firebase-heartbeat-database",gp=1,ss="firebase-heartbeat-store";let da=null;function El(){return da||(da=Nd(pp,gp,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ss)}catch(t){console.warn(t)}}}}).catch(n=>{throw Wn.create("idb-open",{originalErrorMessage:n.message})})),da}async function mp(n){try{const t=(await El()).transaction(ss),r=await t.objectStore(ss).get(wl(n));return await t.done,r}catch(e){if(e instanceof En)mn.warn(e.message);else{const t=Wn.create("idb-get",{originalErrorMessage:e?.message});mn.warn(t.message)}}}async function Ku(n,e){try{const r=(await El()).transaction(ss,"readwrite");await r.objectStore(ss).put(e,wl(n)),await r.done}catch(t){if(t instanceof En)mn.warn(t.message);else{const r=Wn.create("idb-set",{originalErrorMessage:t?.message});mn.warn(r.message)}}}function wl(n){return`${n.name}!${n.options.appId}`}const yp=1024,_p=30;class vp{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ep(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Qu();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>_p){const i=wp(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){mn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Qu(),{heartbeatsToSend:t,unsentEntries:r}=Tp(this._heartbeatsCache.heartbeats),i=po(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return mn.warn(e),""}}}function Qu(){return new Date().toISOString().substring(0,10)}function Tp(n,e=yp){const t=[];let r=n.slice();for(const i of n){const a=t.find(c=>c.agent===i.agent);if(a){if(a.dates.push(i.date),Xu(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Xu(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Ep{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ad()?ud().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await mp(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ku(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ku(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Xu(n){return po(JSON.stringify({version:2,heartbeats:n})).length}function wp(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Ip(n){Zr(new Ar("platform-logger",e=>new Od(e),"PRIVATE")),Zr(new Ar("heartbeat",e=>new vp(e),"PRIVATE")),Gn(Ia,Wu,n),Gn(Ia,Wu,"esm2020"),Gn("fire-js","")}Ip("");var Ap="firebase",bp="12.6.0";Gn(Ap,bp,"app");function Il(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Sp=Il,Al=new ms("auth","Firebase",Il());const mo=new za("@firebase/auth");function Cp(n,...e){mo.logLevel<=Ee.WARN&&mo.warn(`Auth (${ui}): ${n}`,...e)}function ro(n,...e){mo.logLevel<=Ee.ERROR&&mo.error(`Auth (${ui}): ${n}`,...e)}function yn(n,...e){throw Ka(n,...e)}function Qt(n,...e){return Ka(n,...e)}function bl(n,e,t){const r={...Sp(),[e]:t};return new ms("auth","Firebase",r).create(e,{appName:n.name})}function Er(n){return bl(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ka(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Al.create(n,...e)}function he(n,e,...t){if(!n)throw Ka(e,...t)}function dn(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ro(e),new Error(e)}function _n(n,e){n||dn(e)}function Sa(){return typeof self<"u"&&self.location?.href||""}function Rp(){return Ju()==="http:"||Ju()==="https:"}function Ju(){return typeof self<"u"&&self.location?.protocol||null}function Pp(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Rp()||rd()||"connection"in navigator)?navigator.onLine:!0}function kp(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class _s{constructor(e,t){this.shortDelay=e,this.longDelay=t,_n(t>e,"Short delay should be less than long delay!"),this.isMobile=ed()||id()}get(){return Pp()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Qa(n,e){_n(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Sl{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Dp={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Np=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xp=new _s(3e4,6e4);function Xa(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ci(n,e,t,r,i={}){return Cl(n,i,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const g=ys({key:n.config.apiKey,...c}).slice(1),_=await n._getAdditionalHeaders();_["Content-Type"]="application/json",n.languageCode&&(_["X-Firebase-Locale"]=n.languageCode);const T={method:e,headers:_,...a};return nd()||(T.referrerPolicy="no-referrer"),n.emulatorConfig&&ai(n.emulatorConfig.host)&&(T.credentials="include"),Sl.fetch()(await Rl(n,n.config.apiHost,t,g),T)})}async function Cl(n,e,t){n._canInitEmulator=!1;const r={...Dp,...e};try{const i=new Op(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Xs(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const g=a.ok?c.errorMessage:c.error.message,[_,T]=g.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xs(n,"credential-already-in-use",c);if(_==="EMAIL_EXISTS")throw Xs(n,"email-already-in-use",c);if(_==="USER_DISABLED")throw Xs(n,"user-disabled",c);const S=r[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(T)throw bl(n,S,T);yn(n,S)}}catch(i){if(i instanceof En)throw i;yn(n,"network-request-failed",{message:String(i)})}}async function Vp(n,e,t,r,i={}){const a=await ci(n,e,t,r,i);return"mfaPendingCredential"in a&&yn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function Rl(n,e,t,r){const i=`${e}${t}?${r}`,a=n,c=a.config.emulator?Qa(n.config,i):`${n.config.apiScheme}://${i}`;return Np.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}class Op{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Qt(this.auth,"network-request-failed")),xp.get())})}}function Xs(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Qt(n,e,r);return i.customData._tokenResponse=t,i}async function Mp(n,e){return ci(n,"POST","/v1/accounts:delete",e)}async function yo(n,e){return ci(n,"POST","/v1/accounts:lookup",e)}function Zi(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Lp(n,e=!1){const t=tn(n),r=await t.getIdToken(e),i=Ja(r);he(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,c=a?.sign_in_provider;return{claims:i,token:r,authTime:Zi(pa(i.auth_time)),issuedAtTime:Zi(pa(i.iat)),expirationTime:Zi(pa(i.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function pa(n){return Number(n)*1e3}function Ja(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ro("JWT malformed, contained fewer than 3 sections"),null;try{const i=hl(t);return i?JSON.parse(i):(ro("Failed to decode base64 JWT payload"),null)}catch(i){return ro("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Yu(n){const e=Ja(n);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function os(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof En&&Fp(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Fp({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class Up{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ca{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zi(this.lastLoginAt),this.creationTime=Zi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function _o(n){const e=n.auth,t=await n.getIdToken(),r=await os(n,yo(e,{idToken:t}));he(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?Pl(i.providerUserInfo):[],c=Bp(n.providerData,a),g=n.isAnonymous,_=!(n.email&&i.passwordHash)&&!c?.length,T=g?_:!1,S={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Ca(i.createdAt,i.lastLoginAt),isAnonymous:T};Object.assign(n,S)}async function jp(n){const e=tn(n);await _o(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Bp(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Pl(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function qp(n,e){const t=await Cl(n,{},async()=>{const r=ys({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,c=await Rl(n,i,"/v1/token",`key=${a}`),g=await n._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:g,body:r};return n.emulatorConfig&&ai(n.emulatorConfig.host)&&(_.credentials="include"),Sl.fetch()(c,_)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Hp(n,e){return ci(n,"POST","/v2/accounts:revokeToken",Xa(n,e))}class Qr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yu(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");const t=Yu(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await qp(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,c=new Qr;return r&&(he(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),a&&(he(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qr,this.toJSON())}_performRefresh(){return dn("not implemented")}}function Un(n,e){he(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Mt{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Up(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ca(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await os(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Lp(this,e)}reload(){return jp(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Mt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await _o(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kt(this.auth.app))return Promise.reject(Er(this.auth));const e=await this.getIdToken();return await os(this,Mp(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,c=t.photoURL??void 0,g=t.tenantId??void 0,_=t._redirectEventId??void 0,T=t.createdAt??void 0,S=t.lastLoginAt??void 0,{uid:k,emailVerified:U,isAnonymous:K,providerData:W,stsTokenManager:X}=t;he(k&&X,e,"internal-error");const Z=Qr.fromJSON(this.name,X);he(typeof k=="string",e,"internal-error"),Un(r,e.name),Un(i,e.name),he(typeof U=="boolean",e,"internal-error"),he(typeof K=="boolean",e,"internal-error"),Un(a,e.name),Un(c,e.name),Un(g,e.name),Un(_,e.name),Un(T,e.name),Un(S,e.name);const Y=new Mt({uid:k,auth:e,email:i,emailVerified:U,displayName:r,isAnonymous:K,photoURL:c,phoneNumber:a,tenantId:g,stsTokenManager:Z,createdAt:T,lastLoginAt:S});return W&&Array.isArray(W)&&(Y.providerData=W.map(Ae=>({...Ae}))),_&&(Y._redirectEventId=_),Y}static async _fromIdTokenResponse(e,t,r=!1){const i=new Qr;i.updateFromServerResponse(t);const a=new Mt({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await _o(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];he(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Pl(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!a?.length,g=new Qr;g.updateFromIdToken(r);const _=new Mt({uid:i.localId,auth:e,stsTokenManager:g,isAnonymous:c}),T={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Ca(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(_,T),_}}const Zu=new Map;function pn(n){_n(n instanceof Function,"Expected a class definition");let e=Zu.get(n);return e?(_n(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Zu.set(n,e),e)}class kl{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}kl.type="NONE";const ec=kl;function io(n,e,t){return`firebase:${n}:${e}:${t}`}class Xr{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=io(this.userKey,i.apiKey,a),this.fullPersistenceKey=io("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await yo(this.auth,{idToken:e}).catch(()=>{});return t?Mt._fromGetAccountInfoResponse(this.auth,t,e):null}return Mt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Xr(pn(ec),e,r);const i=(await Promise.all(t.map(async T=>{if(await T._isAvailable())return T}))).filter(T=>T);let a=i[0]||pn(ec);const c=io(r,e.config.apiKey,e.name);let g=null;for(const T of t)try{const S=await T._get(c);if(S){let k;if(typeof S=="string"){const U=await yo(e,{idToken:S}).catch(()=>{});if(!U)break;k=await Mt._fromGetAccountInfoResponse(e,U,S)}else k=Mt._fromJSON(e,S);T!==a&&(g=k),a=T;break}}catch{}const _=i.filter(T=>T._shouldAllowMigration);return!a._shouldAllowMigration||!_.length?new Xr(a,e,r):(a=_[0],g&&await a._set(c,g.toJSON()),await Promise.all(t.map(async T=>{if(T!==a)try{await T._remove(c)}catch{}})),new Xr(a,e,r))}}function tc(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vl(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Dl(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ml(e))return"Blackberry";if(Ll(e))return"Webos";if(Nl(e))return"Safari";if((e.includes("chrome/")||xl(e))&&!e.includes("edge/"))return"Chrome";if(Ol(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Dl(n=pt()){return/firefox\//i.test(n)}function Nl(n=pt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xl(n=pt()){return/crios\//i.test(n)}function Vl(n=pt()){return/iemobile/i.test(n)}function Ol(n=pt()){return/android/i.test(n)}function Ml(n=pt()){return/blackberry/i.test(n)}function Ll(n=pt()){return/webos/i.test(n)}function Ya(n=pt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $p(n=pt()){return Ya(n)&&!!window.navigator?.standalone}function zp(){return sd()&&document.documentMode===10}function Fl(n=pt()){return Ya(n)||Ol(n)||Ll(n)||Ml(n)||/windows phone/i.test(n)||Vl(n)}function Ul(n,e=[]){let t;switch(n){case"Browser":t=tc(pt());break;case"Worker":t=`${tc(pt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ui}/${r}`}class Wp{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,g)=>{try{const _=e(a);c(_)}catch(_){g(_)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Gp(n,e={}){return ci(n,"GET","/v2/passwordPolicy",Xa(n,e))}const Kp=6;class Qp{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Kp,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class Xp{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nc(this),this.idTokenSubscription=new nc(this),this.beforeStateQueue=new Wp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Al,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pn(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Xr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yo(this,{idToken:e}),r=await Mt._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Kt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,c=r?._redirectEventId,g=await this.tryRedirectSignIn(e);(!a||a===c)&&g?.user&&(r=g.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _o(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kp()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kt(this.app))return Promise.reject(Er(this));const t=e?tn(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kt(this.app)?Promise.reject(Er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kt(this.app)?Promise.reject(Er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Gp(this),t=new Qp(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ms("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Hp(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pn(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=await Xr.create(this,[pn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(g,this,"internal-error"),g.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const _=e.addObserver(t,r,i);return()=>{c=!0,_()}}else{const _=e.addObserver(t);return()=>{c=!0,_()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ul(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Cp(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Za(n){return tn(n)}class nc{constructor(e){this.auth=e,this.observer=null,this.addObserver=dd(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let eu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Jp(n){eu=n}function Yp(n){return eu.loadJS(n)}function Zp(){return eu.gapiScript}function eg(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function tg(n,e){const t=Ga(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Ir(a,e??{}))return i;yn(i,"already-initialized")}return t.initialize({options:e})}function ng(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(pn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function rg(n,e,t){const r=Za(n);he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=jl(e),{host:c,port:g}=ig(e),_=g===null?"":`:${g}`,T={url:`${a}//${c}${_}/`},S=Object.freeze({host:c,port:g,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){he(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),he(Ir(T,r.config.emulator)&&Ir(S,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=T,r.emulatorConfig=S,r.settings.appVerificationDisabledForTesting=!0,ai(c)?(gl(`${a}//${c}${_}`),ml("Auth",!0)):sg()}function jl(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ig(n){const e=jl(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:rc(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:rc(c)}}}function rc(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function sg(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Bl{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return dn("not implemented")}_getIdTokenResponse(e){return dn("not implemented")}_linkToIdToken(e,t){return dn("not implemented")}_getReauthenticationResolver(e){return dn("not implemented")}}async function Jr(n,e){return Vp(n,"POST","/v1/accounts:signInWithIdp",Xa(n,e))}const og="http://localhost";class br extends Bl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new br(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const c=new br(r,i);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Jr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Jr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jr(e,t)}buildRequest(){const e={requestUri:og,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ys(t)}return e}}class ql{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vs extends ql{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class jn extends vs{constructor(){super("facebook.com")}static credential(e){return br._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jn.credential(e.oauthAccessToken)}catch{return null}}}jn.FACEBOOK_SIGN_IN_METHOD="facebook.com";jn.PROVIDER_ID="facebook.com";class Bn extends vs{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return br._fromParams({providerId:Bn.PROVIDER_ID,signInMethod:Bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Bn.credentialFromTaggedObject(e)}static credentialFromError(e){return Bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Bn.credential(t,r)}catch{return null}}}Bn.GOOGLE_SIGN_IN_METHOD="google.com";Bn.PROVIDER_ID="google.com";class qn extends vs{constructor(){super("github.com")}static credential(e){return br._fromParams({providerId:qn.PROVIDER_ID,signInMethod:qn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qn.credentialFromTaggedObject(e)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qn.credential(e.oauthAccessToken)}catch{return null}}}qn.GITHUB_SIGN_IN_METHOD="github.com";qn.PROVIDER_ID="github.com";class Hn extends vs{constructor(){super("twitter.com")}static credential(e,t){return br._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Hn.credential(t,r)}catch{return null}}}Hn.TWITTER_SIGN_IN_METHOD="twitter.com";Hn.PROVIDER_ID="twitter.com";class ei{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Mt._fromIdTokenResponse(e,r,i),c=ic(r);return new ei({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=ic(r);return new ei({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function ic(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class vo extends En{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,vo.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new vo(e,t,r,i)}}function Hl(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?vo._fromErrorAndOperation(n,a,e,r):a})}async function ag(n,e,t=!1){const r=await os(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ei._forOperation(n,"link",r)}async function ug(n,e,t=!1){const{auth:r}=n;if(Kt(r.app))return Promise.reject(Er(r));const i="reauthenticate";try{const a=await os(n,Hl(r,i,e,n),t);he(a.idToken,r,"internal-error");const c=Ja(a.idToken);he(c,r,"internal-error");const{sub:g}=c;return he(n.uid===g,r,"user-mismatch"),ei._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&yn(r,"user-mismatch"),a}}async function cg(n,e,t=!1){if(Kt(n.app))return Promise.reject(Er(n));const r="signIn",i=await Hl(n,r,e),a=await ei._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}function lg(n,e,t,r){return tn(n).onIdTokenChanged(e,t,r)}function hg(n,e,t){return tn(n).beforeAuthStateChanged(e,t)}const To="__sak";class $l{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(To,"1"),this.storage.removeItem(To),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const fg=1e3,dg=10;class zl extends $l{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Fl(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,g,_)=>{this.notifyListeners(c,_)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);zp()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,dg):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},fg)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}zl.type="LOCAL";const pg=zl;class Wl extends $l{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Wl.type="SESSION";const Gl=Wl;function gg(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Oo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Oo(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,c=this.handlersMap[i];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const g=Array.from(c).map(async T=>T(t.origin,a)),_=await gg(g);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:_})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oo.receivers=[];function tu(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class mg{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,c;return new Promise((g,_)=>{const T=tu("",20);i.port1.start();const S=setTimeout(()=>{_(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(k){const U=k;if(U.data.eventId===T)switch(U.data.status){case"ack":clearTimeout(S),a=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),g(U.data.response);break;default:clearTimeout(S),clearTimeout(a),_(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:T,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Xt(){return window}function yg(n){Xt().location.href=n}function Kl(){return typeof Xt().WorkerGlobalScope<"u"&&typeof Xt().importScripts=="function"}async function _g(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vg(){return navigator?.serviceWorker?.controller||null}function Tg(){return Kl()?self:null}const Ql="firebaseLocalStorageDb",Eg=1,Eo="firebaseLocalStorage",Xl="fbase_key";class Ts{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Mo(n,e){return n.transaction([Eo],e?"readwrite":"readonly").objectStore(Eo)}function wg(){const n=indexedDB.deleteDatabase(Ql);return new Ts(n).toPromise()}function Ra(){const n=indexedDB.open(Ql,Eg);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Eo,{keyPath:Xl})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Eo)?e(r):(r.close(),await wg(),e(await Ra()))})})}async function sc(n,e,t){const r=Mo(n,!0).put({[Xl]:e,value:t});return new Ts(r).toPromise()}async function Ig(n,e){const t=Mo(n,!1).get(e),r=await new Ts(t).toPromise();return r===void 0?null:r.value}function oc(n,e){const t=Mo(n,!0).delete(e);return new Ts(t).toPromise()}const Ag=800,bg=3;class Jl{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ra(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>bg)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kl()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oo._getInstance(Tg()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _g(),!this.activeServiceWorker)return;this.sender=new mg(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vg()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ra();return await sc(e,To,"1"),await oc(e,To),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>sc(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Ig(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>oc(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Mo(i,!1).getAll();return new Ts(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ag)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jl.type="LOCAL";const Sg=Jl;new _s(3e4,6e4);function Cg(n,e){return e?pn(e):(he(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class nu extends Bl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Rg(n){return cg(n.auth,new nu(n),n.bypassAuthState)}function Pg(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),ug(t,new nu(n),n.bypassAuthState)}async function kg(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),ag(t,new nu(n),n.bypassAuthState)}class Yl{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:c,type:g}=e;if(c){this.reject(c);return}const _={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(_))}catch(T){this.reject(T)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Rg;case"linkViaPopup":case"linkViaRedirect":return kg;case"reauthViaPopup":case"reauthViaRedirect":return Pg;default:yn(this.auth,"internal-error")}}resolve(e){_n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Dg=new _s(2e3,1e4);class Kr extends Yl{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Kr.currentPopupAction&&Kr.currentPopupAction.cancel(),Kr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){_n(this.filter.length===1,"Popup operations only handle one event");const e=tu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Qt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Dg.get())};e()}}Kr.currentPopupAction=null;const Ng="pendingRedirect",so=new Map;class xg extends Yl{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=so.get(this.auth._key());if(!e){try{const r=await Vg(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}so.set(this.auth._key(),e)}return this.bypassAuthState||so.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Vg(n,e){const t=Lg(e),r=Mg(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function Og(n,e){so.set(n._key(),e)}function Mg(n){return pn(n._redirectPersistence)}function Lg(n){return io(Ng,n.config.apiKey,n.name)}async function Fg(n,e,t=!1){if(Kt(n.app))return Promise.reject(Er(n));const r=Za(n),i=Cg(r,e),c=await new xg(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const Ug=600*1e3;class jg{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Bg(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Zl(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Qt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ug&&this.cachedEventUids.clear(),this.cachedEventUids.has(ac(e))}saveEventToCache(e){this.cachedEventUids.add(ac(e)),this.lastProcessedEventTime=Date.now()}}function ac(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Zl({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Bg(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zl(n);default:return!1}}async function qg(n,e={}){return ci(n,"GET","/v1/projects",e)}const Hg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$g=/^https?/;async function zg(n){if(n.config.emulator)return;const{authorizedDomains:e}=await qg(n);for(const t of e)try{if(Wg(t))return}catch{}yn(n,"unauthorized-domain")}function Wg(n){const e=Sa(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!$g.test(t))return!1;if(Hg.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Gg=new _s(3e4,6e4);function uc(){const n=Xt().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Kg(n){return new Promise((e,t)=>{function r(){uc(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uc(),t(Qt(n,"network-request-failed"))},timeout:Gg.get()})}if(Xt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Xt().gapi?.load)r();else{const i=eg("iframefcb");return Xt()[i]=()=>{gapi.load?r():t(Qt(n,"network-request-failed"))},Yp(`${Zp()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw oo=null,e})}let oo=null;function Qg(n){return oo=oo||Kg(n),oo}const Xg=new _s(5e3,15e3),Jg="__/auth/iframe",Yg="emulator/auth/iframe",Zg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},em=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tm(n){const e=n.config;he(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Qa(e,Yg):`https://${n.config.authDomain}/${Jg}`,r={apiKey:e.apiKey,appName:n.name,v:ui},i=em.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${ys(r).slice(1)}`}async function nm(n){const e=await Qg(n),t=Xt().gapi;return he(t,n,"internal-error"),e.open({where:document.body,url:tm(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zg,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const c=Qt(n,"network-request-failed"),g=Xt().setTimeout(()=>{a(c)},Xg.get());function _(){Xt().clearTimeout(g),i(r)}r.ping(_).then(_,()=>{a(c)})}))}const rm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},im=500,sm=600,om="_blank",am="http://localhost";class cc{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function um(n,e,t,r=im,i=sm){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const _={...rm,width:r.toString(),height:i.toString(),top:a,left:c},T=pt().toLowerCase();t&&(g=xl(T)?om:t),Dl(T)&&(e=e||am,_.scrollbars="yes");const S=Object.entries(_).reduce((U,[K,W])=>`${U}${K}=${W},`,"");if($p(T)&&g!=="_self")return cm(e||"",g),new cc(null);const k=window.open(e||"",g,S);he(k,n,"popup-blocked");try{k.focus()}catch{}return new cc(k)}function cm(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const lm="__/auth/handler",hm="emulator/auth/handler",fm=encodeURIComponent("fac");async function lc(n,e,t,r,i,a){he(n.config.authDomain,n,"auth-domain-config-required"),he(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ui,eventId:i};if(e instanceof ql){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",fd(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,k]of Object.entries({}))c[S]=k}if(e instanceof vs){const S=e.getScopes().filter(k=>k!=="");S.length>0&&(c.scopes=S.join(","))}n.tenantId&&(c.tid=n.tenantId);const g=c;for(const S of Object.keys(g))g[S]===void 0&&delete g[S];const _=await n._getAppCheckToken(),T=_?`#${fm}=${encodeURIComponent(_)}`:"";return`${dm(n)}?${ys(g).slice(1)}${T}`}function dm({config:n}){return n.emulator?Qa(n,hm):`https://${n.authDomain}/${lm}`}const ga="webStorageSupport";class pm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gl,this._completeRedirectFn=Fg,this._overrideRedirectResult=Og}async _openPopup(e,t,r,i){_n(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await lc(e,t,r,Sa(),i);return um(e,a,tu())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await lc(e,t,r,Sa(),i);return yg(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(_n(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await nm(e),r=new jg(e);return t.register("authEvent",i=>(he(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ga,{type:ga},i=>{const a=i?.[0]?.[ga];a!==void 0&&t(!!a),yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=zg(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Fl()||Nl()||Ya()}}const gm=pm;var hc="@firebase/auth",fc="1.11.1";class mm{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ym(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _m(n){Zr(new Ar("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:g}=r.options;he(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const _={apiKey:c,authDomain:g,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ul(n)},T=new Xp(r,i,a,_);return ng(T,t),T},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Zr(new Ar("auth-internal",e=>{const t=Za(e.getProvider("auth").getImmediate());return(r=>new mm(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gn(hc,fc,ym(n)),Gn(hc,fc,"esm2020")}const vm=300,Tm=pl("authIdTokenMaxAge")||vm;let dc=null;const Em=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Tm)return;const i=t?.token;dc!==i&&(dc=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function wm(n=Tl()){const e=Ga(n,"auth");if(e.isInitialized())return e.getImmediate();const t=tg(n,{popupRedirectResolver:gm,persistence:[Sg,pg,Gl]}),r=pl("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=Em(a.toString());hg(t,c,()=>c(t.currentUser)),lg(t,g=>c(g))}}const i=fl("auth");return i&&rg(t,`http://${i}`),t}function Im(){return document.getElementsByTagName("head")?.[0]??document}Jp({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Qt("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",Im().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_m("Browser");var pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Kn,eh;(function(){var n;function e(l,C){function b(){}b.prototype=C.prototype,l.F=C.prototype,l.prototype=new b,l.prototype.constructor=l,l.D=function(x,D,M){for(var A=Array(arguments.length-2),We=2;We<arguments.length;We++)A[We-2]=arguments[We];return C.prototype[D].apply(x,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(l,C,b){b||(b=0);const x=Array(16);if(typeof C=="string")for(var D=0;D<16;++D)x[D]=C.charCodeAt(b++)|C.charCodeAt(b++)<<8|C.charCodeAt(b++)<<16|C.charCodeAt(b++)<<24;else for(D=0;D<16;++D)x[D]=C[b++]|C[b++]<<8|C[b++]<<16|C[b++]<<24;C=l.g[0],b=l.g[1],D=l.g[2];let M=l.g[3],A;A=C+(M^b&(D^M))+x[0]+3614090360&4294967295,C=b+(A<<7&4294967295|A>>>25),A=M+(D^C&(b^D))+x[1]+3905402710&4294967295,M=C+(A<<12&4294967295|A>>>20),A=D+(b^M&(C^b))+x[2]+606105819&4294967295,D=M+(A<<17&4294967295|A>>>15),A=b+(C^D&(M^C))+x[3]+3250441966&4294967295,b=D+(A<<22&4294967295|A>>>10),A=C+(M^b&(D^M))+x[4]+4118548399&4294967295,C=b+(A<<7&4294967295|A>>>25),A=M+(D^C&(b^D))+x[5]+1200080426&4294967295,M=C+(A<<12&4294967295|A>>>20),A=D+(b^M&(C^b))+x[6]+2821735955&4294967295,D=M+(A<<17&4294967295|A>>>15),A=b+(C^D&(M^C))+x[7]+4249261313&4294967295,b=D+(A<<22&4294967295|A>>>10),A=C+(M^b&(D^M))+x[8]+1770035416&4294967295,C=b+(A<<7&4294967295|A>>>25),A=M+(D^C&(b^D))+x[9]+2336552879&4294967295,M=C+(A<<12&4294967295|A>>>20),A=D+(b^M&(C^b))+x[10]+4294925233&4294967295,D=M+(A<<17&4294967295|A>>>15),A=b+(C^D&(M^C))+x[11]+2304563134&4294967295,b=D+(A<<22&4294967295|A>>>10),A=C+(M^b&(D^M))+x[12]+1804603682&4294967295,C=b+(A<<7&4294967295|A>>>25),A=M+(D^C&(b^D))+x[13]+4254626195&4294967295,M=C+(A<<12&4294967295|A>>>20),A=D+(b^M&(C^b))+x[14]+2792965006&4294967295,D=M+(A<<17&4294967295|A>>>15),A=b+(C^D&(M^C))+x[15]+1236535329&4294967295,b=D+(A<<22&4294967295|A>>>10),A=C+(D^M&(b^D))+x[1]+4129170786&4294967295,C=b+(A<<5&4294967295|A>>>27),A=M+(b^D&(C^b))+x[6]+3225465664&4294967295,M=C+(A<<9&4294967295|A>>>23),A=D+(C^b&(M^C))+x[11]+643717713&4294967295,D=M+(A<<14&4294967295|A>>>18),A=b+(M^C&(D^M))+x[0]+3921069994&4294967295,b=D+(A<<20&4294967295|A>>>12),A=C+(D^M&(b^D))+x[5]+3593408605&4294967295,C=b+(A<<5&4294967295|A>>>27),A=M+(b^D&(C^b))+x[10]+38016083&4294967295,M=C+(A<<9&4294967295|A>>>23),A=D+(C^b&(M^C))+x[15]+3634488961&4294967295,D=M+(A<<14&4294967295|A>>>18),A=b+(M^C&(D^M))+x[4]+3889429448&4294967295,b=D+(A<<20&4294967295|A>>>12),A=C+(D^M&(b^D))+x[9]+568446438&4294967295,C=b+(A<<5&4294967295|A>>>27),A=M+(b^D&(C^b))+x[14]+3275163606&4294967295,M=C+(A<<9&4294967295|A>>>23),A=D+(C^b&(M^C))+x[3]+4107603335&4294967295,D=M+(A<<14&4294967295|A>>>18),A=b+(M^C&(D^M))+x[8]+1163531501&4294967295,b=D+(A<<20&4294967295|A>>>12),A=C+(D^M&(b^D))+x[13]+2850285829&4294967295,C=b+(A<<5&4294967295|A>>>27),A=M+(b^D&(C^b))+x[2]+4243563512&4294967295,M=C+(A<<9&4294967295|A>>>23),A=D+(C^b&(M^C))+x[7]+1735328473&4294967295,D=M+(A<<14&4294967295|A>>>18),A=b+(M^C&(D^M))+x[12]+2368359562&4294967295,b=D+(A<<20&4294967295|A>>>12),A=C+(b^D^M)+x[5]+4294588738&4294967295,C=b+(A<<4&4294967295|A>>>28),A=M+(C^b^D)+x[8]+2272392833&4294967295,M=C+(A<<11&4294967295|A>>>21),A=D+(M^C^b)+x[11]+1839030562&4294967295,D=M+(A<<16&4294967295|A>>>16),A=b+(D^M^C)+x[14]+4259657740&4294967295,b=D+(A<<23&4294967295|A>>>9),A=C+(b^D^M)+x[1]+2763975236&4294967295,C=b+(A<<4&4294967295|A>>>28),A=M+(C^b^D)+x[4]+1272893353&4294967295,M=C+(A<<11&4294967295|A>>>21),A=D+(M^C^b)+x[7]+4139469664&4294967295,D=M+(A<<16&4294967295|A>>>16),A=b+(D^M^C)+x[10]+3200236656&4294967295,b=D+(A<<23&4294967295|A>>>9),A=C+(b^D^M)+x[13]+681279174&4294967295,C=b+(A<<4&4294967295|A>>>28),A=M+(C^b^D)+x[0]+3936430074&4294967295,M=C+(A<<11&4294967295|A>>>21),A=D+(M^C^b)+x[3]+3572445317&4294967295,D=M+(A<<16&4294967295|A>>>16),A=b+(D^M^C)+x[6]+76029189&4294967295,b=D+(A<<23&4294967295|A>>>9),A=C+(b^D^M)+x[9]+3654602809&4294967295,C=b+(A<<4&4294967295|A>>>28),A=M+(C^b^D)+x[12]+3873151461&4294967295,M=C+(A<<11&4294967295|A>>>21),A=D+(M^C^b)+x[15]+530742520&4294967295,D=M+(A<<16&4294967295|A>>>16),A=b+(D^M^C)+x[2]+3299628645&4294967295,b=D+(A<<23&4294967295|A>>>9),A=C+(D^(b|~M))+x[0]+4096336452&4294967295,C=b+(A<<6&4294967295|A>>>26),A=M+(b^(C|~D))+x[7]+1126891415&4294967295,M=C+(A<<10&4294967295|A>>>22),A=D+(C^(M|~b))+x[14]+2878612391&4294967295,D=M+(A<<15&4294967295|A>>>17),A=b+(M^(D|~C))+x[5]+4237533241&4294967295,b=D+(A<<21&4294967295|A>>>11),A=C+(D^(b|~M))+x[12]+1700485571&4294967295,C=b+(A<<6&4294967295|A>>>26),A=M+(b^(C|~D))+x[3]+2399980690&4294967295,M=C+(A<<10&4294967295|A>>>22),A=D+(C^(M|~b))+x[10]+4293915773&4294967295,D=M+(A<<15&4294967295|A>>>17),A=b+(M^(D|~C))+x[1]+2240044497&4294967295,b=D+(A<<21&4294967295|A>>>11),A=C+(D^(b|~M))+x[8]+1873313359&4294967295,C=b+(A<<6&4294967295|A>>>26),A=M+(b^(C|~D))+x[15]+4264355552&4294967295,M=C+(A<<10&4294967295|A>>>22),A=D+(C^(M|~b))+x[6]+2734768916&4294967295,D=M+(A<<15&4294967295|A>>>17),A=b+(M^(D|~C))+x[13]+1309151649&4294967295,b=D+(A<<21&4294967295|A>>>11),A=C+(D^(b|~M))+x[4]+4149444226&4294967295,C=b+(A<<6&4294967295|A>>>26),A=M+(b^(C|~D))+x[11]+3174756917&4294967295,M=C+(A<<10&4294967295|A>>>22),A=D+(C^(M|~b))+x[2]+718787259&4294967295,D=M+(A<<15&4294967295|A>>>17),A=b+(M^(D|~C))+x[9]+3951481745&4294967295,l.g[0]=l.g[0]+C&4294967295,l.g[1]=l.g[1]+(D+(A<<21&4294967295|A>>>11))&4294967295,l.g[2]=l.g[2]+D&4294967295,l.g[3]=l.g[3]+M&4294967295}r.prototype.v=function(l,C){C===void 0&&(C=l.length);const b=C-this.blockSize,x=this.C;let D=this.h,M=0;for(;M<C;){if(D==0)for(;M<=b;)i(this,l,M),M+=this.blockSize;if(typeof l=="string"){for(;M<C;)if(x[D++]=l.charCodeAt(M++),D==this.blockSize){i(this,x),D=0;break}}else for(;M<C;)if(x[D++]=l[M++],D==this.blockSize){i(this,x),D=0;break}}this.h=D,this.o+=C},r.prototype.A=function(){var l=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);l[0]=128;for(var C=1;C<l.length-8;++C)l[C]=0;C=this.o*8;for(var b=l.length-8;b<l.length;++b)l[b]=C&255,C/=256;for(this.v(l),l=Array(16),C=0,b=0;b<4;++b)for(let x=0;x<32;x+=8)l[C++]=this.g[b]>>>x&255;return l};function a(l,C){var b=g;return Object.prototype.hasOwnProperty.call(b,l)?b[l]:b[l]=C(l)}function c(l,C){this.h=C;const b=[];let x=!0;for(let D=l.length-1;D>=0;D--){const M=l[D]|0;x&&M==C||(b[D]=M,x=!1)}this.g=b}var g={};function _(l){return-128<=l&&l<128?a(l,function(C){return new c([C|0],C<0?-1:0)}):new c([l|0],l<0?-1:0)}function T(l){if(isNaN(l)||!isFinite(l))return k;if(l<0)return Z(T(-l));const C=[];let b=1;for(let x=0;l>=b;x++)C[x]=l/b|0,b*=4294967296;return new c(C,0)}function S(l,C){if(l.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(l.charAt(0)=="-")return Z(S(l.substring(1),C));if(l.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=T(Math.pow(C,8));let x=k;for(let M=0;M<l.length;M+=8){var D=Math.min(8,l.length-M);const A=parseInt(l.substring(M,M+D),C);D<8?(D=T(Math.pow(C,D)),x=x.j(D).add(T(A))):(x=x.j(b),x=x.add(T(A)))}return x}var k=_(0),U=_(1),K=_(16777216);n=c.prototype,n.m=function(){if(X(this))return-Z(this).m();let l=0,C=1;for(let b=0;b<this.g.length;b++){const x=this.i(b);l+=(x>=0?x:4294967296+x)*C,C*=4294967296}return l},n.toString=function(l){if(l=l||10,l<2||36<l)throw Error("radix out of range: "+l);if(W(this))return"0";if(X(this))return"-"+Z(this).toString(l);const C=T(Math.pow(l,6));var b=this;let x="";for(;;){const D=Ue(b,C).g;b=Y(b,D.j(C));let M=((b.g.length>0?b.g[0]:b.h)>>>0).toString(l);if(b=D,W(b))return M+x;for(;M.length<6;)M="0"+M;x=M+x}},n.i=function(l){return l<0?0:l<this.g.length?this.g[l]:this.h};function W(l){if(l.h!=0)return!1;for(let C=0;C<l.g.length;C++)if(l.g[C]!=0)return!1;return!0}function X(l){return l.h==-1}n.l=function(l){return l=Y(this,l),X(l)?-1:W(l)?0:1};function Z(l){const C=l.g.length,b=[];for(let x=0;x<C;x++)b[x]=~l.g[x];return new c(b,~l.h).add(U)}n.abs=function(){return X(this)?Z(this):this},n.add=function(l){const C=Math.max(this.g.length,l.g.length),b=[];let x=0;for(let D=0;D<=C;D++){let M=x+(this.i(D)&65535)+(l.i(D)&65535),A=(M>>>16)+(this.i(D)>>>16)+(l.i(D)>>>16);x=A>>>16,M&=65535,A&=65535,b[D]=A<<16|M}return new c(b,b[b.length-1]&-2147483648?-1:0)};function Y(l,C){return l.add(Z(C))}n.j=function(l){if(W(this)||W(l))return k;if(X(this))return X(l)?Z(this).j(Z(l)):Z(Z(this).j(l));if(X(l))return Z(this.j(Z(l)));if(this.l(K)<0&&l.l(K)<0)return T(this.m()*l.m());const C=this.g.length+l.g.length,b=[];for(var x=0;x<2*C;x++)b[x]=0;for(x=0;x<this.g.length;x++)for(let D=0;D<l.g.length;D++){const M=this.i(x)>>>16,A=this.i(x)&65535,We=l.i(D)>>>16,sn=l.i(D)&65535;b[2*x+2*D]+=A*sn,Ae(b,2*x+2*D),b[2*x+2*D+1]+=M*sn,Ae(b,2*x+2*D+1),b[2*x+2*D+1]+=A*We,Ae(b,2*x+2*D+1),b[2*x+2*D+2]+=M*We,Ae(b,2*x+2*D+2)}for(l=0;l<C;l++)b[l]=b[2*l+1]<<16|b[2*l];for(l=C;l<2*C;l++)b[l]=0;return new c(b,0)};function Ae(l,C){for(;(l[C]&65535)!=l[C];)l[C+1]+=l[C]>>>16,l[C]&=65535,C++}function Se(l,C){this.g=l,this.h=C}function Ue(l,C){if(W(C))throw Error("division by zero");if(W(l))return new Se(k,k);if(X(l))return C=Ue(Z(l),C),new Se(Z(C.g),Z(C.h));if(X(C))return C=Ue(l,Z(C)),new Se(Z(C.g),C.h);if(l.g.length>30){if(X(l)||X(C))throw Error("slowDivide_ only works with positive integers.");for(var b=U,x=C;x.l(l)<=0;)b=tt(b),x=tt(x);var D=ze(b,1),M=ze(x,1);for(x=ze(x,2),b=ze(b,2);!W(x);){var A=M.add(x);A.l(l)<=0&&(D=D.add(b),M=A),x=ze(x,1),b=ze(b,1)}return C=Y(l,D.j(C)),new Se(D,C)}for(D=k;l.l(C)>=0;){for(b=Math.max(1,Math.floor(l.m()/C.m())),x=Math.ceil(Math.log(b)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),M=T(b),A=M.j(C);X(A)||A.l(l)>0;)b-=x,M=T(b),A=M.j(C);W(M)&&(M=U),D=D.add(M),l=Y(l,A)}return new Se(D,l)}n.B=function(l){return Ue(this,l).h},n.and=function(l){const C=Math.max(this.g.length,l.g.length),b=[];for(let x=0;x<C;x++)b[x]=this.i(x)&l.i(x);return new c(b,this.h&l.h)},n.or=function(l){const C=Math.max(this.g.length,l.g.length),b=[];for(let x=0;x<C;x++)b[x]=this.i(x)|l.i(x);return new c(b,this.h|l.h)},n.xor=function(l){const C=Math.max(this.g.length,l.g.length),b=[];for(let x=0;x<C;x++)b[x]=this.i(x)^l.i(x);return new c(b,this.h^l.h)};function tt(l){const C=l.g.length+1,b=[];for(let x=0;x<C;x++)b[x]=l.i(x)<<1|l.i(x-1)>>>31;return new c(b,l.h)}function ze(l,C){const b=C>>5;C%=32;const x=l.g.length-b,D=[];for(let M=0;M<x;M++)D[M]=C>0?l.i(M+b)>>>C|l.i(M+b+1)<<32-C:l.i(M+b);return new c(D,l.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,eh=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=T,c.fromString=S,Kn=c}).apply(typeof pc<"u"?pc:typeof self<"u"?self:typeof window<"u"?window:{});var Js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var th,Ki,nh,ao,Pa,rh,ih,sh;(function(){var n,e=Object.defineProperty;function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Js=="object"&&Js];for(var f=0;f<o.length;++f){var p=o[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(o,f){if(f)e:{var p=r;o=o.split(".");for(var E=0;E<o.length-1;E++){var O=o[E];if(!(O in p))break e;p=p[O]}o=o[o.length-1],E=p[o],f=f(E),f!=E&&f!=null&&e(p,o,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(o){return o||function(f){var p=[],E;for(E in f)Object.prototype.hasOwnProperty.call(f,E)&&p.push([E,f[E]]);return p}});var a=a||{},c=this||self;function g(o){var f=typeof o;return f=="object"&&o!=null||f=="function"}function _(o,f,p){return o.call.apply(o.bind,arguments)}function T(o,f,p){return T=_,T.apply(null,arguments)}function S(o,f){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),o.apply(this,E)}}function k(o,f){function p(){}p.prototype=f.prototype,o.Z=f.prototype,o.prototype=new p,o.prototype.constructor=o,o.Ob=function(E,O,V){for(var z=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)z[fe-2]=arguments[fe];return f.prototype[O].apply(E,z)}}var U=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function K(o){const f=o.length;if(f>0){const p=Array(f);for(let E=0;E<f;E++)p[E]=o[E];return p}return[]}function W(o,f){for(let E=1;E<arguments.length;E++){const O=arguments[E];var p=typeof O;if(p=p!="object"?p:O?Array.isArray(O)?"array":p:"null",p=="array"||p=="object"&&typeof O.length=="number"){p=o.length||0;const V=O.length||0;o.length=p+V;for(let z=0;z<V;z++)o[p+z]=O[z]}else o.push(O)}}class X{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function Z(o){c.setTimeout(()=>{throw o},0)}function Y(){var o=l;let f=null;return o.g&&(f=o.g,o.g=o.g.next,o.g||(o.h=null),f.next=null),f}class Ae{constructor(){this.h=this.g=null}add(f,p){const E=Se.get();E.set(f,p),this.h?this.h.next=E:this.g=E,this.h=E}}var Se=new X(()=>new Ue,o=>o.reset());class Ue{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let tt,ze=!1,l=new Ae,C=()=>{const o=Promise.resolve(void 0);tt=()=>{o.then(b)}};function b(){for(var o;o=Y();){try{o.h.call(o.g)}catch(p){Z(p)}var f=Se;f.j(o),f.h<100&&(f.h++,o.next=f.g,f.g=o)}ze=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(o,f){this.type=o,this.g=this.target=f,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,f=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const p=()=>{};c.addEventListener("test",p,f),c.removeEventListener("test",p,f)}catch{}return o})();function A(o){return/^[\s\xa0]*$/.test(o)}function We(o,f){D.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,f)}k(We,D),We.prototype.init=function(o,f){const p=this.type=o.type,E=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=f,f=o.relatedTarget,f||(p=="mouseover"?f=o.fromElement:p=="mouseout"&&(f=o.toElement)),this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var sn="closure_listenable_"+(Math.random()*1e6|0),Qo=0;function Pt(o,f,p,E,O){this.listener=o,this.proxy=null,this.src=f,this.type=p,this.capture=!!E,this.ha=O,this.key=++Qo,this.da=this.fa=!1}function wn(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function kt(o,f,p){for(const E in o)f.call(p,o[E],E,o)}function Ss(o,f){for(const p in o)f.call(void 0,o[p],p,o)}function pi(o){const f={};for(const p in o)f[p]=o[p];return f}const gi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nr(o,f){let p,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(p in E)o[p]=E[p];for(let V=0;V<gi.length;V++)p=gi[V],Object.prototype.hasOwnProperty.call(E,p)&&(o[p]=E[p])}}function nr(o){this.src=o,this.g={},this.h=0}nr.prototype.add=function(o,f,p,E,O){const V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);const z=yi(o,f,E,O);return z>-1?(f=o[z],p||(f.fa=!1)):(f=new Pt(f,this.src,V,!!E,O),f.fa=p,o.push(f)),f};function mi(o,f){const p=f.type;if(p in o.g){var E=o.g[p],O=Array.prototype.indexOf.call(E,f,void 0),V;(V=O>=0)&&Array.prototype.splice.call(E,O,1),V&&(wn(f),o.g[p].length==0&&(delete o.g[p],o.h--))}}function yi(o,f,p,E){for(let O=0;O<o.length;++O){const V=o[O];if(!V.da&&V.listener==f&&V.capture==!!p&&V.ha==E)return O}return-1}var _i="closure_lm_"+(Math.random()*1e6|0),vi={};function Ti(o,f,p,E,O){if(Array.isArray(f)){for(let V=0;V<f.length;V++)Ti(o,f[V],p,E,O);return null}return p=It(p),o&&o[sn]?o.J(f,p,g(E)?!!E.capture:!1,O):wt(o,f,p,!1,E,O)}function wt(o,f,p,E,O,V){if(!f)throw Error("Invalid event type");const z=g(O)?!!O.capture:!!O;let fe=rr(o);if(fe||(o[_i]=fe=new nr(o)),p=fe.add(f,p,E,z,V),p.proxy)return p;if(E=Xo(),p.proxy=E,E.src=o,E.listener=p,o.addEventListener)M||(O=z),O===void 0&&(O=!1),o.addEventListener(f.toString(),E,O);else if(o.attachEvent)o.attachEvent(Ei(f.toString()),E);else if(o.addListener&&o.removeListener)o.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Xo(){function o(p){return f.call(o.src,o.listener,p)}const f=Jo;return o}function on(o,f,p,E,O){if(Array.isArray(f))for(var V=0;V<f.length;V++)on(o,f[V],p,E,O);else E=g(E)?!!E.capture:!!E,p=It(p),o&&o[sn]?(o=o.i,V=String(f).toString(),V in o.g&&(f=o.g[V],p=yi(f,p,E,O),p>-1&&(wn(f[p]),Array.prototype.splice.call(f,p,1),f.length==0&&(delete o.g[V],o.h--)))):o&&(o=rr(o))&&(f=o.g[f.toString()],o=-1,f&&(o=yi(f,p,E,O)),(p=o>-1?f[o]:null)&&In(p))}function In(o){if(typeof o!="number"&&o&&!o.da){var f=o.src;if(f&&f[sn])mi(f.i,o);else{var p=o.type,E=o.proxy;f.removeEventListener?f.removeEventListener(p,E,o.capture):f.detachEvent?f.detachEvent(Ei(p),E):f.addListener&&f.removeListener&&f.removeListener(E),(p=rr(f))?(mi(p,o),p.h==0&&(p.src=null,f[_i]=null)):wn(o)}}}function Ei(o){return o in vi?vi[o]:vi[o]="on"+o}function Jo(o,f){if(o.da)o=!0;else{f=new We(f,this);const p=o.listener,E=o.ha||o.src;o.fa&&In(o),o=p.call(E,f)}return o}function rr(o){return o=o[_i],o instanceof nr?o:null}var An="__closure_events_fn_"+(Math.random()*1e9>>>0);function It(o){return typeof o=="function"?o:(o[An]||(o[An]=function(f){return o.handleEvent(f)}),o[An])}function Je(){x.call(this),this.i=new nr(this),this.M=this,this.G=null}k(Je,x),Je.prototype[sn]=!0,Je.prototype.removeEventListener=function(o,f,p,E){on(this,o,f,p,E)};function nt(o,f){var p,E=o.G;if(E)for(p=[];E;E=E.G)p.push(E);if(o=o.M,E=f.type||f,typeof f=="string")f=new D(f,o);else if(f instanceof D)f.target=f.target||o;else{var O=f;f=new D(E,o),Nr(f,O)}O=!0;let V,z;if(p)for(z=p.length-1;z>=0;z--)V=f.g=p[z],O=xr(V,E,!0,f)&&O;if(V=f.g=o,O=xr(V,E,!0,f)&&O,O=xr(V,E,!1,f)&&O,p)for(z=0;z<p.length;z++)V=f.g=p[z],O=xr(V,E,!1,f)&&O}Je.prototype.N=function(){if(Je.Z.N.call(this),this.i){var o=this.i;for(const f in o.g){const p=o.g[f];for(let E=0;E<p.length;E++)wn(p[E]);delete o.g[f],o.h--}}this.G=null},Je.prototype.J=function(o,f,p,E){return this.i.add(String(o),f,!1,p,E)},Je.prototype.K=function(o,f,p,E){return this.i.add(String(o),f,!0,p,E)};function xr(o,f,p,E){if(f=o.i.g[String(f)],!f)return!0;f=f.concat();let O=!0;for(let V=0;V<f.length;++V){const z=f[V];if(z&&!z.da&&z.capture==p){const fe=z.listener,Me=z.ha||z.src;z.fa&&mi(o.i,z),O=fe.call(Me,E)!==!1&&O}}return O&&!E.defaultPrevented}function At(o,f){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=T(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:c.setTimeout(o,f||0)}function bn(o){o.g=At(()=>{o.g=null,o.i&&(o.i=!1,bn(o))},o.l);const f=o.h;o.h=null,o.m.apply(null,f)}class ir extends x{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:bn(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function re(o){x.call(this),this.h=o,this.g={}}k(re,x);var rt=[];function Cs(o){kt(o.g,function(f,p){this.g.hasOwnProperty(p)&&In(f)},o),o.g={}}re.prototype.N=function(){re.Z.N.call(this),Cs(this)},re.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wi=c.JSON.stringify,Yo=c.JSON.parse,Rs=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function Ii(){}function Sn(){}var gt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Dt(){D.call(this,"d")}k(Dt,D);function Ft(){D.call(this,"c")}k(Ft,D);var an={},sr=null;function or(){return sr=sr||new Je}an.Ia="serverreachability";function Ai(o){D.call(this,an.Ia,o)}k(Ai,D);function ar(o){const f=or();nt(f,new Ai(f))}an.STAT_EVENT="statevent";function un(o,f){D.call(this,an.STAT_EVENT,o),this.stat=f}k(un,D);function Be(o){const f=or();nt(f,new un(f,o))}an.Ja="timingevent";function bi(o,f){D.call(this,an.Ja,o),this.size=f}k(bi,D);function Cn(o,f){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},f)}function Ye(){this.g=!0}Ye.prototype.ua=function(){this.g=!1};function ut(o,f,p,E,O,V){o.info(function(){if(o.g)if(V){var z="",fe=V.split("&");for(let ye=0;ye<fe.length;ye++){var Me=fe[ye].split("=");if(Me.length>1){const Oe=Me[0];Me=Me[1];const qe=Oe.split("_");z=qe.length>=2&&qe[1]=="type"?z+(Oe+"="+Me+"&"):z+(Oe+"=redacted&")}}}else z=null;else z=V;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+f+`
`+p+`
`+z})}function Si(o,f,p,E,O,V,z){o.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+f+`
`+p+`
`+V+" "+z})}function Rn(o,f,p,E){o.info(function(){return"XMLHTTP TEXT ("+f+"): "+ks(o,p)+(E?" "+E:"")})}function Ps(o,f){o.info(function(){return"TIMEOUT: "+f})}Ye.prototype.info=function(){};function ks(o,f){if(!o.g)return f;if(!f)return null;try{const V=JSON.parse(f);if(V){for(o=0;o<V.length;o++)if(Array.isArray(V[o])){var p=V[o];if(!(p.length<2)){var E=p[1];if(Array.isArray(E)&&!(E.length<1)){var O=E[0];if(O!="noop"&&O!="stop"&&O!="close")for(let z=1;z<E.length;z++)E[z]=""}}}}return wi(V)}catch{return f}}var Nt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},cn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vr;function Pn(){}k(Pn,Ii),Pn.prototype.g=function(){return new XMLHttpRequest},Vr=new Pn;function ur(o){return encodeURIComponent(String(o))}function Zo(o){var f=1;o=o.split(":");const p=[];for(;f>0&&o.length;)p.push(o.shift()),f--;return o.length&&p.push(o.join(":")),p}function Ut(o,f,p,E){this.j=o,this.i=f,this.l=p,this.S=E||1,this.V=new re(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ci}function Ci(){this.i=null,this.g="",this.h=!1}var Ds={},Ri={};function Or(o,f,p){o.M=1,o.A=Nn(De(f)),o.u=p,o.R=!0,Ns(o,null)}function Ns(o,f){o.F=Date.now(),Dn(o),o.B=De(o.A);var p=o.B,E=o.S;Array.isArray(E)||(E=[String(E)]),Us(p.i,"t",E),o.C=0,p=o.j.L,o.h=new Ci,o.g=q(o.j,p?f:null,!o.u),o.P>0&&(o.O=new ir(T(o.Y,o,o.g),o.P)),f=o.V,p=o.g,E=o.ba;var O="readystatechange";Array.isArray(O)||(O&&(rt[0]=O.toString()),O=rt);for(let V=0;V<O.length;V++){const z=Ti(p,O[V],E||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=o.J?pi(o.J):{},o.u?(o.v||(o.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,f)):(o.v="GET",o.g.ea(o.B,o.v,null,f)),ar(),ut(o.i,o.v,o.B,o.l,o.S,o.u)}Ut.prototype.ba=function(o){o=o.target;const f=this.O;f&&Vt(o)==3?f.j():this.Y(o)},Ut.prototype.Y=function(o){try{if(o==this.g)e:{const fe=Vt(this.g),Me=this.g.ya(),ye=this.g.ca();if(!(fe<3)&&(fe!=3||this.g&&(this.h.h||this.g.la()||Hi(this.g)))){this.K||fe!=4||Me==7||(Me==8||ye<=0?ar(3):ar(2)),Mr(this);var f=this.g.ca();this.X=f;var p=kn(this);if(this.o=f==200,Si(this.i,this.v,this.B,this.l,this.S,fe,f),this.o){if(this.U&&!this.L){t:{if(this.g){var E,O=this.g;if((E=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(E)){var V=E;break t}}V=null}if(o=V)Rn(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Lr(this,o);else{this.o=!1,this.m=3,Be(12),vt(this),lr(this);break e}}if(this.R){o=!0;let Oe;for(;!this.K&&this.C<p.length;)if(Oe=ki(this,p),Oe==Ri){fe==4&&(this.m=4,Be(14),o=!1),Rn(this.i,this.l,null,"[Incomplete Response]");break}else if(Oe==Ds){this.m=4,Be(15),Rn(this.i,this.l,p,"[Invalid Chunk]"),o=!1;break}else Rn(this.i,this.l,Oe,null),Lr(this,Oe);if(Pi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fe!=4||p.length!=0||this.h.h||(this.m=1,Be(16),o=!1),this.o=this.o&&o,!o)Rn(this.i,this.l,p,"[Invalid Chunked Response]"),vt(this),lr(this);else if(p.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),d(z),z.P=!0,Be(11))}}else Rn(this.i,this.l,p,null),Lr(this,p);fe==4&&vt(this),this.o&&!this.K&&(fe==4?v(this.j,this):(this.o=!1,Dn(this)))}else $i(this.g),f==400&&p.indexOf("Unknown SID")>0?(this.m=3,Be(12)):(this.m=0,Be(13)),vt(this),lr(this)}}}catch{}finally{}};function kn(o){if(!Pi(o))return o.g.la();const f=Hi(o.g);if(f==="")return"";let p="";const E=f.length,O=Vt(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return vt(o),lr(o),"";o.h.i=new c.TextDecoder}for(let V=0;V<E;V++)o.h.h=!0,p+=o.h.i.decode(f[V],{stream:!(O&&V==E-1)});return f.length=0,o.h.g+=p,o.C=0,o.h.g}function Pi(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function ki(o,f){var p=o.C,E=f.indexOf(`
`,p);return E==-1?Ri:(p=Number(f.substring(p,E)),isNaN(p)?Ds:(E+=1,E+p>f.length?Ri:(f=f.slice(E,E+p),o.C=E+p,f)))}Ut.prototype.cancel=function(){this.K=!0,vt(this)};function Dn(o){o.T=Date.now()+o.H,cr(o,o.H)}function cr(o,f){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Cn(T(o.aa,o),f)}function Mr(o){o.D&&(c.clearTimeout(o.D),o.D=null)}Ut.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(Ps(this.i,this.B),this.M!=2&&(ar(),Be(17)),vt(this),this.m=2,lr(this)):cr(this,this.T-o)};function lr(o){o.j.I==0||o.K||v(o.j,o)}function vt(o){Mr(o);var f=o.O;f&&typeof f.dispose=="function"&&f.dispose(),o.O=null,Cs(o.V),o.g&&(f=o.g,o.g=null,f.abort(),f.dispose())}function Lr(o,f){try{var p=o.j;if(p.I!=0&&(p.g==o||hr(p.h,o))){if(!o.L&&hr(p.h,o)&&p.I==3){try{var E=p.Ba.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<o.F)y(p),zt(p);else break e;h(p),Be(18)}}else p.xa=O[1],0<p.xa-p.K&&O[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=Cn(T(p.Va,p),6e3));Vs(p.h)<=1&&p.ta&&(p.ta=void 0)}else I(p,11)}else if((o.L||p.g==o)&&y(p),!A(f))for(O=p.Ba.g.parse(f),f=0;f<O.length;f++){let ye=O[f];const Oe=ye[0];if(!(Oe<=p.K))if(p.K=Oe,ye=ye[1],p.I==2)if(ye[0]=="c"){p.M=ye[1],p.ba=ye[2];const qe=ye[3];qe!=null&&(p.ka=qe,p.j.info("VER="+p.ka));const ct=ye[4];ct!=null&&(p.za=ct,p.j.info("SVER="+p.za));const it=ye[5];it!=null&&typeof it=="number"&&it>0&&(E=1.5*it,p.O=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;const He=o.g;if(He){const Ln=He.g?He.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ln){var V=E.h;V.g||Ln.indexOf("spdy")==-1&&Ln.indexOf("quic")==-1&&Ln.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(xi(V,V.h),V.h=null))}if(E.G){const Et=He.g?He.g.getResponseHeader("X-HTTP-Session-Id"):null;Et&&(E.wa=Et,Pe(E.J,E.G,Et))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-o.F,p.j.info("Handshake RTT: "+p.T+"ms")),E=p;var z=o;if(E.na=B(E,E.L?E.ba:null,E.W),z.L){Os(E.h,z);var fe=z,Me=E.O;Me&&(fe.H=Me),fe.D&&(Mr(fe),Dn(fe)),E.g=z}else u(E);p.i.length>0&&Mn(p)}else ye[0]!="stop"&&ye[0]!="close"||I(p,7);else p.I==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?I(p,7):zi(p):ye[0]!="noop"&&p.l&&p.l.qa(ye),p.A=0)}}ar(4)}catch{}}var xs=class{constructor(o,f){this.g=o,this.map=f}};function Di(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ni(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Vs(o){return o.h?1:o.g?o.g.size:0}function hr(o,f){return o.h?o.h==f:o.g?o.g.has(f):!1}function xi(o,f){o.g?o.g.add(f):o.h=f}function Os(o,f){o.h&&o.h==f?o.h=null:o.g&&o.g.has(f)&&o.g.delete(f)}Di.prototype.cancel=function(){if(this.i=Vi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Vi(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let f=o.i;for(const p of o.g.values())f=f.concat(p.G);return f}return K(o.i)}var Oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mi(o,f){if(o){o=o.split("&");for(let p=0;p<o.length;p++){const E=o[p].indexOf("=");let O,V=null;E>=0?(O=o[p].substring(0,E),V=o[p].substring(E+1)):O=o[p],f(O,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function xt(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;o instanceof xt?(this.l=o.l,bt(this,o.j),this.o=o.o,this.g=o.g,jt(this,o.u),this.h=o.h,Li(this,Vn(o.i)),this.m=o.m):o&&(f=String(o).match(Oi))?(this.l=!1,bt(this,f[1]||"",!0),this.o=xn(f[2]||""),this.g=xn(f[3]||"",!0),jt(this,f[4]),this.h=xn(f[5]||"",!0),Li(this,f[6]||"",!0),this.m=xn(f[7]||"")):(this.l=!1,this.i=new dr(null,this.l))}xt.prototype.toString=function(){const o=[];var f=this.j;f&&o.push(Bt(f,Ls,!0),":");var p=this.g;return(p||f=="file")&&(o.push("//"),(f=this.o)&&o.push(Bt(f,Ls,!0),"@"),o.push(ur(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&o.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&o.push("/"),o.push(Bt(p,p.charAt(0)=="/"?Tt:ea,!0))),(p=this.i.toString())&&o.push("?",p),(p=this.m)&&o.push("#",Bt(p,fr)),o.join("")},xt.prototype.resolve=function(o){const f=De(this);let p=!!o.j;p?bt(f,o.j):p=!!o.o,p?f.o=o.o:p=!!o.g,p?f.g=o.g:p=o.u!=null;var E=o.h;if(p)jt(f,o.u);else if(p=!!o.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var O=f.h.lastIndexOf("/");O!=-1&&(E=f.h.slice(0,O+1)+E)}if(O=E,O==".."||O==".")E="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){E=O.lastIndexOf("/",0)==0,O=O.split("/");const V=[];for(let z=0;z<O.length;){const fe=O[z++];fe=="."?E&&z==O.length&&V.push(""):fe==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),E&&z==O.length&&V.push("")):(V.push(fe),E=!0)}E=V.join("/")}else E=O}return p?f.h=E:p=o.i.toString()!=="",p?Li(f,Vn(o.i)):p=!!o.m,p&&(f.m=o.m),f};function De(o){return new xt(o)}function bt(o,f,p){o.j=p?xn(f,!0):f,o.j&&(o.j=o.j.replace(/:$/,""))}function jt(o,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);o.u=f}else o.u=null}function Li(o,f,p){f instanceof dr?(o.i=f,Fi(o.i,o.l)):(p||(f=Bt(f,Fs)),o.i=new dr(f,o.l))}function Pe(o,f,p){o.i.set(f,p)}function Nn(o){return Pe(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function xn(o,f){return o?f?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Bt(o,f,p){return typeof o=="string"?(o=encodeURI(o).replace(f,Ms),p&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Ms(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Ls=/[#\/\?@]/g,ea=/[#\?:]/g,Tt=/[#\?]/g,Fs=/[#\?@]/g,fr=/#/g;function dr(o,f){this.h=this.g=null,this.i=o||null,this.j=!!f}function ln(o){o.g||(o.g=new Map,o.h=0,o.i&&Mi(o.i,function(f,p){o.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}n=dr.prototype,n.add=function(o,f){ln(this),this.i=null,o=hn(this,o);let p=this.g.get(o);return p||this.g.set(o,p=[]),p.push(f),this.h+=1,this};function qt(o,f){ln(o),f=hn(o,f),o.g.has(f)&&(o.i=null,o.h-=o.g.get(f).length,o.g.delete(f))}function Ht(o,f){return ln(o),f=hn(o,f),o.g.has(f)}n.forEach=function(o,f){ln(this),this.g.forEach(function(p,E){p.forEach(function(O){o.call(f,O,E,this)},this)},this)};function Fr(o,f){ln(o);let p=[];if(typeof f=="string")Ht(o,f)&&(p=p.concat(o.g.get(hn(o,f))));else for(o=Array.from(o.g.values()),f=0;f<o.length;f++)p=p.concat(o[f]);return p}n.set=function(o,f){return ln(this),this.i=null,o=hn(this,o),Ht(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[f]),this.h+=1,this},n.get=function(o,f){return o?(o=Fr(this,o),o.length>0?String(o[0]):f):f};function Us(o,f,p){qt(o,f),p.length>0&&(o.i=null,o.g.set(hn(o,f),K(p)),o.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],f=Array.from(this.g.keys());for(let E=0;E<f.length;E++){var p=f[E];const O=ur(p);p=Fr(this,p);for(let V=0;V<p.length;V++){let z=O;p[V]!==""&&(z+="="+ur(p[V])),o.push(z)}}return this.i=o.join("&")};function Vn(o){const f=new dr;return f.i=o.i,o.g&&(f.g=new Map(o.g),f.h=o.h),f}function hn(o,f){return f=String(f),o.j&&(f=f.toLowerCase()),f}function Fi(o,f){f&&!o.j&&(ln(o),o.i=null,o.g.forEach(function(p,E){const O=E.toLowerCase();E!=O&&(qt(this,E),Us(this,O,p))},o)),o.j=f}function js(o,f){const p=new Ye;if(c.Image){const E=new Image;E.onload=S($t,p,"TestLoadImage: loaded",!0,f,E),E.onerror=S($t,p,"TestLoadImage: error",!1,f,E),E.onabort=S($t,p,"TestLoadImage: abort",!1,f,E),E.ontimeout=S($t,p,"TestLoadImage: timeout",!1,f,E),c.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=o}else f(!1)}function Bs(o,f){const p=new Ye,E=new AbortController,O=setTimeout(()=>{E.abort(),$t(p,"TestPingServer: timeout",!1,f)},1e4);fetch(o,{signal:E.signal}).then(V=>{clearTimeout(O),V.ok?$t(p,"TestPingServer: ok",!0,f):$t(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),$t(p,"TestPingServer: error",!1,f)})}function $t(o,f,p,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(p)}catch{}}function qs(){this.g=new Rs}function Ui(o){this.i=o.Sb||null,this.h=o.ab||!1}k(Ui,Ii),Ui.prototype.g=function(){return new Ur(this.i,this.h)};function Ur(o,f){Je.call(this),this.H=o,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}k(Ur,Je),n=Ur.prototype,n.open=function(o,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=f,this.readyState=1,gr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(f.body=o),(this.H||c).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pr(this)),this.readyState=0},n.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jr(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function jr(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}n.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var f=o.value?o.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!o.done}))&&(this.response=this.responseText+=f)}o.done?pr(this):gr(this),this.readyState==3&&jr(this)}},n.Oa=function(o){this.g&&(this.response=this.responseText=o,pr(this))},n.Na=function(o){this.g&&(this.response=o,pr(this))},n.ga=function(){this.g&&pr(this)};function pr(o){o.readyState=4,o.l=null,o.j=null,o.B=null,gr(o)}n.setRequestHeader=function(o,f){this.A.append(o,f)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,o.push(p[0]+": "+p[1]),p=f.next();return o.join(`\r
`)};function gr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ur.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Hs(o){let f="";return kt(o,function(p,E){f+=E,f+=":",f+=p,f+=`\r
`}),f}function ji(o,f,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=Hs(p),typeof o=="string"?p!=null&&ur(p):Pe(o,f,p))}function xe(o){Je.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}k(xe,Je);var ta=/^https?$/i,na=["POST","PUT"];n=xe.prototype,n.Fa=function(o){this.H=o},n.ea=function(o,f,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);f=f?f.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vr.g(),this.g.onreadystatechange=U(T(this.Ca,this));try{this.B=!0,this.g.open(f,String(o),!0),this.B=!1}catch(V){Bi(this,V);return}if(o=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)p.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const V of E.keys())p.set(V,E.get(V));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(V=>V.toLowerCase()=="content-type"),O=c.FormData&&o instanceof c.FormData,!(Array.prototype.indexOf.call(na,f,void 0)>=0)||E||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of p)this.g.setRequestHeader(V,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(V){Bi(this,V)}};function Bi(o,f){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=f,o.o=5,Br(o),On(o)}function Br(o){o.A||(o.A=!0,nt(o,"complete"),nt(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,nt(this,"complete"),nt(this,"abort"),On(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),On(this,!0)),xe.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?qi(this):this.Xa())},n.Xa=function(){qi(this)};function qi(o){if(o.h&&typeof a<"u"){if(o.v&&Vt(o)==4)setTimeout(o.Ca.bind(o),0);else if(nt(o,"readystatechange"),Vt(o)==4){o.h=!1;try{const V=o.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var E;if(E=V===0){let z=String(o.D).match(Oi)[1]||null;!z&&c.self&&c.self.location&&(z=c.self.location.protocol.slice(0,-1)),E=!ta.test(z?z.toLowerCase():"")}p=E}if(p)nt(o,"complete"),nt(o,"success");else{o.o=6;try{var O=Vt(o)>2?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.ca()+"]",Br(o)}}finally{On(o)}}}}function On(o,f){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const p=o.g;o.g=null,f||nt(o,"ready");try{p.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Vt(o){return o.g?o.g.readyState:0}n.ca=function(){try{return Vt(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(o){if(this.g){var f=this.g.responseText;return o&&f.indexOf(o)==0&&(f=f.substring(o.length)),Yo(f)}};function Hi(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function $i(o){const f={};o=(o.g&&Vt(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<o.length;E++){if(A(o[E]))continue;var p=Zo(o[E]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const V=f[O]||[];f[O]=V,V.push(p)}Ss(f,function(E){return E.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function mr(o,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[o]||f}function $s(o){this.za=0,this.i=[],this.j=new Ye,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=mr("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=mr("baseRetryDelayMs",5e3,o),this.Za=mr("retryDelaySeedMs",1e4,o),this.Ta=mr("forwardChannelMaxRetries",2,o),this.va=mr("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Di(o&&o.concurrentRequestLimit),this.Ba=new qs,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=$s.prototype,n.ka=8,n.I=1,n.connect=function(o,f,p,E){Be(0),this.W=o,this.H=f||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.J=B(this,null,this.W),Mn(this)};function zi(o){if(Wi(o),o.I==3){var f=o.V++,p=De(o.J);if(Pe(p,"SID",o.M),Pe(p,"RID",f),Pe(p,"TYPE","terminate"),yr(o,p),f=new Ut(o,o.j,f),f.M=2,f.A=Nn(De(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(f.A.toString(),"")}catch{}!p&&c.Image&&(new Image().src=f.A,p=!0),p||(f.g=q(f.j,null),f.g.ea(f.A)),f.F=Date.now(),Dn(f)}N(o)}function zt(o){o.g&&(d(o),o.g.cancel(),o.g=null)}function Wi(o){zt(o),o.v&&(c.clearTimeout(o.v),o.v=null),y(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&c.clearTimeout(o.m),o.m=null)}function Mn(o){if(!Ni(o.h)&&!o.m){o.m=!0;var f=o.Ea;tt||C(),ze||(tt(),ze=!0),l.add(f,o),o.D=0}}function ra(o,f){return Vs(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=f.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Cn(T(o.Ea,o,f),R(o,o.D)),o.D++,!0)}n.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const O=new Ut(this,this.j,o);let V=this.o;if(this.U&&(V?(V=pi(V),Nr(V,this.U)):V=this.U),this.u!==null||this.R||(O.J=V,V=null),this.S)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,f>4096){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=s(this,O,f),p=De(this.J),Pe(p,"RID",o),Pe(p,"CVER",22),this.G&&Pe(p,"X-HTTP-Session-Id",this.G),yr(this,p),V&&(this.R?f="headers="+ur(Hs(V))+"&"+f:this.u&&ji(p,this.u,V)),xi(this.h,O),this.Ra&&Pe(p,"TYPE","init"),this.S?(Pe(p,"$req",f),Pe(p,"SID","null"),O.U=!0,Or(O,p,null)):Or(O,p,f),this.I=2}}else this.I==3&&(o?zs(this,o):this.i.length==0||Ni(this.h)||zs(this))};function zs(o,f){var p;f?p=f.l:p=o.V++;const E=De(o.J);Pe(E,"SID",o.M),Pe(E,"RID",p),Pe(E,"AID",o.K),yr(o,E),o.u&&o.o&&ji(E,o.u,o.o),p=new Ut(o,o.j,p,o.D+1),o.u===null&&(p.J=o.o),f&&(o.i=f.G.concat(o.i)),f=s(o,p,1e3),p.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),xi(o.h,p),Or(p,E,f)}function yr(o,f){o.H&&kt(o.H,function(p,E){Pe(f,E,p)}),o.l&&kt({},function(p,E){Pe(f,E,p)})}function s(o,f,p){p=Math.min(o.i.length,p);const E=o.l?T(o.l.Ka,o.l,o):null;e:{var O=o.i;let fe=-1;for(;;){const Me=["count="+p];fe==-1?p>0?(fe=O[0].g,Me.push("ofs="+fe)):fe=0:Me.push("ofs="+fe);let ye=!0;for(let Oe=0;Oe<p;Oe++){var V=O[Oe].g;const qe=O[Oe].map;if(V-=fe,V<0)fe=Math.max(0,O[Oe].g-100),ye=!1;else try{V="req"+V+"_"||"";try{var z=qe instanceof Map?qe:Object.entries(qe);for(const[ct,it]of z){let He=it;g(it)&&(He=wi(it)),Me.push(V+ct+"="+encodeURIComponent(He))}}catch(ct){throw Me.push(V+"type="+encodeURIComponent("_badmap")),ct}}catch{E&&E(qe)}}if(ye){z=Me.join("&");break e}}z=void 0}return o=o.i.splice(0,p),f.G=o,z}function u(o){if(!o.g&&!o.v){o.Y=1;var f=o.Da;tt||C(),ze||(tt(),ze=!0),l.add(f,o),o.A=0}}function h(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Cn(T(o.Da,o),R(o,o.A)),o.A++,!0)}n.Da=function(){if(this.v=null,m(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Cn(T(this.Wa,this),o)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Be(10),zt(this),m(this))};function d(o){o.B!=null&&(c.clearTimeout(o.B),o.B=null)}function m(o){o.g=new Ut(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var f=De(o.na);Pe(f,"RID","rpc"),Pe(f,"SID",o.M),Pe(f,"AID",o.K),Pe(f,"CI",o.F?"0":"1"),!o.F&&o.ia&&Pe(f,"TO",o.ia),Pe(f,"TYPE","xmlhttp"),yr(o,f),o.u&&o.o&&ji(f,o.u,o.o),o.O&&(o.g.H=o.O);var p=o.g;o=o.ba,p.M=1,p.A=Nn(De(f)),p.u=null,p.R=!0,Ns(p,o)}n.Va=function(){this.C!=null&&(this.C=null,zt(this),h(this),Be(19))};function y(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function v(o,f){var p=null;if(o.g==f){y(o),d(o),o.g=null;var E=2}else if(hr(o.h,f))p=f.G,Os(o.h,f),E=1;else return;if(o.I!=0){if(f.o)if(E==1){p=f.u?f.u.length:0,f=Date.now()-f.F;var O=o.D;E=or(),nt(E,new bi(E,p)),Mn(o)}else u(o);else if(O=f.m,O==3||O==0&&f.X>0||!(E==1&&ra(o,f)||E==2&&h(o)))switch(p&&p.length>0&&(f=o.h,f.i=f.i.concat(p)),O){case 1:I(o,5);break;case 4:I(o,10);break;case 3:I(o,6);break;default:I(o,2)}}}function R(o,f){let p=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(p*=2),p*f}function I(o,f){if(o.j.info("Error code "+f),f==2){var p=T(o.bb,o),E=o.Ua;const O=!E;E=new xt(E||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||bt(E,"https"),Nn(E),O?js(E.toString(),p):Bs(E.toString(),p)}else Be(2);o.I=0,o.l&&o.l.pa(f),N(o),Wi(o)}n.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Be(2)):(this.j.info("Failed to ping google.com"),Be(1))};function N(o){if(o.I=0,o.ja=[],o.l){const f=Vi(o.h);(f.length!=0||o.i.length!=0)&&(W(o.ja,f),W(o.ja,o.i),o.h.i.length=0,K(o.i),o.i.length=0),o.l.oa()}}function B(o,f,p){var E=p instanceof xt?De(p):new xt(p);if(E.g!="")f&&(E.g=f+"."+E.g),jt(E,E.u);else{var O=c.location;E=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;const V=new xt(null);E&&bt(V,E),f&&(V.g=f),O&&jt(V,O),p&&(V.h=p),E=V}return p=o.G,f=o.wa,p&&f&&Pe(E,p,f),Pe(E,"VER",o.ka),yr(o,E),E}function q(o,f,p){if(f&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=o.Aa&&!o.ma?new xe(new Ui({ab:p})):new xe(o.ma),f.Fa(o.L),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function F(){}n=F.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Q(){}Q.prototype.g=function(o,f){return new ie(o,f)};function ie(o,f){Je.call(this),this.g=new $s(f),this.l=o,this.h=f&&f.messageUrlParams||null,o=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(o?o["X-WebChannel-Content-Type"]=f.messageContentType:o={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(o?o["X-WebChannel-Client-Profile"]=f.sa:o={"X-WebChannel-Client-Profile":f.sa}),this.g.U=o,(o=f&&f.Qb)&&!A(o)&&(this.g.u=o),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!A(f)&&(this.g.G=f,o=this.h,o!==null&&f in o&&(o=this.h,f in o&&delete o[f])),this.j=new Ve(this)}k(ie,Je),ie.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ie.prototype.close=function(){zi(this.g)},ie.prototype.o=function(o){var f=this.g;if(typeof o=="string"){var p={};p.__data__=o,o=p}else this.v&&(p={},p.__data__=wi(o),o=p);f.i.push(new xs(f.Ya++,o)),f.I==3&&Mn(f)},ie.prototype.N=function(){this.g.l=null,delete this.j,zi(this.g),delete this.g,ie.Z.N.call(this)};function _e(o){Dt.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var f=o.__sm__;if(f){e:{for(const p in f){o=p;break e}o=void 0}(this.i=o)&&(o=this.i,f=f!==null&&o in f?f[o]:void 0),this.data=f}else this.data=o}k(_e,Dt);function me(){Ft.call(this),this.status=1}k(me,Ft);function Ve(o){this.g=o}k(Ve,F),Ve.prototype.ra=function(){nt(this.g,"a")},Ve.prototype.qa=function(o){nt(this.g,new _e(o))},Ve.prototype.pa=function(o){nt(this.g,new me)},Ve.prototype.oa=function(){nt(this.g,"b")},Q.prototype.createWebChannel=Q.prototype.g,ie.prototype.send=ie.prototype.o,ie.prototype.open=ie.prototype.m,ie.prototype.close=ie.prototype.close,sh=function(){return new Q},ih=function(){return or()},rh=an,Pa={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Nt.NO_ERROR=0,Nt.TIMEOUT=8,Nt.HTTP_ERROR=6,ao=Nt,cn.COMPLETE="complete",nh=cn,Sn.EventType=gt,gt.OPEN="a",gt.CLOSE="b",gt.ERROR="c",gt.MESSAGE="d",Je.prototype.listen=Je.prototype.J,Ki=Sn,xe.prototype.listenOnce=xe.prototype.K,xe.prototype.getLastError=xe.prototype.Ha,xe.prototype.getLastErrorCode=xe.prototype.ya,xe.prototype.getStatus=xe.prototype.ca,xe.prototype.getResponseJson=xe.prototype.La,xe.prototype.getResponseText=xe.prototype.la,xe.prototype.send=xe.prototype.ea,xe.prototype.setWithCredentials=xe.prototype.Fa,th=xe}).apply(typeof Js<"u"?Js:typeof self<"u"?self:typeof window<"u"?window:{});const gc="@firebase/firestore",mc="4.9.2";class ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");let li="12.3.0";const Sr=new za("@firebase/firestore");function $r(){return Sr.logLevel}function ne(n,...e){if(Sr.logLevel<=Ee.DEBUG){const t=e.map(ru);Sr.debug(`Firestore (${li}): ${n}`,...t)}}function vn(n,...e){if(Sr.logLevel<=Ee.ERROR){const t=e.map(ru);Sr.error(`Firestore (${li}): ${n}`,...t)}}function ti(n,...e){if(Sr.logLevel<=Ee.WARN){const t=e.map(ru);Sr.warn(`Firestore (${li}): ${n}`,...t)}}function ru(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ce(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,oh(n,r,t)}function oh(n,e,t){let r=`FIRESTORE (${li}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw vn(r),new Error(r)}function Ce(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||oh(e,i,r)}function ge(n,e){return n}const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends En{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ah{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Am{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ft.UNAUTHENTICATED)))}shutdown(){}}class bm{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Sm{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ce(this.o===void 0,42304);let r=this.i;const i=_=>this.i!==r?(r=this.i,t(_)):Promise.resolve();let a=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Qn,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const _=a;e.enqueueRetryable((async()=>{await _.promise,await i(this.currentUser)}))},g=_=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((_=>g(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?g(_):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Qn)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string",31837,{l:r}),new ah(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new ft(e)}}class Cm{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Rm{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Cm(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pm{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ce(this.o===void 0,3512);const r=a=>{a.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,ne("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new yc(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ce(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new yc(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function km(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class iu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=km(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function we(n,e){return n<e?-1:n>e?1:0}function ka(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return ma(i)===ma(a)?we(i,a):ma(i)?1:-1}return we(n.length,e.length)}const Dm=55296,Nm=57343;function ma(n){const e=n.charCodeAt(0);return e>=Dm&&e<=Nm}function ni(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}const _c="__name__";class Gt{constructor(e,t,r){t===void 0?t=0:t>e.length&&ce(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ce(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Gt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gt?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Gt.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return we(e.length,t.length)}static compareSegments(e,t){const r=Gt.isNumericId(e),i=Gt.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Gt.extractNumericId(e).compare(Gt.extractNumericId(t)):ka(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Kn.fromString(e.substring(4,e.length-2))}}class Le extends Gt{construct(e,t,r){return new Le(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Le(t)}static emptyPath(){return new Le([])}}const xm=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends Gt{construct(e,t,r){return new ot(e,t,r)}static isValidIdentifier(e){return xm.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_c}static keyField(){return new ot([_c])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new oe(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const g=e[i];if(g==="\\"){if(i+1===e.length)throw new oe(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new oe(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else g==="`"?(c=!c,i++):g!=="."||c?(r+=g,i++):(a(),i++)}if(a(),c)throw new oe(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(t)}static emptyPath(){return new ot([])}}class ue{constructor(e){this.path=e}static fromPath(e){return new ue(Le.fromString(e))}static fromName(e){return new ue(Le.fromString(e).popFirst(5))}static empty(){return new ue(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Le.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new Le(e.slice()))}}function Vm(n,e,t){if(!t)throw new oe(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Om(n,e,t,r){if(e===!0&&r===!0)throw new oe(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vc(n){if(!ue.isDocumentKey(n))throw new oe(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uh(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function su(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ce(12329,{type:typeof n})}function as(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=su(n);throw new oe(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ke(n,e){const t={typeString:n};return e&&(t.value=e),t}function Es(n,e){if(!uh(n))throw new oe(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new oe(G.INVALID_ARGUMENT,t);return!0}const Tc=-62135596800,Ec=1e6;class Ne{static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Ec);return new Ne(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Tc)throw new oe(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ec}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Es(e,Ne._jsonSchema))return new Ne(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Tc;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ne._jsonSchemaVersion="firestore/timestamp/1.0",Ne._jsonSchema={type:Ke("string",Ne._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};class pe{static fromTimestamp(e){return new pe(e)}static min(){return new pe(new Ne(0,0))}static max(){return new pe(new Ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const us=-1;function Mm(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=pe.fromTimestamp(r===1e9?new Ne(t+1,0):new Ne(t,r));return new Xn(i,ue.empty(),e)}function Lm(n){return new Xn(n.readTime,n.key,us)}class Xn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Xn(pe.min(),ue.empty(),us)}static max(){return new Xn(pe.max(),ue.empty(),us)}}function Fm(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ue.comparator(n.documentKey,e.documentKey),t!==0?t:we(n.largestBatchId,e.largestBatchId))}const Um="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function hi(n){if(n.code!==G.FAILED_PRECONDITION||n.message!==Um)throw n;ne("LocalStore","Unexpectedly lost primary lease")}class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):$.reject(t)}static resolve(e){return new $(((t,r)=>{t(e)}))}static reject(e){return new $(((t,r)=>{r(e)}))}static waitFor(e){return new $(((t,r)=>{let i=0,a=0,c=!1;e.forEach((g=>{++i,g.next((()=>{++a,c&&a===i&&t()}),(_=>r(_)))})),c=!0,a===i&&t()}))}static or(e){let t=$.resolve(!1);for(const r of e)t=t.next((i=>i?$.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new $(((r,i)=>{const a=e.length,c=new Array(a);let g=0;for(let _=0;_<a;_++){const T=_;t(e[T]).next((S=>{c[T]=S,++g,g===a&&r(c)}),(S=>i(S)))}}))}static doWhile(e,t){return new $(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function Bm(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fi(n){return n.name==="IndexedDbTransactionError"}class Lo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Lo.ce=-1;const ou=-1;function Fo(n){return n==null}function wo(n){return n===0&&1/n==-1/0}function qm(n){return typeof n=="number"&&Number.isInteger(n)&&!wo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ch="";function Hm(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wc(e)),e=$m(n.get(t),e);return wc(e)}function $m(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case ch:t+="";break;default:t+=a}}return t}function wc(n){return n+ch+""}function Ic(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Rr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lh(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Fe{constructor(e,t){this.comparator=e,this.root=t||st.EMPTY}insert(e,t){return new Fe(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ys(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ys(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ys(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ys(this.root,e,this.comparator,!0)}}class Ys{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??st.RED,this.left=i??st.EMPTY,this.right=a??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new st(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return st.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ce(27949);return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw ce(57766)}get value(){throw ce(16141)}get color(){throw ce(16727)}get left(){throw ce(29726)}get right(){throw ce(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new st(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xe{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ac(this.data.getIterator())}getIteratorFrom(e){return new Ac(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xe(this.comparator);return t.data=e,t}}class Ac{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Lt{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Lt([])}unionWith(e){let t=new Xe(ot.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Lt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ni(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class hh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class at{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new hh("Invalid base64 string: "+a):a}})(e);return new at(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a})(e);return new at(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const zm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jn(n){if(Ce(!!n,39018),typeof n=="string"){let e=0;const t=zm.exec(n);if(Ce(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(n.seconds),nanos:$e(n.nanos)}}function $e(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Yn(n){return typeof n=="string"?at.fromBase64String(n):at.fromUint8Array(n)}const fh="server_timestamp",dh="__type__",ph="__previous_value__",gh="__local_write_time__";function au(n){return(n?.mapValue?.fields||{})[dh]?.stringValue===fh}function Uo(n){const e=n.mapValue.fields[ph];return au(e)?Uo(e):e}function cs(n){const e=Jn(n.mapValue.fields[gh].timestampValue);return new Ne(e.seconds,e.nanos)}class Wm{constructor(e,t,r,i,a,c,g,_,T,S){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=T,this.isUsingEmulator=S}}const Io="(default)";class ls{constructor(e,t){this.projectId=e,this.database=t||Io}static empty(){return new ls("","")}get isDefaultDatabase(){return this.database===Io}isEqual(e){return e instanceof ls&&e.projectId===this.projectId&&e.database===this.database}}const mh="__type__",Gm="__max__",Zs={mapValue:{}},yh="__vector__",Ao="value";function Zn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?au(n)?4:Qm(n)?9007199254740991:Km(n)?10:11:ce(28295,{value:n})}function nn(n,e){if(n===e)return!0;const t=Zn(n);if(t!==Zn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cs(n).isEqual(cs(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=Jn(i.timestampValue),g=Jn(a.timestampValue);return c.seconds===g.seconds&&c.nanos===g.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return Yn(i.bytesValue).isEqual(Yn(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return $e(i.geoPointValue.latitude)===$e(a.geoPointValue.latitude)&&$e(i.geoPointValue.longitude)===$e(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return $e(i.integerValue)===$e(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=$e(i.doubleValue),g=$e(a.doubleValue);return c===g?wo(c)===wo(g):isNaN(c)&&isNaN(g)}return!1})(n,e);case 9:return ni(n.arrayValue.values||[],e.arrayValue.values||[],nn);case 10:case 11:return(function(i,a){const c=i.mapValue.fields||{},g=a.mapValue.fields||{};if(Ic(c)!==Ic(g))return!1;for(const _ in c)if(c.hasOwnProperty(_)&&(g[_]===void 0||!nn(c[_],g[_])))return!1;return!0})(n,e);default:return ce(52216,{left:n})}}function hs(n,e){return(n.values||[]).find((t=>nn(t,e)))!==void 0}function ri(n,e){if(n===e)return 0;const t=Zn(n),r=Zn(e);if(t!==r)return we(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return we(n.booleanValue,e.booleanValue);case 2:return(function(a,c){const g=$e(a.integerValue||a.doubleValue),_=$e(c.integerValue||c.doubleValue);return g<_?-1:g>_?1:g===_?0:isNaN(g)?isNaN(_)?0:-1:1})(n,e);case 3:return bc(n.timestampValue,e.timestampValue);case 4:return bc(cs(n),cs(e));case 5:return ka(n.stringValue,e.stringValue);case 6:return(function(a,c){const g=Yn(a),_=Yn(c);return g.compareTo(_)})(n.bytesValue,e.bytesValue);case 7:return(function(a,c){const g=a.split("/"),_=c.split("/");for(let T=0;T<g.length&&T<_.length;T++){const S=we(g[T],_[T]);if(S!==0)return S}return we(g.length,_.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,c){const g=we($e(a.latitude),$e(c.latitude));return g!==0?g:we($e(a.longitude),$e(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Sc(n.arrayValue,e.arrayValue);case 10:return(function(a,c){const g=a.fields||{},_=c.fields||{},T=g[Ao]?.arrayValue,S=_[Ao]?.arrayValue,k=we(T?.values?.length||0,S?.values?.length||0);return k!==0?k:Sc(T,S)})(n.mapValue,e.mapValue);case 11:return(function(a,c){if(a===Zs.mapValue&&c===Zs.mapValue)return 0;if(a===Zs.mapValue)return 1;if(c===Zs.mapValue)return-1;const g=a.fields||{},_=Object.keys(g),T=c.fields||{},S=Object.keys(T);_.sort(),S.sort();for(let k=0;k<_.length&&k<S.length;++k){const U=ka(_[k],S[k]);if(U!==0)return U;const K=ri(g[_[k]],T[S[k]]);if(K!==0)return K}return we(_.length,S.length)})(n.mapValue,e.mapValue);default:throw ce(23264,{he:t})}}function bc(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return we(n,e);const t=Jn(n),r=Jn(e),i=we(t.seconds,r.seconds);return i!==0?i:we(t.nanos,r.nanos)}function Sc(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=ri(t[i],r[i]);if(a)return a}return we(t.length,r.length)}function ii(n){return Da(n)}function Da(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Jn(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Yn(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ue.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Da(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const c of r)a?a=!1:i+=",",i+=`${c}:${Da(t.fields[c])}`;return i+"}"})(n.mapValue):ce(61005,{value:n})}function uo(n){switch(Zn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uo(n);return e?16+uo(e):16;case 5:return 2*n.stringValue.length;case 6:return Yn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+uo(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Rr(r.fields,((a,c)=>{i+=a.length+uo(c)})),i})(n.mapValue);default:throw ce(13486,{value:n})}}function Na(n){return!!n&&"integerValue"in n}function uu(n){return!!n&&"arrayValue"in n}function Cc(n){return!!n&&"nullValue"in n}function Rc(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function co(n){return!!n&&"mapValue"in n}function Km(n){return(n?.mapValue?.fields||{})[mh]?.stringValue===yh}function es(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Rr(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=es(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=es(n.arrayValue.values[t]);return e}return{...n}}function Qm(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Gm}class Ct{constructor(e){this.value=e}static empty(){return new Ct({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!co(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=es(t)}setAll(e){let t=ot.emptyPath(),r={},i=[];e.forEach(((c,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=g.popLast()}c?r[g.lastSegment()]=es(c):i.push(g.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());co(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];co(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Rr(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Ct(es(this.value))}}function _h(n){const e=[];return Rr(n.fields,((t,r)=>{const i=new ot([t]);if(co(r)){const a=_h(r.mapValue).fields;if(a.length===0)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)})),new Lt(e)}class dt{constructor(e,t,r,i,a,c,g){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=g}static newInvalidDocument(e){return new dt(e,0,pe.min(),pe.min(),pe.min(),Ct.empty(),0)}static newFoundDocument(e,t,r,i){return new dt(e,1,t,pe.min(),r,i,0)}static newNoDocument(e,t){return new dt(e,2,t,pe.min(),pe.min(),Ct.empty(),0)}static newUnknownDocument(e,t){return new dt(e,3,t,pe.min(),pe.min(),Ct.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class bo{constructor(e,t){this.position=e,this.inclusive=t}}function Pc(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(a.field.isKeyField()?r=ue.comparator(ue.fromName(c.referenceValue),t.key):r=ri(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function kc(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!nn(n.position[t],e.position[t]))return!1;return!0}class So{constructor(e,t="asc"){this.field=e,this.dir=t}}function Xm(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class vh{}class Qe extends vh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Ym(e,t,r):t==="array-contains"?new ty(e,r):t==="in"?new ny(e,r):t==="not-in"?new ry(e,r):t==="array-contains-any"?new iy(e,r):new Qe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Zm(e,r):new ey(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ri(t,this.value)):t!==null&&Zn(this.value)===Zn(t)&&this.matchesComparison(ri(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rn extends vh{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new rn(e,t)}matches(e){return Th(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Th(n){return n.op==="and"}function Eh(n){return Jm(n)&&Th(n)}function Jm(n){for(const e of n.filters)if(e instanceof rn)return!1;return!0}function xa(n){if(n instanceof Qe)return n.field.canonicalString()+n.op.toString()+ii(n.value);if(Eh(n))return n.filters.map((e=>xa(e))).join(",");{const e=n.filters.map((t=>xa(t))).join(",");return`${n.op}(${e})`}}function wh(n,e){return n instanceof Qe?(function(r,i){return i instanceof Qe&&r.op===i.op&&r.field.isEqual(i.field)&&nn(r.value,i.value)})(n,e):n instanceof rn?(function(r,i){return i instanceof rn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,c,g)=>a&&wh(c,i.filters[g])),!0):!1})(n,e):void ce(19439)}function Ih(n){return n instanceof Qe?(function(t){return`${t.field.canonicalString()} ${t.op} ${ii(t.value)}`})(n):n instanceof rn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Ih).join(" ,")+"}"})(n):"Filter"}class Ym extends Qe{constructor(e,t,r){super(e,t,r),this.key=ue.fromName(r.referenceValue)}matches(e){const t=ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class Zm extends Qe{constructor(e,t){super(e,"in",t),this.keys=Ah("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ey extends Qe{constructor(e,t){super(e,"not-in",t),this.keys=Ah("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Ah(n,e){return(e.arrayValue?.values||[]).map((t=>ue.fromName(t.referenceValue)))}class ty extends Qe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uu(t)&&hs(t.arrayValue,this.value)}}class ny extends Qe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hs(this.value.arrayValue,t)}}class ry extends Qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(hs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hs(this.value.arrayValue,t)}}class iy extends Qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>hs(this.value.arrayValue,r)))}}class sy{constructor(e,t=null,r=[],i=[],a=null,c=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=g,this.Te=null}}function Dc(n,e=null,t=[],r=[],i=null,a=null,c=null){return new sy(n,e,t,r,i,a,c)}function cu(n){const e=ge(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>xa(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Fo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ii(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ii(r))).join(",")),e.Te=t}return e.Te}function lu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Xm(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wh(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!kc(n.startAt,e.startAt)&&kc(n.endAt,e.endAt)}function Va(n){return ue.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class jo{constructor(e,t=null,r=[],i=[],a=null,c="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=g,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function oy(n,e,t,r,i,a,c,g){return new jo(n,e,t,r,i,a,c,g)}function hu(n){return new jo(n)}function Nc(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ay(n){return n.collectionGroup!==null}function ts(n){const e=ge(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let g=new Xe(ot.comparator);return c.filters.forEach((_=>{_.getFlattenedFilters().forEach((T=>{T.isInequality()&&(g=g.add(T.field))}))})),g})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new So(a,r))})),t.has(ot.keyField().canonicalString())||e.Ie.push(new So(ot.keyField(),r))}return e.Ie}function Jt(n){const e=ge(n);return e.Ee||(e.Ee=uy(e,ts(n))),e.Ee}function uy(n,e){if(n.limitType==="F")return Dc(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new So(i.field,a)}));const t=n.endAt?new bo(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new bo(n.startAt.position,n.startAt.inclusive):null;return Dc(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Oa(n,e,t){return new jo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bo(n,e){return lu(Jt(n),Jt(e))&&n.limitType===e.limitType}function bh(n){return`${cu(Jt(n))}|lt:${n.limitType}`}function zr(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>Ih(i))).join(", ")}]`),Fo(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>ii(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>ii(i))).join(",")),`Target(${r})`})(Jt(n))}; limitType=${n.limitType})`}function qo(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ue.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of ts(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(c,g,_){const T=Pc(c,g,_);return c.inclusive?T<=0:T<0})(r.startAt,ts(r),i)||r.endAt&&!(function(c,g,_){const T=Pc(c,g,_);return c.inclusive?T>=0:T>0})(r.endAt,ts(r),i))})(n,e)}function cy(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Sh(n){return(e,t)=>{let r=!1;for(const i of ts(n)){const a=ly(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function ly(n,e,t){const r=n.field.isKeyField()?ue.comparator(e.key,t.key):(function(a,c,g){const _=c.data.field(a),T=g.data.field(a);return _!==null&&T!==null?ri(_,T):ce(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ce(19790,{direction:n.dir})}}class Pr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Rr(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return lh(this.inner)}size(){return this.innerSize}}const hy=new Fe(ue.comparator);function Tn(){return hy}const Ch=new Fe(ue.comparator);function Qi(...n){let e=Ch;for(const t of n)e=e.insert(t.key,t);return e}function Rh(n){let e=Ch;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Tr(){return ns()}function Ph(){return ns()}function ns(){return new Pr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const fy=new Fe(ue.comparator),dy=new Xe(ue.comparator);function Ie(...n){let e=dy;for(const t of n)e=e.add(t);return e}const py=new Xe(we);function gy(){return py}function fu(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wo(e)?"-0":e}}function kh(n){return{integerValue:""+n}}function my(n,e){return qm(e)?kh(e):fu(n,e)}class Ho{constructor(){this._=void 0}}function yy(n,e,t){return n instanceof fs?(function(i,a){const c={fields:{[dh]:{stringValue:fh},[gh]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&au(a)&&(a=Uo(a)),a&&(c.fields[ph]=a),{mapValue:c}})(t,e):n instanceof ds?Nh(n,e):n instanceof ps?xh(n,e):(function(i,a){const c=Dh(i,a),g=xc(c)+xc(i.Ae);return Na(c)&&Na(i.Ae)?kh(g):fu(i.serializer,g)})(n,e)}function _y(n,e,t){return n instanceof ds?Nh(n,e):n instanceof ps?xh(n,e):t}function Dh(n,e){return n instanceof Co?(function(r){return Na(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class fs extends Ho{}class ds extends Ho{constructor(e){super(),this.elements=e}}function Nh(n,e){const t=Vh(e);for(const r of n.elements)t.some((i=>nn(i,r)))||t.push(r);return{arrayValue:{values:t}}}class ps extends Ho{constructor(e){super(),this.elements=e}}function xh(n,e){let t=Vh(e);for(const r of n.elements)t=t.filter((i=>!nn(i,r)));return{arrayValue:{values:t}}}class Co extends Ho{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function xc(n){return $e(n.integerValue||n.doubleValue)}function Vh(n){return uu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class vy{constructor(e,t){this.field=e,this.transform=t}}function Ty(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof ds&&i instanceof ds||r instanceof ps&&i instanceof ps?ni(r.elements,i.elements,nn):r instanceof Co&&i instanceof Co?nn(r.Ae,i.Ae):r instanceof fs&&i instanceof fs})(n.transform,e.transform)}class Ey{constructor(e,t){this.version=e,this.transformResults=t}}class gn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lo(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class $o{}function Oh(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Lh(n.key,gn.none()):new ws(n.key,n.data,gn.none());{const t=n.data,r=Ct.empty();let i=new Xe(ot.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),i=i.add(a)}return new kr(n.key,r,new Lt(i.toArray()),gn.none())}}function wy(n,e,t){n instanceof ws?(function(i,a,c){const g=i.value.clone(),_=Oc(i.fieldTransforms,a,c.transformResults);g.setAll(_),a.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(n,e,t):n instanceof kr?(function(i,a,c){if(!lo(i.precondition,a))return void a.convertToUnknownDocument(c.version);const g=Oc(i.fieldTransforms,a,c.transformResults),_=a.data;_.setAll(Mh(i)),_.setAll(g),a.convertToFoundDocument(c.version,_).setHasCommittedMutations()})(n,e,t):(function(i,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function rs(n,e,t,r){return n instanceof ws?(function(a,c,g,_){if(!lo(a.precondition,c))return g;const T=a.value.clone(),S=Mc(a.fieldTransforms,_,c);return T.setAll(S),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),null})(n,e,t,r):n instanceof kr?(function(a,c,g,_){if(!lo(a.precondition,c))return g;const T=Mc(a.fieldTransforms,_,c),S=c.data;return S.setAll(Mh(a)),S.setAll(T),c.convertToFoundDocument(c.version,S).setHasLocalMutations(),g===null?null:g.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((k=>k.field)))})(n,e,t,r):(function(a,c,g){return lo(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):g})(n,e,t)}function Iy(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Dh(r.transform,i||null);a!=null&&(t===null&&(t=Ct.empty()),t.set(r.field,a))}return t||null}function Vc(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ni(r,i,((a,c)=>Ty(a,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ws extends $o{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class kr extends $o{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Mh(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Oc(n,e,t){const r=new Map;Ce(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,g=e.data.field(a.field);r.set(a.field,_y(c,g,t[i]))}return r}function Mc(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,yy(a,c,e))}return r}class Lh extends $o{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ay extends $o{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class by{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&wy(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=rs(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=rs(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Ph();return this.mutations.forEach((i=>{const a=e.get(i.key),c=a.overlayedDocument;let g=this.applyToLocalView(c,a.mutatedFields);g=t.has(i.key)?null:g;const _=Oh(c,g);_!==null&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(pe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ie())}isEqual(e){return this.batchId===e.batchId&&ni(this.mutations,e.mutations,((t,r)=>Vc(t,r)))&&ni(this.baseMutations,e.baseMutations,((t,r)=>Vc(t,r)))}}class du{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return fy})();const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new du(e,t,r,i)}}class Sy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Cy{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ge,be;function Ry(n){switch(n){case G.OK:return ce(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return ce(15467,{code:n})}}function Fh(n){if(n===void 0)return vn("GRPC error has no .code"),G.UNKNOWN;switch(n){case Ge.OK:return G.OK;case Ge.CANCELLED:return G.CANCELLED;case Ge.UNKNOWN:return G.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return G.INTERNAL;case Ge.UNAVAILABLE:return G.UNAVAILABLE;case Ge.UNAUTHENTICATED:return G.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case Ge.NOT_FOUND:return G.NOT_FOUND;case Ge.ALREADY_EXISTS:return G.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return G.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case Ge.ABORTED:return G.ABORTED;case Ge.OUT_OF_RANGE:return G.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return G.UNIMPLEMENTED;case Ge.DATA_LOSS:return G.DATA_LOSS;default:return ce(39323,{code:n})}}(be=Ge||(Ge={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";function Py(){return new TextEncoder}const ky=new Kn([4294967295,4294967295],0);function Lc(n){const e=Py().encode(n),t=new eh;return t.update(e),new Uint8Array(t.digest())}function Fc(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Kn([t,r],0),new Kn([i,a],0)]}class pu{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Xi(`Invalid padding: ${t}`);if(r<0)throw new Xi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Xi(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Kn.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Kn.fromNumber(r)));return i.compare(ky)===1&&(i=new Kn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Lc(e),[r,i]=Fc(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);if(!this.we(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new pu(a,i,t);return r.forEach((g=>c.insert(g))),c}insert(e){if(this.ge===0)return;const t=Lc(e),[r,i]=Fc(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Xi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zo{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Is.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new zo(pe.min(),i,new Fe(we),Tn(),Ie())}}class Is{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Is(r,t,Ie(),Ie(),Ie())}}class ho{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class Uh{constructor(e,t){this.targetId=e,this.Ce=t}}class jh{constructor(e,t,r=at.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Uc{constructor(){this.ve=0,this.Fe=jc(),this.Me=at.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ie(),t=Ie(),r=Ie();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ce(38017,{changeType:a})}})),new Is(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=jc()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Dy{constructor(e){this.Ge=e,this.ze=new Map,this.je=Tn(),this.Je=eo(),this.He=eo(),this.Ye=new Fe(we)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(Va(a))if(r===0){const c=new ue(a.path);this.et(t,c,dt.newNoDocument(c,pe.min()))}else Ce(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const g=this.ut(e),_=g?this.ct(g,e,c):1;if(_!==0){this.it(t);const T=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,T)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let c,g;try{c=Yn(r).toUint8Array()}catch(_){if(_ instanceof hh)return ti("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{g=new pu(c,i,a)}catch(_){return ti(_ instanceof Xi?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return g.ge===0?null:g}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const c=this.Ge.ht(),g=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(g)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const g=this.ot(c);if(g){if(a.current&&Va(g.target)){const _=new ue(g.target.path);this.It(_).has(c)||this.Et(c,_)||this.et(c,_,dt.newNoDocument(_,e))}a.Be&&(t.set(c,a.ke()),a.qe())}}));let r=Ie();this.He.forEach(((a,c)=>{let g=!0;c.forEachWhile((_=>{const T=this.ot(_);return!T||T.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(r=r.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const i=new zo(e,t,this.Ye,this.je,r);return this.je=Tn(),this.Je=eo(),this.He=eo(),this.Ye=new Fe(we),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Uc,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Xe(we),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Xe(we),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ne("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Uc),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function eo(){return new Fe(ue.comparator)}function jc(){return new Fe(ue.comparator)}const Ny={asc:"ASCENDING",desc:"DESCENDING"},xy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vy={and:"AND",or:"OR"};class Oy{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ma(n,e){return n.useProto3Json||Fo(e)?e:{value:e}}function Ro(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bh(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function My(n,e){return Ro(n,e.toTimestamp())}function Yt(n){return Ce(!!n,49232),pe.fromTimestamp((function(t){const r=Jn(t);return new Ne(r.seconds,r.nanos)})(n))}function gu(n,e){return La(n,e).canonicalString()}function La(n,e){const t=(function(i){return new Le(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function qh(n){const e=Le.fromString(n);return Ce(Gh(e),10190,{key:e.toString()}),e}function Fa(n,e){return gu(n.databaseId,e.path)}function ya(n,e){const t=qh(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ue($h(t))}function Hh(n,e){return gu(n.databaseId,e)}function Ly(n){const e=qh(n);return e.length===4?Le.emptyPath():$h(e)}function Ua(n){return new Le(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $h(n){return Ce(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Bc(n,e,t){return{name:Fa(n,e),fields:t.value.mapValue.fields}}function Fy(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:ce(39313,{state:T})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(T,S){return T.useProto3Json?(Ce(S===void 0||typeof S=="string",58123),at.fromBase64String(S||"")):(Ce(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),at.fromUint8Array(S||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,g=c&&(function(T){const S=T.code===void 0?G.UNKNOWN:Fh(T.code);return new oe(S,T.message||"")})(c);t=new jh(r,i,a,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ya(n,r.document.name),a=Yt(r.document.updateTime),c=r.document.createTime?Yt(r.document.createTime):pe.min(),g=new Ct({mapValue:{fields:r.document.fields}}),_=dt.newFoundDocument(i,a,c,g),T=r.targetIds||[],S=r.removedTargetIds||[];t=new ho(T,S,_.key,_)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ya(n,r.document),a=r.readTime?Yt(r.readTime):pe.min(),c=dt.newNoDocument(i,a),g=r.removedTargetIds||[];t=new ho([],g,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ya(n,r.document),a=r.removedTargetIds||[];t=new ho([],a,i,null)}else{if(!("filter"in e))return ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,c=new Cy(i,a),g=r.targetId;t=new Uh(g,c)}}return t}function Uy(n,e){let t;if(e instanceof ws)t={update:Bc(n,e.key,e.value)};else if(e instanceof Lh)t={delete:Fa(n,e.key)};else if(e instanceof kr)t={update:Bc(n,e.key,e.data),updateMask:Ky(e.fieldMask)};else{if(!(e instanceof Ay))return ce(16599,{Vt:e.type});t={verify:Fa(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,c){const g=c.transform;if(g instanceof fs)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof ds)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof ps)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Co)return{fieldPath:c.field.canonicalString(),increment:g.Ae};throw ce(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:My(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ce(27497)})(n,e.precondition)),t}function jy(n,e){return n&&n.length>0?(Ce(e!==void 0,14353),n.map((t=>(function(i,a){let c=i.updateTime?Yt(i.updateTime):Yt(a);return c.isEqual(pe.min())&&(c=Yt(a)),new Ey(c,i.transformResults||[])})(t,e)))):[]}function By(n,e){return{documents:[Hh(n,e.path)]}}function qy(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Hh(n,i);const a=(function(T){if(T.length!==0)return Wh(rn.create(T,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(T){if(T.length!==0)return T.map((S=>(function(U){return{field:Wr(U.field),direction:zy(U.dir)}})(S)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const g=Ma(n,e.limit);return g!==null&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt=(function(T){return{before:T.inclusive,values:T.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(T){return{before:!T.inclusive,values:T.position}})(e.endAt)),{ft:t,parent:i}}function Hy(n){let e=Ly(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ce(r===1,65062);const S=t.from[0];S.allDescendants?i=S.collectionId:e=e.child(S.collectionId)}let a=[];t.where&&(a=(function(k){const U=zh(k);return U instanceof rn&&Eh(U)?U.getFilters():[U]})(t.where));let c=[];t.orderBy&&(c=(function(k){return k.map((U=>(function(W){return new So(Gr(W.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(U)))})(t.orderBy));let g=null;t.limit&&(g=(function(k){let U;return U=typeof k=="object"?k.value:k,Fo(U)?null:U})(t.limit));let _=null;t.startAt&&(_=(function(k){const U=!!k.before,K=k.values||[];return new bo(K,U)})(t.startAt));let T=null;return t.endAt&&(T=(function(k){const U=!k.before,K=k.values||[];return new bo(K,U)})(t.endAt)),oy(e,i,c,a,g,"F",_,T)}function $y(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function zh(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Gr(t.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Gr(t.unaryFilter.field);return Qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Gr(t.unaryFilter.field);return Qe.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Gr(t.unaryFilter.field);return Qe.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ce(61313);default:return ce(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Qe.create(Gr(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ce(58110);default:return ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return rn.create(t.compositeFilter.filters.map((r=>zh(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ce(1026)}})(t.compositeFilter.op))})(n):ce(30097,{filter:n})}function zy(n){return Ny[n]}function Wy(n){return xy[n]}function Gy(n){return Vy[n]}function Wr(n){return{fieldPath:n.canonicalString()}}function Gr(n){return ot.fromServerFormat(n.fieldPath)}function Wh(n){return n instanceof Qe?(function(t){if(t.op==="=="){if(Rc(t.value))return{unaryFilter:{field:Wr(t.field),op:"IS_NAN"}};if(Cc(t.value))return{unaryFilter:{field:Wr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Rc(t.value))return{unaryFilter:{field:Wr(t.field),op:"IS_NOT_NAN"}};if(Cc(t.value))return{unaryFilter:{field:Wr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wr(t.field),op:Wy(t.op),value:t.value}}})(n):n instanceof rn?(function(t){const r=t.getFilters().map((i=>Wh(i)));return r.length===1?r[0]:{compositeFilter:{op:Gy(t.op),filters:r}}})(n):ce(54877,{filter:n})}function Ky(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Gh(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class $n{constructor(e,t,r,i,a=pe.min(),c=pe.min(),g=at.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new $n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Qy{constructor(e){this.yt=e}}function Xy(n){const e=Hy({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Oa(e,e.limit,"L"):e}class Jy{constructor(){this.Cn=new Yy}addToCollectionParentIndex(e,t){return this.Cn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(Xn.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(Xn.min())}updateCollectionGroup(e,t,r){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class Yy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Xe(Le.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xe(Le.comparator)).toArray()}}const qc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kh=41943040;class _t{static withCacheSize(e){return new _t(e,_t.DEFAULT_COLLECTION_PERCENTILE,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}_t.DEFAULT_COLLECTION_PERCENTILE=10,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_t.DEFAULT=new _t(Kh,_t.DEFAULT_COLLECTION_PERCENTILE,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_t.DISABLED=new _t(-1,0,0);class si{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new si(0)}static cr(){return new si(-1)}}const Hc="LruGarbageCollector",Zy=1048576;function $c([n,e],[t,r]){const i=we(n,t);return i===0?we(e,r):i}class e_{constructor(e){this.Ir=e,this.buffer=new Xe($c),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();$c(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class t_{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ne(Hc,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){fi(t)?ne(Hc,"Ignoring IndexedDB error during garbage collection: ",t):await hi(t)}await this.Vr(3e5)}))}}class n_{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return $.resolve(Lo.ce);const r=new e_(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(qc)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qc):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,c,g,_,T;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((k=>(k>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),i=this.params.maximumSequenceNumbersToCollect):i=k,c=Date.now(),this.nthSequenceNumber(e,i)))).next((k=>(r=k,g=Date.now(),this.removeTargets(e,r,t)))).next((k=>(a=k,_=Date.now(),this.removeOrphanedDocuments(e,r)))).next((k=>(T=Date.now(),$r()<=Ee.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-S}ms
	Determined least recently used ${i} in `+(g-c)+`ms
	Removed ${a} targets in `+(_-g)+`ms
	Removed ${k} documents in `+(T-_)+`ms
Total Duration: ${T-S}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:k}))))}}function r_(n,e){return new n_(n,e)}class i_{constructor(){this.changes=new Pr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?$.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class s_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class o_{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&rs(r.mutation,i,Lt.empty(),Ne.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ie()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ie()){const i=Tr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let c=Qi();return a.forEach(((g,_)=>{c=c.insert(g,_.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Tr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ie())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((c,g)=>{t.set(c,g)}))}))}computeViews(e,t,r,i){let a=Tn();const c=ns(),g=(function(){return ns()})();return t.forEach(((_,T)=>{const S=r.get(T.key);i.has(T.key)&&(S===void 0||S.mutation instanceof kr)?a=a.insert(T.key,T):S!==void 0?(c.set(T.key,S.mutation.getFieldMask()),rs(S.mutation,T,S.mutation.getFieldMask(),Ne.now())):c.set(T.key,Lt.empty())})),this.recalculateAndSaveOverlays(e,a).next((_=>(_.forEach(((T,S)=>c.set(T,S))),t.forEach(((T,S)=>g.set(T,new s_(S,c.get(T)??null)))),g)))}recalculateAndSaveOverlays(e,t){const r=ns();let i=new Fe(((c,g)=>c-g)),a=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const g of c)g.keys().forEach((_=>{const T=t.get(_);if(T===null)return;let S=r.get(_)||Lt.empty();S=g.applyToLocalView(T,S),r.set(_,S);const k=(i.get(g.batchId)||Ie()).add(_);i=i.insert(g.batchId,k)}))})).next((()=>{const c=[],g=i.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),T=_.key,S=_.value,k=Ph();S.forEach((U=>{if(!a.has(U)){const K=Oh(t.get(U),r.get(U));K!==null&&k.set(U,K),a=a.add(U)}})),c.push(this.documentOverlayCache.saveOverlays(e,T,k))}return $.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(c){return ue.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ay(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):$.resolve(Tr());let g=us,_=a;return c.next((T=>$.forEach(T,((S,k)=>(g<k.largestBatchId&&(g=k.largestBatchId),a.get(S)?$.resolve():this.remoteDocumentCache.getEntry(e,S).next((U=>{_=_.insert(S,U)}))))).next((()=>this.populateOverlays(e,T,a))).next((()=>this.computeViews(e,_,T,Ie()))).next((S=>({batchId:g,changes:Rh(S)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ue(t)).next((r=>{let i=Qi();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let c=Qi();return this.indexManager.getCollectionParents(e,a).next((g=>$.forEach(g,(_=>{const T=(function(k,U){return new jo(U,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)})(t,_.child(a));return this.getDocumentsMatchingCollectionQuery(e,T,r,i).next((S=>{S.forEach(((k,U)=>{c=c.insert(k,U)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((c=>{a.forEach(((_,T)=>{const S=T.getKey();c.get(S)===null&&(c=c.insert(S,dt.newInvalidDocument(S)))}));let g=Qi();return c.forEach(((_,T)=>{const S=a.get(_);S!==void 0&&rs(S.mutation,T,Lt.empty(),Ne.now()),qo(t,T)&&(g=g.insert(_,T))})),g}))}}class a_{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return $.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Yt(i.createTime)}})(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:Xy(i.bundledQuery),readTime:Yt(i.readTime)}})(t)),$.resolve()}}class u_{constructor(){this.overlays=new Fe(ue.comparator),this.qr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Tr();return $.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),$.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),$.resolve()}getOverlaysForCollection(e,t,r){const i=Tr(),a=t.length+1,c=new ue(t.child("")),g=this.overlays.getIteratorFrom(c);for(;g.hasNext();){const _=g.getNext().value,T=_.getKey();if(!t.isPrefixOf(T.path))break;T.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return $.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Fe(((T,S)=>T-S));const c=this.overlays.getIterator();for(;c.hasNext();){const T=c.getNext().value;if(T.getKey().getCollectionGroup()===t&&T.largestBatchId>r){let S=a.get(T.largestBatchId);S===null&&(S=Tr(),a=a.insert(T.largestBatchId,S)),S.set(T.getKey(),T)}}const g=Tr(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((T,S)=>g.set(T,S))),!(g.size()>=i)););return $.resolve(g)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Sy(t,r));let a=this.qr.get(t);a===void 0&&(a=Ie(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}class c_{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}class mu{constructor(){this.Qr=new Xe(Ze.$r),this.Ur=new Xe(Ze.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Ze(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Ze(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ue(new Le([])),r=new Ze(t,e),i=new Ze(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(c=>{this.Gr(c),a.push(c.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ue(new Le([])),r=new Ze(t,e),i=new Ze(t,e+1);let a=Ie();return this.Ur.forEachInRange([r,i],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new Ze(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ze{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ue.comparator(e.key,t.key)||we(e.Yr,t.Yr)}static Kr(e,t){return we(e.Yr,t.Yr)||ue.comparator(e.key,t.key)}}class l_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Xe(Ze.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new by(a,t,r,i);this.mutationQueue.push(c);for(const g of i)this.Zr=this.Zr.add(new Ze(g.key,a)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return $.resolve(c)}lookupMutationBatch(e,t){return $.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return $.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?ou:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ze(t,0),i=new Ze(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(c=>{const g=this.Xr(c.Yr);a.push(g)})),$.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(we);return t.forEach((i=>{const a=new Ze(i,0),c=new Ze(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,c],(g=>{r=r.add(g.Yr)}))})),$.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ue.isDocumentKey(a)||(a=a.child(""));const c=new Ze(new ue(a),0);let g=new Xe(we);return this.Zr.forEachWhile((_=>{const T=_.key.path;return!!r.isPrefixOf(T)&&(T.length===i&&(g=g.add(_.Yr)),!0)}),c),$.resolve(this.ti(g))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Ce(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return $.forEach(t.mutations,(i=>{const a=new Ze(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Ze(t,0),i=this.Zr.firstAfterOrEqual(r);return $.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class h_{constructor(e){this.ri=e,this.docs=(function(){return new Fe(ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return $.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(t))}getEntries(e,t){let r=Tn();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():dt.newInvalidDocument(i))})),$.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Tn();const c=t.path,g=new ue(c.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:T,value:{document:S}}=_.getNext();if(!c.isPrefixOf(T.path))break;T.path.length>c.length+1||Fm(Lm(S),r)<=0||(i.has(S.key)||qo(t,S))&&(a=a.insert(S.key,S.mutableCopy()))}return $.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ce(9500)}ii(e,t){return $.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new f_(this)}getSize(e){return $.resolve(this.size)}}class f_ extends i_{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),$.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class d_{constructor(e){this.persistence=e,this.si=new Pr((t=>cu(t)),lu),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.oi=0,this._i=new mu,this.targetCount=0,this.ai=si.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),$.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new si(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Pr(t),$.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((c,g)=>{g.sequenceNumber<=t&&r.get(g.targetId)===null&&(this.si.delete(c),a.push(this.removeMatchingKeysForTargetId(e,g.targetId)),i++)})),$.waitFor(a).next((()=>i))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return $.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),$.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((c=>{a.push(i.markPotentiallyOrphaned(e,c))})),$.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return $.resolve(r)}containsKey(e,t){return $.resolve(this._i.containsKey(t))}}class Qh{constructor(e,t){this.ui={},this.overlays={},this.ci=new Lo(0),this.li=!1,this.li=!0,this.hi=new c_,this.referenceDelegate=e(this),this.Pi=new d_(this),this.indexManager=new Jy,this.remoteDocumentCache=(function(i){return new h_(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Qy(t),this.Ii=new a_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new u_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new l_(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ne("MemoryPersistence","Starting transaction:",e);const i=new p_(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return $.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class p_ extends jm{constructor(e){super(),this.currentSequenceNumber=e}}class yu{constructor(e){this.persistence=e,this.Ri=new mu,this.Vi=null}static mi(e){return new yu(e)}get fi(){if(this.Vi)return this.Vi;throw ce(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),$.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),$.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(r=>{const i=ue.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,pe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return $.or([()=>$.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Po{constructor(e,t){this.persistence=e,this.pi=new Pr((r=>Hm(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=r_(this,t)}static mi(e,t){return new Po(e,t)}Ei(){}di(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return $.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?$.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(c=>this.br(e,c,t).next((g=>{g||(r++,a.removeEntry(c,pe.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=uo(e.data.value)),t}br(e,t,r){return $.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return $.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class _u{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Ie(),i=Ie();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new _u(e,t.fromCache,r,i)}}class g_{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class m_{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return od()?8:Bm(pt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new g_;return this.Ss(e,t,c).next((g=>{if(a.result=g,this.Vs)return this.bs(e,t,c,g.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?($r()<=Ee.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",zr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):($r()<=Ee.DEBUG&&ne("QueryEngine","Query:",zr(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?($r()<=Ee.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",zr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jt(t))):$.resolve())}ys(e,t){if(Nc(t))return $.resolve(null);let r=Jt(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Oa(t,null,"F"),r=Jt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const c=Ie(...a);return this.ps.getDocuments(e,c).next((g=>this.indexManager.getMinOffset(e,r).next((_=>{const T=this.Ds(t,g);return this.Cs(t,T,c,_.readTime)?this.ys(e,Oa(t,null,"F")):this.vs(e,T,t,_)}))))})))))}ws(e,t,r,i){return Nc(t)||i.isEqual(pe.min())?$.resolve(null):this.ps.getDocuments(e,r).next((a=>{const c=this.Ds(t,a);return this.Cs(t,c,r,i)?$.resolve(null):($r()<=Ee.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zr(t)),this.vs(e,c,t,Mm(i,us)).next((g=>g)))}))}Ds(e,t){let r=new Xe(Sh(e));return t.forEach(((i,a)=>{qo(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return $r()<=Ee.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",zr(t)),this.ps.getDocumentsMatchingQuery(e,t,Xn.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}const vu="LocalStore",y_=3e8;class __{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Fe(we),this.xs=new Pr((a=>cu(a)),lu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o_(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function v_(n,e,t,r){return new __(n,e,t,r)}async function Xh(n,e){const t=ge(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const c=[],g=[];let _=Ie();for(const T of i){c.push(T.batchId);for(const S of T.mutations)_=_.add(S.key)}for(const T of a){g.push(T.batchId);for(const S of T.mutations)_=_.add(S.key)}return t.localDocuments.getDocuments(r,_).next((T=>({Ls:T,removedBatchIds:c,addedBatchIds:g})))}))}))}function T_(n,e){const t=ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,_,T,S){const k=T.batch,U=k.keys();let K=$.resolve();return U.forEach((W=>{K=K.next((()=>S.getEntry(_,W))).next((X=>{const Z=T.docVersions.get(W);Ce(Z!==null,48541),X.version.compareTo(Z)<0&&(k.applyToRemoteDocument(X,T),X.isValidDocument()&&(X.setReadTime(T.commitVersion),S.addEntry(X)))}))})),K.next((()=>g.mutationQueue.removeMutationBatch(_,k)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(g){let _=Ie();for(let T=0;T<g.mutationResults.length;++T)g.mutationResults[T].transformResults.length>0&&(_=_.add(g.batch.mutations[T].key));return _})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function Jh(n){const e=ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function E_(n,e){const t=ge(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const g=[];e.targetChanges.forEach(((S,k)=>{const U=i.get(k);if(!U)return;g.push(t.Pi.removeMatchingKeys(a,S.removedDocuments,k).next((()=>t.Pi.addMatchingKeys(a,S.addedDocuments,k))));let K=U.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(k)!==null?K=K.withResumeToken(at.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):S.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(S.resumeToken,r)),i=i.insert(k,K),(function(X,Z,Y){return X.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=y_?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(U,K,S)&&g.push(t.Pi.updateTargetData(a,K))}));let _=Tn(),T=Ie();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(a,S))})),g.push(w_(a,c,e.documentUpdates).next((S=>{_=S.ks,T=S.qs}))),!r.isEqual(pe.min())){const S=t.Pi.getLastRemoteSnapshotVersion(a).next((k=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));g.push(S)}return $.waitFor(g).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,_,T))).next((()=>_))})).then((a=>(t.Ms=i,a)))}function w_(n,e,t){let r=Ie(),i=Ie();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let c=Tn();return t.forEach(((g,_)=>{const T=a.get(g);_.isFoundDocument()!==T.isFoundDocument()&&(i=i.add(g)),_.isNoDocument()&&_.version.isEqual(pe.min())?(e.removeEntry(g,_.readTime),c=c.insert(g,_)):!T.isValidDocument()||_.version.compareTo(T.version)>0||_.version.compareTo(T.version)===0&&T.hasPendingWrites?(e.addEntry(_),c=c.insert(g,_)):ne(vu,"Ignoring outdated watch update for ",g,". Current version:",T.version," Watch version:",_.version)})),{ks:c,qs:i}}))}function I_(n,e){const t=ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ou),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function A_(n,e){const t=ge(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,$.resolve(i)):t.Pi.allocateTargetId(r).next((c=>(i=new $n(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function ja(n,e,t){const r=ge(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!fi(c))throw c;ne(vu,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function zc(n,e,t){const r=ge(n);let i=pe.min(),a=Ie();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(_,T,S){const k=ge(_),U=k.xs.get(S);return U!==void 0?$.resolve(k.Ms.get(U)):k.Pi.getTargetData(T,S)})(r,c,Jt(e)).next((g=>{if(g)return i=g.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,g.targetId).next((_=>{a=_}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?i:pe.min(),t?a:Ie()))).next((g=>(b_(r,cy(e),g),{documents:g,Qs:a})))))}function b_(n,e,t){let r=n.Os.get(e)||pe.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class Wc{constructor(){this.activeTargetIds=gy()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class S_{constructor(){this.Mo=new Wc,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Wc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class C_{Oo(e){}shutdown(){}}const Gc="ConnectivityMonitor";class Kc{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ne(Gc,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ne(Gc,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let to=null;function Ba(){return to===null?to=(function(){return 268435456+Math.round(2147483648*Math.random())})():to++,"0x"+to.toString(16)}const _a="RestConnection",R_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class P_{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Io?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const c=Ba(),g=this.zo(e,t.toUriEncodedString());ne(_a,`Sending RPC '${e}' ${c}:`,g,r);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,i,a);const{host:T}=new URL(g),S=ai(T);return this.Jo(e,g,_,r,S).then((k=>(ne(_a,`Received RPC '${e}' ${c}: `,k),k)),(k=>{throw ti(_a,`RPC '${e}' ${c} failed with error: `,k,"url: ",g,"request:",r),k}))}Ho(e,t,r,i,a,c){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+li})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=R_[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class k_{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ht="WebChannelConnection";class D_ extends P_{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const c=Ba();return new Promise(((g,_)=>{const T=new th;T.setWithCredentials(!0),T.listenOnce(nh.COMPLETE,(()=>{try{switch(T.getLastErrorCode()){case ao.NO_ERROR:const k=T.getResponseJson();ne(ht,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(k)),g(k);break;case ao.TIMEOUT:ne(ht,`RPC '${e}' ${c} timed out`),_(new oe(G.DEADLINE_EXCEEDED,"Request time out"));break;case ao.HTTP_ERROR:const U=T.getStatus();if(ne(ht,`RPC '${e}' ${c} failed with status:`,U,"response text:",T.getResponseText()),U>0){let K=T.getResponseJson();Array.isArray(K)&&(K=K[0]);const W=K?.error;if(W&&W.status&&W.message){const X=(function(Y){const Ae=Y.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(Ae)>=0?Ae:G.UNKNOWN})(W.status);_(new oe(X,W.message))}else _(new oe(G.UNKNOWN,"Server responded with status "+T.getStatus()))}else _(new oe(G.UNAVAILABLE,"Connection failed."));break;default:ce(9055,{l_:e,streamId:c,h_:T.getLastErrorCode(),P_:T.getLastError()})}}finally{ne(ht,`RPC '${e}' ${c} completed.`)}}));const S=JSON.stringify(i);ne(ht,`RPC '${e}' ${c} sending request:`,i),T.send(t,"POST",S,r,15)}))}T_(e,t,r){const i=Ba(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=sh(),g=ih(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},T=this.longPollingOptions.timeoutSeconds;T!==void 0&&(_.longPollingTimeout=Math.round(1e3*T)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const S=a.join("");ne(ht,`Creating RPC '${e}' stream ${i}: ${S}`,_);const k=c.createWebChannel(S,_);this.I_(k);let U=!1,K=!1;const W=new k_({Yo:Z=>{K?ne(ht,`Not sending because RPC '${e}' stream ${i} is closed:`,Z):(U||(ne(ht,`Opening RPC '${e}' stream ${i} transport.`),k.open(),U=!0),ne(ht,`RPC '${e}' stream ${i} sending:`,Z),k.send(Z))},Zo:()=>k.close()}),X=(Z,Y,Ae)=>{Z.listen(Y,(Se=>{try{Ae(Se)}catch(Ue){setTimeout((()=>{throw Ue}),0)}}))};return X(k,Ki.EventType.OPEN,(()=>{K||(ne(ht,`RPC '${e}' stream ${i} transport opened.`),W.o_())})),X(k,Ki.EventType.CLOSE,(()=>{K||(K=!0,ne(ht,`RPC '${e}' stream ${i} transport closed`),W.a_(),this.E_(k))})),X(k,Ki.EventType.ERROR,(Z=>{K||(K=!0,ti(ht,`RPC '${e}' stream ${i} transport errored. Name:`,Z.name,"Message:",Z.message),W.a_(new oe(G.UNAVAILABLE,"The operation could not be completed")))})),X(k,Ki.EventType.MESSAGE,(Z=>{if(!K){const Y=Z.data[0];Ce(!!Y,16349);const Ae=Y,Se=Ae?.error||Ae[0]?.error;if(Se){ne(ht,`RPC '${e}' stream ${i} received error:`,Se);const Ue=Se.status;let tt=(function(C){const b=Ge[C];if(b!==void 0)return Fh(b)})(Ue),ze=Se.message;tt===void 0&&(tt=G.INTERNAL,ze="Unknown error status: "+Ue+" with message "+Se.message),K=!0,W.a_(new oe(tt,ze)),k.close()}else ne(ht,`RPC '${e}' stream ${i} received:`,Y),W.u_(Y)}})),X(g,rh.STAT_EVENT,(Z=>{Z.stat===Pa.PROXY?ne(ht,`RPC '${e}' stream ${i} detected buffering proxy`):Z.stat===Pa.NOPROXY&&ne(ht,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function va(){return typeof document<"u"?document:null}function Wo(n){return new Oy(n,!0)}class Yh{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Qc="PersistentStream";class Zh{constructor(e,t,r,i,a,c,g,_){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Yh(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(vn(t.toString()),vn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new oe(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ne(Qc,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ne(Qc,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class N_ extends Zh{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Fy(this.serializer,e),r=(function(a){if(!("targetChange"in a))return pe.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?pe.min():c.readTime?Yt(c.readTime):pe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Ua(this.serializer),t.addTarget=(function(a,c){let g;const _=c.target;if(g=Va(_)?{documents:By(a,_)}:{query:qy(a,_).ft},g.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){g.resumeToken=Bh(a,c.resumeToken);const T=Ma(a,c.expectedCount);T!==null&&(g.expectedCount=T)}else if(c.snapshotVersion.compareTo(pe.min())>0){g.readTime=Ro(a,c.snapshotVersion.toTimestamp());const T=Ma(a,c.expectedCount);T!==null&&(g.expectedCount=T)}return g})(this.serializer,e);const r=$y(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Ua(this.serializer),t.removeTarget=e,this.q_(t)}}class x_ extends Zh{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=jy(e.writeResults,e.commitTime),r=Yt(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Ua(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Uy(this.serializer,r)))};this.q_(t)}}class V_{}class O_ extends V_{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new oe(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Go(e,La(t,r),i,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new oe(G.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,g])=>this.connection.Ho(e,La(t,r),i,c,g,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new oe(G.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class M_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vn(t),this.aa=!1):ne("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Cr="RemoteStore";class L_{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Dr(this)&&(ne(Cr,"Restarting streams for network reachability change."),await(async function(_){const T=ge(_);T.Ea.add(4),await As(T),T.Ra.set("Unknown"),T.Ea.delete(4),await Go(T)})(this))}))})),this.Ra=new M_(r,i)}}async function Go(n){if(Dr(n))for(const e of n.da)await e(!0)}async function As(n){for(const e of n.da)await e(!1)}function ef(n,e){const t=ge(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Iu(t)?wu(t):di(t).O_()&&Eu(t,e))}function Tu(n,e){const t=ge(n),r=di(t);t.Ia.delete(e),r.O_()&&tf(t,e),t.Ia.size===0&&(r.O_()?r.L_():Dr(t)&&t.Ra.set("Unknown"))}function Eu(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}di(n).Y_(e)}function tf(n,e){n.Va.Ue(e),di(n).Z_(e)}function wu(n){n.Va=new Dy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),di(n).start(),n.Ra.ua()}function Iu(n){return Dr(n)&&!di(n).x_()&&n.Ia.size>0}function Dr(n){return ge(n).Ea.size===0}function nf(n){n.Va=void 0}async function F_(n){n.Ra.set("Online")}async function U_(n){n.Ia.forEach(((e,t)=>{Eu(n,e)}))}async function j_(n,e){nf(n),Iu(n)?(n.Ra.ha(e),wu(n)):n.Ra.set("Unknown")}async function B_(n,e,t){if(n.Ra.set("Online"),e instanceof jh&&e.state===2&&e.cause)try{await(async function(i,a){const c=a.cause;for(const g of a.targetIds)i.Ia.has(g)&&(await i.remoteSyncer.rejectListen(g,c),i.Ia.delete(g),i.Va.removeTarget(g))})(n,e)}catch(r){ne(Cr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ko(n,r)}else if(e instanceof ho?n.Va.Ze(e):e instanceof Uh?n.Va.st(e):n.Va.tt(e),!t.isEqual(pe.min()))try{const r=await Jh(n.localStore);t.compareTo(r)>=0&&await(function(a,c){const g=a.Va.Tt(c);return g.targetChanges.forEach(((_,T)=>{if(_.resumeToken.approximateByteSize()>0){const S=a.Ia.get(T);S&&a.Ia.set(T,S.withResumeToken(_.resumeToken,c))}})),g.targetMismatches.forEach(((_,T)=>{const S=a.Ia.get(_);if(!S)return;a.Ia.set(_,S.withResumeToken(at.EMPTY_BYTE_STRING,S.snapshotVersion)),tf(a,_);const k=new $n(S.target,_,T,S.sequenceNumber);Eu(a,k)})),a.remoteSyncer.applyRemoteEvent(g)})(n,t)}catch(r){ne(Cr,"Failed to raise snapshot:",r),await ko(n,r)}}async function ko(n,e,t){if(!fi(e))throw e;n.Ea.add(1),await As(n),n.Ra.set("Offline"),t||(t=()=>Jh(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ne(Cr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Go(n)}))}function rf(n,e){return e().catch((t=>ko(n,t,e)))}async function Ko(n){const e=ge(n),t=er(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ou;for(;q_(e);)try{const i=await I_(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,H_(e,i)}catch(i){await ko(e,i)}sf(e)&&of(e)}function q_(n){return Dr(n)&&n.Ta.length<10}function H_(n,e){n.Ta.push(e);const t=er(n);t.O_()&&t.X_&&t.ea(e.mutations)}function sf(n){return Dr(n)&&!er(n).x_()&&n.Ta.length>0}function of(n){er(n).start()}async function $_(n){er(n).ra()}async function z_(n){const e=er(n);for(const t of n.Ta)e.ea(t.mutations)}async function W_(n,e,t){const r=n.Ta.shift(),i=du.from(r,e,t);await rf(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Ko(n)}async function G_(n,e){e&&er(n).X_&&await(async function(r,i){if((function(c){return Ry(c)&&c!==G.ABORTED})(i.code)){const a=r.Ta.shift();er(r).B_(),await rf(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Ko(r)}})(n,e),sf(n)&&of(n)}async function Xc(n,e){const t=ge(n);t.asyncQueue.verifyOperationInProgress(),ne(Cr,"RemoteStore received new credentials");const r=Dr(t);t.Ea.add(3),await As(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Go(t)}async function K_(n,e){const t=ge(n);e?(t.Ea.delete(2),await Go(t)):e||(t.Ea.add(2),await As(t),t.Ra.set("Unknown"))}function di(n){return n.ma||(n.ma=(function(t,r,i){const a=ge(t);return a.sa(),new N_(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:F_.bind(null,n),t_:U_.bind(null,n),r_:j_.bind(null,n),H_:B_.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Iu(n)?wu(n):n.Ra.set("Unknown")):(await n.ma.stop(),nf(n))}))),n.ma}function er(n){return n.fa||(n.fa=(function(t,r,i){const a=ge(t);return a.sa(),new x_(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:$_.bind(null,n),r_:G_.bind(null,n),ta:z_.bind(null,n),na:W_.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Ko(n)):(await n.fa.stop(),n.Ta.length>0&&(ne(Cr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Au{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,g=new Au(e,t,c,i,a);return g.start(r),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bu(n,e){if(vn("AsyncQueue",`${e}: ${n}`),fi(n))return new oe(G.UNAVAILABLE,`${e}: ${n}`);throw n}class Yr{static emptySet(e){return new Yr(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ue.comparator(t.key,r.key):(t,r)=>ue.comparator(t.key,r.key),this.keyedMap=Qi(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Yr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Jc{constructor(){this.ga=new Fe(ue.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class oi{constructor(e,t,r,i,a,c,g,_,T){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=T}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach((g=>{c.push({type:0,doc:g})})),new oi(e,t,Yr.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Q_{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class X_{constructor(){this.queries=Yc(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=ge(t),a=i.queries;i.queries=Yc(),a.forEach(((c,g)=>{for(const _ of g.Sa)_.onError(r)}))})(this,new oe(G.ABORTED,"Firestore shutting down"))}}function Yc(){return new Pr((n=>bh(n)),Bo)}async function J_(n,e){const t=ge(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new Q_,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const g=bu(c,`Initialization of query '${zr(e.query)}' failed`);return void e.onError(g)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Su(t)}async function Y_(n,e){const t=ge(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Z_(n,e){const t=ge(n);let r=!1;for(const i of e){const a=i.query,c=t.queries.get(a);if(c){for(const g of c.Sa)g.Fa(i)&&(r=!0);c.wa=i}}r&&Su(t)}function ev(n,e,t){const r=ge(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function Su(n){n.Ca.forEach((e=>{e.next()}))}var qa,Zc;(Zc=qa||(qa={})).Ma="default",Zc.Cache="cache";class tv{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new oi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=oi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==qa.Cache}}class af{constructor(e){this.key=e}}class uf{constructor(e){this.key=e}}class nv{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ie(),this.mutatedKeys=Ie(),this.eu=Sh(e),this.tu=new Yr(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Jc,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,g=!1;const _=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,T=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((S,k)=>{const U=i.get(S),K=qo(this.query,k)?k:null,W=!!U&&this.mutatedKeys.has(U.key),X=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let Z=!1;U&&K?U.data.isEqual(K.data)?W!==X&&(r.track({type:3,doc:K}),Z=!0):this.su(U,K)||(r.track({type:2,doc:K}),Z=!0,(_&&this.eu(K,_)>0||T&&this.eu(K,T)<0)&&(g=!0)):!U&&K?(r.track({type:0,doc:K}),Z=!0):U&&!K&&(r.track({type:1,doc:U}),Z=!0,(_||T)&&(g=!0)),Z&&(K?(c=c.add(K),a=X?a.add(S):a.delete(S)):(c=c.delete(S),a=a.delete(S)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const S=this.query.limitType==="F"?c.last():c.first();c=c.delete(S.key),a=a.delete(S.key),r.track({type:1,doc:S})}return{tu:c,iu:r,Cs:g,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((S,k)=>(function(K,W){const X=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce(20277,{Rt:Z})}};return X(K)-X(W)})(S.type,k.type)||this.eu(S.doc,k.doc))),this.ou(r),i=i??!1;const g=t&&!i?this._u():[],_=this.Xa.size===0&&this.current&&!i?1:0,T=_!==this.Za;return this.Za=_,c.length!==0||T?{snapshot:new oi(this.query,e.tu,a,c,e.mutatedKeys,_===0,T,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Jc,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ie(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new uf(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new af(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ie();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return oi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Cu="SyncEngine";class rv{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class iv{constructor(e){this.key=e,this.hu=!1}}class sv{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Pr((g=>bh(g)),Bo),this.Iu=new Map,this.Eu=new Set,this.du=new Fe(ue.comparator),this.Au=new Map,this.Ru=new mu,this.Vu={},this.mu=new Map,this.fu=si.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ov(n,e,t=!0){const r=pf(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await cf(r,e,t,!0),i}async function av(n,e){const t=pf(n);await cf(t,e,!0,!1)}async function cf(n,e,t,r){const i=await A_(n.localStore,Jt(e)),a=i.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let g;return r&&(g=await uv(n,e,a,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&ef(n.remoteStore,i),g}async function uv(n,e,t,r,i){n.pu=(k,U,K)=>(async function(X,Z,Y,Ae){let Se=Z.view.ru(Y);Se.Cs&&(Se=await zc(X.localStore,Z.query,!1).then((({documents:l})=>Z.view.ru(l,Se))));const Ue=Ae&&Ae.targetChanges.get(Z.targetId),tt=Ae&&Ae.targetMismatches.get(Z.targetId)!=null,ze=Z.view.applyChanges(Se,X.isPrimaryClient,Ue,tt);return tl(X,Z.targetId,ze.au),ze.snapshot})(n,k,U,K);const a=await zc(n.localStore,e,!0),c=new nv(e,a.Qs),g=c.ru(a.documents),_=Is.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),T=c.applyChanges(g,n.isPrimaryClient,_);tl(n,t,T.au);const S=new rv(e,t,c);return n.Tu.set(e,S),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),T.snapshot}async function cv(n,e,t){const r=ge(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((c=>!Bo(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ja(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Tu(r.remoteStore,i.targetId),Ha(r,i.targetId)})).catch(hi)):(Ha(r,i.targetId),await ja(r.localStore,i.targetId,!0))}async function lv(n,e){const t=ge(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Tu(t.remoteStore,r.targetId))}async function hv(n,e,t){const r=_v(n);try{const i=await(function(c,g){const _=ge(c),T=Ne.now(),S=g.reduce(((K,W)=>K.add(W.key)),Ie());let k,U;return _.persistence.runTransaction("Locally write mutations","readwrite",(K=>{let W=Tn(),X=Ie();return _.Ns.getEntries(K,S).next((Z=>{W=Z,W.forEach(((Y,Ae)=>{Ae.isValidDocument()||(X=X.add(Y))}))})).next((()=>_.localDocuments.getOverlayedDocuments(K,W))).next((Z=>{k=Z;const Y=[];for(const Ae of g){const Se=Iy(Ae,k.get(Ae.key).overlayedDocument);Se!=null&&Y.push(new kr(Ae.key,Se,_h(Se.value.mapValue),gn.exists(!0)))}return _.mutationQueue.addMutationBatch(K,T,Y,g)})).next((Z=>{U=Z;const Y=Z.applyToLocalDocumentSet(k,X);return _.documentOverlayCache.saveOverlays(K,Z.batchId,Y)}))})).then((()=>({batchId:U.batchId,changes:Rh(k)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(c,g,_){let T=c.Vu[c.currentUser.toKey()];T||(T=new Fe(we)),T=T.insert(g,_),c.Vu[c.currentUser.toKey()]=T})(r,i.batchId,t),await bs(r,i.changes),await Ko(r.remoteStore)}catch(i){const a=bu(i,"Failed to persist write");t.reject(a)}}async function lf(n,e){const t=ge(n);try{const r=await E_(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const c=t.Au.get(a);c&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?Ce(c.hu,14607):i.removedDocuments.size>0&&(Ce(c.hu,42227),c.hu=!1))})),await bs(t,r,e)}catch(r){await hi(r)}}function el(n,e,t){const r=ge(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,c)=>{const g=c.view.va(e);g.snapshot&&i.push(g.snapshot)})),(function(c,g){const _=ge(c);_.onlineState=g;let T=!1;_.queries.forEach(((S,k)=>{for(const U of k.Sa)U.va(g)&&(T=!0)})),T&&Su(_)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function fv(n,e,t){const r=ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let c=new Fe(ue.comparator);c=c.insert(a,dt.newNoDocument(a,pe.min()));const g=Ie().add(a),_=new zo(pe.min(),new Map,new Fe(we),c,g);await lf(r,_),r.du=r.du.remove(a),r.Au.delete(e),Ru(r)}else await ja(r.localStore,e,!1).then((()=>Ha(r,e,t))).catch(hi)}async function dv(n,e){const t=ge(n),r=e.batch.batchId;try{const i=await T_(t.localStore,e);ff(t,r,null),hf(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await bs(t,i)}catch(i){await hi(i)}}async function pv(n,e,t){const r=ge(n);try{const i=await(function(c,g){const _=ge(c);return _.persistence.runTransaction("Reject batch","readwrite-primary",(T=>{let S;return _.mutationQueue.lookupMutationBatch(T,g).next((k=>(Ce(k!==null,37113),S=k.keys(),_.mutationQueue.removeMutationBatch(T,k)))).next((()=>_.mutationQueue.performConsistencyCheck(T))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(T,S,g))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(T,S))).next((()=>_.localDocuments.getDocuments(T,S)))}))})(r.localStore,e);ff(r,e,t),hf(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await bs(r,i)}catch(i){await hi(i)}}function hf(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function ff(n,e,t){const r=ge(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ha(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||df(n,r)}))}function df(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Tu(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Ru(n))}function tl(n,e,t){for(const r of t)r instanceof af?(n.Ru.addReference(r.key,e),gv(n,r)):r instanceof uf?(ne(Cu,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||df(n,r.key)):ce(19791,{wu:r})}function gv(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ne(Cu,"New document in limbo: "+t),n.Eu.add(r),Ru(n))}function Ru(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ue(Le.fromString(e)),r=n.fu.next();n.Au.set(r,new iv(t)),n.du=n.du.insert(t,r),ef(n.remoteStore,new $n(Jt(hu(t.path)),r,"TargetPurposeLimboResolution",Lo.ce))}}async function bs(n,e,t){const r=ge(n),i=[],a=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((g,_)=>{c.push(r.pu(_,e,t).then((T=>{if((T||t)&&r.isPrimaryClient){const S=T?!T.fromCache:t?.targetChanges.get(_.targetId)?.current;r.sharedClientState.updateQueryState(_.targetId,S?"current":"not-current")}if(T){i.push(T);const S=_u.As(_.targetId,T);a.push(S)}})))})),await Promise.all(c),r.Pu.H_(i),await(async function(_,T){const S=ge(_);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(k=>$.forEach(T,(U=>$.forEach(U.Es,(K=>S.persistence.referenceDelegate.addReference(k,U.targetId,K))).next((()=>$.forEach(U.ds,(K=>S.persistence.referenceDelegate.removeReference(k,U.targetId,K)))))))))}catch(k){if(!fi(k))throw k;ne(vu,"Failed to update sequence numbers: "+k)}for(const k of T){const U=k.targetId;if(!k.fromCache){const K=S.Ms.get(U),W=K.snapshotVersion,X=K.withLastLimboFreeSnapshotVersion(W);S.Ms=S.Ms.insert(U,X)}}})(r.localStore,a))}async function mv(n,e){const t=ge(n);if(!t.currentUser.isEqual(e)){ne(Cu,"User change. New user:",e.toKey());const r=await Xh(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((g=>{g.forEach((_=>{_.reject(new oe(G.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bs(t,r.Ls)}}function yv(n,e){const t=ge(n),r=t.Au.get(e);if(r&&r.hu)return Ie().add(r.key);{let i=Ie();const a=t.Iu.get(e);if(!a)return i;for(const c of a){const g=t.Tu.get(c);i=i.unionWith(g.view.nu)}return i}}function pf(n){const e=ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=lf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fv.bind(null,e),e.Pu.H_=Z_.bind(null,e.eventManager),e.Pu.yu=ev.bind(null,e.eventManager),e}function _v(n){const e=ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pv.bind(null,e),e}class Do{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wo(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return v_(this.persistence,new m_,e.initialUser,this.serializer)}Cu(e){return new Qh(yu.mi,this.serializer)}Du(e){return new S_}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Do.provider={build:()=>new Do};class vv extends Do{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ce(this.persistence.referenceDelegate instanceof Po,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new t_(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_t.withCacheSize(this.cacheSizeBytes):_t.DEFAULT;return new Qh((r=>Po.mi(r,t)),this.serializer)}}class $a{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>el(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mv.bind(null,this.syncEngine),await K_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new X_})()}createDatastore(e){const t=Wo(e.databaseInfo.databaseId),r=(function(a){return new D_(a)})(e.databaseInfo);return(function(a,c,g,_){return new O_(a,c,g,_)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,c,g){return new L_(r,i,a,c,g)})(this.localStore,this.datastore,e.asyncQueue,(t=>el(this.syncEngine,t,0)),(function(){return Kc.v()?new Kc:new C_})())}createSyncEngine(e,t){return(function(i,a,c,g,_,T,S){const k=new sv(i,a,c,g,_,T);return S&&(k.gu=!0),k})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ge(t);ne(Cr,"RemoteStore shutting down."),r.Ea.add(5),await As(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}$a.provider={build:()=>new $a};class Tv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const tr="FirestoreClient";class Ev{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ft.UNAUTHENTICATED,this.clientId=iu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async c=>{ne(tr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ne(tr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=bu(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ta(n,e){n.asyncQueue.verifyOperationInProgress(),ne(tr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await Xh(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function nl(n,e){n.asyncQueue.verifyOperationInProgress();const t=await wv(n);ne(tr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Xc(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>Xc(e.remoteStore,i))),n._onlineComponents=e}async function wv(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ne(tr,"Using user provided OfflineComponentProvider");try{await Ta(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===G.FAILED_PRECONDITION||i.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ti("Error using user provided cache. Falling back to memory cache: "+t),await Ta(n,new Do)}}else ne(tr,"Using default OfflineComponentProvider"),await Ta(n,new vv(void 0));return n._offlineComponents}async function gf(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ne(tr,"Using user provided OnlineComponentProvider"),await nl(n,n._uninitializedComponentsProvider._online)):(ne(tr,"Using default OnlineComponentProvider"),await nl(n,new $a))),n._onlineComponents}function Iv(n){return gf(n).then((e=>e.syncEngine))}async function Av(n){const e=await gf(n),t=e.eventManager;return t.onListen=ov.bind(null,e.syncEngine),t.onUnlisten=cv.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=av.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lv.bind(null,e.syncEngine),t}function bv(n,e,t={}){const r=new Qn;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,g,_,T){const S=new Tv({next:U=>{S.Nu(),c.enqueueAndForget((()=>Y_(a,k)));const K=U.docs.has(g);!K&&U.fromCache?T.reject(new oe(G.UNAVAILABLE,"Failed to get document because the client is offline.")):K&&U.fromCache&&_&&_.source==="server"?T.reject(new oe(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):T.resolve(U)},error:U=>T.reject(U)}),k=new tv(hu(g.path),S,{includeMetadataChanges:!0,qa:!0});return J_(a,k)})(await Av(n),n.asyncQueue,e,t,r))),r.promise}function mf(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const rl=new Map;const yf="firestore.googleapis.com",il=!0;class sl{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yf,this.ssl=il}else this.host=e.host,this.ssl=e.ssl??il;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Kh;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Zy)throw new oe(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Om("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mf(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pu{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Am;switch(r.type){case"firstParty":return new Rm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=rl.get(t);r&&(ne("ComponentProvider","Removing Datastore"),rl.delete(t),r.terminate())})(this),Promise.resolve()}}function Sv(n,e,t,r={}){n=as(n,Pu);const i=ai(e),a=n._getSettings(),c={...a,emulatorOptions:n._getEmulatorOptions()},g=`${e}:${t}`;i&&(gl(`https://${g}`),ml("Firestore",!0)),a.host!==yf&&a.host!==g&&ti("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...a,host:g,ssl:i,emulatorOptions:r};if(!Ir(_,c)&&(n._setSettings(_),r.mockUserToken)){let T,S;if(typeof r.mockUserToken=="string")T=r.mockUserToken,S=ft.MOCK_USER;else{T=Jf(r.mockUserToken,n._app?.options.projectId);const k=r.mockUserToken.sub||r.mockUserToken.user_id;if(!k)throw new oe(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new ft(k)}n._authCredentials=new bm(new ah(T,S))}}class ku{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ku(this.firestore,e,this._query)}}class et{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new et(this.firestore,e,this._key)}toJSON(){return{type:et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Es(t,et._jsonSchema))return new et(e,r||null,new ue(Le.fromString(t.referencePath)))}}et._jsonSchemaVersion="firestore/documentReference/1.0",et._jsonSchema={type:Ke("string",et._jsonSchemaVersion),referencePath:Ke("string")};class gs extends ku{constructor(e,t,r){super(e,t,hu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new et(this.firestore,null,new ue(e))}withConverter(e){return new gs(this.firestore,e,this._path)}}function _f(n,e,...t){if(n=tn(n),arguments.length===1&&(e=iu.newId()),Vm("doc","path",e),n instanceof Pu){const r=Le.fromString(e,...t);return vc(r),new et(n,null,new ue(r))}{if(!(n instanceof et||n instanceof gs))throw new oe(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Le.fromString(e,...t));return vc(r),new et(n.firestore,n instanceof gs?n.converter:null,new ue(r))}}const ol="AsyncQueue";class al{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Yh(this,"async_queue_retry"),this._c=()=>{const r=va();r&&ne(ol,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=va();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=va();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Qn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!fi(e))throw e;ne(ol,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,vn("INTERNAL UNHANDLED ERROR: ",ul(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Au.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&ce(47125,{Pc:ul(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ul(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Du extends Pu{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new al,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new al(e),this._firestoreClient=void 0,await e}}}function Cv(n,e){const t=typeof n=="object"?n:Tl(),r=typeof n=="string"?n:Io,i=Ga(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=Qf("firestore");a&&Sv(i,...a)}return i}function vf(n){if(n._terminated)throw new oe(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Rv(n),n._firestoreClient}function Rv(n){const e=n._freezeSettings(),t=(function(i,a,c,g){return new Wm(i,a,c,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,mf(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Ev(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}class Rt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rt(at.fromBase64String(e))}catch(t){throw new oe(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rt(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Es(e,Rt._jsonSchema))return Rt.fromBase64String(e.bytes)}}Rt._jsonSchemaVersion="firestore/bytes/1.0",Rt._jsonSchema={type:Ke("string",Rt._jsonSchemaVersion),bytes:Ke("string")};class Nu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xu{constructor(e){this._methodName=e}}class Zt{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zt._jsonSchemaVersion}}static fromJSON(e){if(Es(e,Zt._jsonSchema))return new Zt(e.latitude,e.longitude)}}Zt._jsonSchemaVersion="firestore/geoPoint/1.0",Zt._jsonSchema={type:Ke("string",Zt._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};class en{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:en._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Es(e,en._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new en(e.vectorValues);throw new oe(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}en._jsonSchemaVersion="firestore/vectorValue/1.0",en._jsonSchema={type:Ke("string",en._jsonSchemaVersion),vectorValues:Ke("object")};const Pv=/^__.*__$/;class kv{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new kr(e,this.data,this.fieldMask,t,this.fieldTransforms):new ws(e,this.data,t,this.fieldTransforms)}}function Tf(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce(40011,{Ac:n})}}class Vu{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Vu({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return No(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Tf(this.Ac)&&Pv.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Dv{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Wo(e)}Cc(e,t,r,i=!1){return new Vu({Ac:e,methodName:t,Dc:r,path:ot.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nv(n){const e=n._freezeSettings(),t=Wo(n._databaseId);return new Dv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xv(n,e,t,r,i,a={}){const c=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);Af("Data must be an object, but it was:",c,r);const g=wf(r,c);let _,T;if(a.merge)_=new Lt(c.fieldMask),T=c.fieldTransforms;else if(a.mergeFields){const S=[];for(const k of a.mergeFields){const U=Vv(e,k,t);if(!c.contains(U))throw new oe(G.INVALID_ARGUMENT,`Field '${U}' is specified in your field mask but missing from your input data.`);Mv(S,U)||S.push(U)}_=new Lt(S),T=c.fieldTransforms.filter((k=>_.covers(k.field)))}else _=null,T=c.fieldTransforms;return new kv(new Ct(g),_,T)}class Ou extends xu{_toFieldTransform(e){return new vy(e.path,new fs)}isEqual(e){return e instanceof Ou}}function Ef(n,e){if(If(n=tn(n)))return Af("Unsupported field value:",e,n),wf(n,e);if(n instanceof xu)return(function(r,i){if(!Tf(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let c=0;for(const g of r){let _=Ef(g,i.wc(c));_==null&&(_={nullValue:"NULL_VALUE"}),a.push(_),c++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=tn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return my(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ne.fromDate(r);return{timestampValue:Ro(i.serializer,a)}}if(r instanceof Ne){const a=new Ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ro(i.serializer,a)}}if(r instanceof Zt)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rt)return{bytesValue:Bh(i.serializer,r._byteString)};if(r instanceof et){const a=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw i.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:gu(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof en)return(function(c,g){return{mapValue:{fields:{[mh]:{stringValue:yh},[Ao]:{arrayValue:{values:c.toArray().map((T=>{if(typeof T!="number")throw g.Sc("VectorValues must only contain numeric values.");return fu(g.serializer,T)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${su(r)}`)})(n,e)}function wf(n,e){const t={};return lh(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rr(n,((r,i)=>{const a=Ef(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function If(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ne||n instanceof Zt||n instanceof Rt||n instanceof et||n instanceof xu||n instanceof en)}function Af(n,e,t){if(!If(t)||!uh(t)){const r=su(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Vv(n,e,t){if((e=tn(e))instanceof Nu)return e._internalPath;if(typeof e=="string")return bf(n,e);throw No("Field path arguments must be of type string or ",n,!1,void 0,t)}const Ov=new RegExp("[~\\*/\\[\\]]");function bf(n,e,t){if(e.search(Ov)>=0)throw No(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nu(...e.split("."))._internalPath}catch{throw No(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function No(n,e,t,r,i){const a=r&&!r.isEmpty(),c=i!==void 0;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(a||c)&&(_+=" (found",a&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new oe(G.INVALID_ARGUMENT,g+n+_)}function Mv(n,e){return n.some((t=>t.isEqual(e)))}class Sf{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Lv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Lv extends Sf{data(){return super.data()}}function Cf(n,e){return typeof e=="string"?bf(n,e):e instanceof Nu?e._internalPath:e._delegate._internalPath}class Fv{convertValue(e,t="none"){switch(Zn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Rr(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[Ao].arrayValue?.values?.map((r=>$e(r.doubleValue)));return new en(t)}convertGeoPoint(e){return new Zt($e(e.latitude),$e(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Uo(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(cs(e));default:return null}}convertTimestamp(e){const t=Jn(e);return new Ne(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Le.fromString(e);Ce(Gh(r),9688,{name:e});const i=new ls(r.get(1),r.get(3)),a=new ue(r.popFirst(5));return i.isEqual(t)||vn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Uv(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Ji{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wr extends Sf{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Cf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=wr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}wr._jsonSchemaVersion="firestore/documentSnapshot/1.0",wr._jsonSchema={type:Ke("string",wr._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class fo extends wr{data(e={}){return super.data(e)}}class is{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ji(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new fo(this._firestore,this._userDataWriter,r.key,r,new Ji(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((g=>{const _=new fo(i._firestore,i._userDataWriter,g.doc.key,g.doc,new Ji(i._snapshot.mutatedKeys.has(g.doc.key),i._snapshot.fromCache),i.query.converter);return g.doc,{type:"added",doc:_,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((g=>a||g.type!==3)).map((g=>{const _=new fo(i._firestore,i._userDataWriter,g.doc.key,g.doc,new Ji(i._snapshot.mutatedKeys.has(g.doc.key),i._snapshot.fromCache),i.query.converter);let T=-1,S=-1;return g.type!==0&&(T=c.indexOf(g.doc.key),c=c.delete(g.doc.key)),g.type!==1&&(c=c.add(g.doc),S=c.indexOf(g.doc.key)),{type:jv(g.type),doc:_,oldIndex:T,newIndex:S}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=is._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=iu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jv(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce(61501,{type:n})}}function Bv(n){n=as(n,et);const e=as(n.firestore,Du);return bv(vf(e),n._key).then((t=>zv(e,n,t)))}is._jsonSchemaVersion="firestore/querySnapshot/1.0",is._jsonSchema={type:Ke("string",is._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class qv extends Fv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,t)}}function Hv(n,e,t){n=as(n,et);const r=as(n.firestore,Du),i=Uv(n.converter,e);return $v(r,[xv(Nv(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,gn.none())])}function $v(n,e){return(function(r,i){const a=new Qn;return r.asyncQueue.enqueueAndForget((async()=>hv(await Iv(r),i,a))),a.promise})(vf(n),e)}function zv(n,e,t){const r=t.docs.get(e._key),i=new qv(n);return new wr(n,i,e._key,r,new Ji(t.hasPendingWrites,t.fromCache),e.converter)}function Wv(){return new Ou("serverTimestamp")}(function(e,t=!0){(function(i){li=i})(ui),Zr(new Ar("firestore",((r,{instanceIdentifier:i,options:a})=>{const c=r.getProvider("app").getImmediate(),g=new Du(new Sm(r.getProvider("auth-internal")),new Pm(c,r.getProvider("app-check-internal")),(function(T,S){if(!Object.prototype.hasOwnProperty.apply(T.options,["projectId"]))throw new oe(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ls(T.options.projectId,S)})(c,i),c);return a={useFetchStreams:t,...a},g._setSettings(a),g}),"PUBLIC").setMultipleInstances(!0)),Gn(gc,mc,e),Gn(gc,mc,"esm2020")})();const Gv={apiKey:"AIzaSyAIDFwoDRCn86vZ14to5Sf5smzfCryJkrA",authDomain:"wiruleta.firebaseapp.com",projectId:"wiruleta",storageBucket:"wiruleta.firebasestorage.app",messagingSenderId:"376867904444",appId:"1:376867904444:web:177933f41203cfe8a329b9"},Rf=vl(Gv);wm(Rf);const Pf=Cv(Rf);(()=>{const n=[["Cielo","#0EBEFF"],["Dulce","#FF5C69"],["Paz","#29C72E"],["Mora","#7000FF"],["Futuro","#21273B"]],e=r=>{const[i,a]=je(r).data("tema").split("|");je("html").attr("data-theme",i),je('meta[name="theme-color"]').length?je('meta[name="theme-color"]').attr("content",a):je("<meta>",{name:"theme-color",content:a}).appendTo("head"),Kv("witema",`${i}|${a}`,720),je(".mtha").removeClass("mtha"),je(r).addClass("mtha")},t=()=>{je(".witemas").html(n.map(([a,c])=>`<div class="tema" data-tema="${a}|${c}" style="background:${c}"></div>`).join(""));const r=Qv("witema"),i=je(`[data-tema="${r}"]`)[0]||je(".mtha")[0]||je("[data-tema]").first()[0];i&&e(i),je(document).off("click.witema").on("click.witema","[data-tema]",a=>e(a.currentTarget))};return je(".witemas").length?t():new MutationObserver(r=>r.some(({addedNodes:i})=>[...i].some(a=>a.querySelector?.(".witemas")))&&(t(),!0)).observe(document.body,{childList:!0,subtree:!0}),{set:e}})();(()=>{const n=()=>{const e=new Date;je(".wty").text(e.getFullYear()),je(".wtu").text(e.toLocaleString()),je(document).off("click.infoo",".abw,.abwok").on("click.infoo",".abw,.abwok",function(){const t=this.id||"";navigator.clipboard&&t&&navigator.clipboard.writeText(t).catch(()=>{}),je(".abwc").toggleClass("dpn")})};return je(".wty,.wtu,.abw,.abwok").length?n():new MutationObserver(e=>e.some(({addedNodes:t})=>[...t].some(r=>r.querySelector?.(".wty,.wtu,.abw,.abwok")))&&(n(),!0)).observe(document.body,{childList:!0,subtree:!0}),n})();const xo=(n,e="success")=>{je(".alert-box").remove();const t={error:{bg:"#FFE8E6",txt:"#D32F2F",border:"#FFCDD2",icon:"fa-circle-exclamation"},success:{bg:"#E8F5E9",txt:"#2E7D32",border:"#C8E6C9",icon:"fa-circle-check"}},{bg:r,txt:i,border:a,icon:c}=t[e]||t.error,g=je(`
        <div class="alert-box" style="
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 20px;
            border-radius: 8px;
            background: ${r};
            color: ${i};
            border-left: 4px solid ${a};
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 300px;
            max-width: 90%;
            
        ">
            <i class="fas ${c}"></i>
            <span>${n}</span>
        </div>
    `).appendTo("body").hide().fadeIn(300);setTimeout(()=>g.fadeOut(300,()=>g.remove()),3e3)};function Kv(n,e,t){try{localStorage.setItem(n,JSON.stringify({value:e,expiry:Date.now()+t*36e5,type:typeof e,isArray:Array.isArray(e)}))}catch(r){console.error("Error savels",r)}}function Qv(n){try{const e=localStorage.getItem(n);if(!e)return null;const t=JSON.parse(e);return!t||Date.now()>t.expiry?(localStorage.removeItem(n),null):t.value}catch(e){return console.error("Error getls:",e),Xv(n),null}}function Xv(...n){n.forEach(e=>{e&&typeof e=="string"&&localStorage.removeItem(e)})}je("h1").click(async function(){xo("Escribiendo en base de datos, espere...");try{const n=_f(Pf,"publico","wilder");await Hv(n,{nombre:"Wilder",apellidos:"Uno Dos",mensaje:"Hola, Dios te protege!",creacion:Wv()}),xo("â Documento guardado exitosamente!")}catch(n){console.error(n)}});je("button").click(async function(){xo("Esperando un mensaje ");try{const n=_f(Pf,"publico","wilder"),e=await Bv(n);if(e.exists()){const t=e.data();xo(t.mensaje)}}catch(n){console.error(n)}});
